import{c as Ct,v as eo,a as ie,b as C,F as Qr,l as ei,q as Vn,i as v,x as _,k as V,m as ti,w as z,s as ee,t as X,y as to,T as no,p as P,o as Lt,z as tn,A as ft,B as ro,C as Ze,d as g,f as k,I as io,D as x,E as kn,h as we,G as so,n as fe,_ as oo,H as ao}from"./index-5qB3zWAt.js";import{a as lo,d as co,e as uo,c as ho}from"./Spacing.styled-BO0L7WE_.js";import{b as He,T as pt,c as Ut}from"./Card.styled-uua4Zg5B.js";import{_ as fo}from"./Hero-2-gan1PoOh.js";/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Ct("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Ct("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Ct("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Ct("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),bo={name:"HollowDotsSpinner",props:{animationDuration:{type:Number,default:1e3},dotSize:{type:Number,default:15},dotsNum:{type:Number,default:3},color:{type:String,default:"#fff"}},computed:{horizontalMargin(){return this.dotSize/2},spinnerStyle(){return{height:`${this.dotSize}px`,width:`${(this.dotSize+this.horizontalMargin*2)*this.dotsNum}px`}},dotStyle(){return{animationDuration:`${this.animationDuration}ms`,width:`${this.dotSize}px`,height:`${this.dotSize}px`,margin:`0 ${this.horizontalMargin}px`,borderWidth:`${this.dotSize/5}px`,borderColor:this.color}},dotsStyles(){const t=[],n=this.animationDuration;for(let r=1;r<=this.dotsNum;r++)t.push({animationDelay:`${n*r*.3}ms`,...this.dotStyle});return t}}};function yo(t,e,n,r,i,s){return C(),ie("div",{class:"hollow-dots-spinner",style:Vn(s.spinnerStyle)},[(C(!0),ie(Qr,null,ei(s.dotsStyles,(o,a)=>(C(),ie("div",{key:a,class:"dot",style:Vn(o)},null,4))),128))],4)}var vo=eo(bo,[["render",yo]]),xo=Object.defineProperty,$o=Object.defineProperties,wo=Object.getOwnPropertyDescriptors,Jn=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,So=Object.prototype.propertyIsEnumerable,Hn=(t,e,n)=>e in t?xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ke=(t,e)=>{for(var n in e||(e={}))ko.call(e,n)&&Hn(t,n,e[n]);if(Jn)for(var n of Jn(e))So.call(e,n)&&Hn(t,n,e[n]);return t},No=(t,e)=>$o(t,wo(e)),Gn,pe;(pe=Gn||(Gn={}))[pe.TITLE_ONLY=0]="TITLE_ONLY",pe[pe.TITLE_DESCRIPTION=1]="TITLE_DESCRIPTION",pe[pe.COMPONENT=2]="COMPONENT",pe[pe.VNODE=3]="VNODE";const Io={"top-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"},"top-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"top-center":{bounce:"mosha__bounceInDown",zoom:"mosha__zoomIn",slide:"mosha__slideInDown"},"bottom-center":{bounce:"mosha__bounceInUp",zoom:"mosha__zoomIn",slide:"mosha__slideInUp"},"bottom-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"bottom-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"}},Wn=(t,e=300)=>{let n;return(...r)=>{n&&(clearTimeout(n),n=void 0),n=setTimeout(()=>t(...r),e)}},Fo=(t,e,n)=>{const r=P(),i=P(void 0),s=P(),o=c=>c instanceof MouseEvent,a=c=>{n!==!1&&r.value&&(o(c)?i.value=r.value.clientX-c.clientX:i.value=r.value.touches[0].clientX-c.touches[0].clientX,s.value=No(ke({},s.value),{transition:"none"}),t.endsWith("left")?s.value.left=-i.value+"px !important":t.endsWith("right")?s.value.right=`${i.value}px !important`:i.value>0?s.value.left=-i.value+"px !important":s.value.right=`${i.value}px !important`,Math.abs(i.value)>200&&e())},l=c=>{n!==!1&&(r.value&&(r.value=void 0),i.value&&(i.value=void 0),removeEventListener(c,a))};return tn(()=>{n!==!1&&(l("mousemove"),l("touchmove"))}),{swipedDiff:i,swipeStart:r,swipeStyle:s,swipeHandler:a,startSwipeHandler:c=>{if(n===!1)return;r.value=c;const u=o(c)?"mousemove":"touchmove",p=o(c)?"mouseup":"touchend";addEventListener(u,a),addEventListener(p,()=>($=>{const w={transition:"left .3s ease-out",left:0},h={transition:"right .3s ease-out",right:0},N={transition:"all .3s ease-out",left:0,right:0};t.endsWith("left")?s.value=ke(ke({},s.value),w):t.endsWith("right")?s.value=ke(ke({},s.value),h):s.value=ke(ke({},s.value),N),r.value=void 0,i.value=void 0,removeEventListener($,a)})(u))},cleanUpMove:l}};var ni=_({props:{type:{type:String,default:"default"}}});const Ao={class:"mosha__icon"},Oo={key:0,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},Co=v("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),Mo={key:1,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},Bo=v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),Do={key:2,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},qo=v("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ro=v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"},null,-1),Ko={key:3,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#616161"},_o=v("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),To=v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1),Eo={key:4,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},Po=v("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),jo=v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1);ni.render=function(t,e,n,r,i,s){return C(),V("span",Ao,[t.type==="warning"?(C(),V("svg",Oo,[Co])):t.type==="danger"?(C(),V("svg",Mo,[Bo])):t.type==="success"?(C(),V("svg",Do,[qo,Ro])):t.type==="default"?(C(),V("svg",Ko,[_o,To])):(C(),V("svg",Eo,[Po,jo]))])};var zo=_({name:"MToast",components:{MIcon:ni},props:{visible:Boolean,text:{type:String,default:""},description:{type:String,default:""},toastBackgroundColor:{type:String,default:""},type:{type:String,default:"default"},onClose:{type:Function,default:()=>null},onCloseHandler:{type:Function,required:!0},offset:{type:Number,required:!0},id:{type:Number,required:!0},timeout:{type:Number,default:5e3},position:{type:String,required:!0},showCloseButton:{type:Boolean,default:!0},swipeClose:{type:Boolean,default:!0},hideProgressBar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},transition:{type:String,default:"bounce"}},setup(t,e){const n=P(),{width:r}=(()=>{const T=P(-1),W=P(-1),L=Z=>{Z!==null&&Z.currentTarget!==null&&(T.value=Z.currentTarget.innerWidth,W.value=Z.currentTarget.innerHeight)};return Lt(()=>{window.innerWidth>0&&(T.value=window.innerWidth,W.value=window.innerHeight),window.addEventListener("resize",Wn(L))}),tn(()=>{window.removeEventListener("resize",Wn(L))}),{width:T,height:W}})(),{swipedDiff:i,startSwipeHandler:s,swipeStyle:o,cleanUpMove:a}=Fo(t.position,t.onCloseHandler,t.swipeClose),{transitionType:l}=(c=t.position,u=t.transition,p=i,{transitionType:ft(()=>p.value>200?"mosha__fadeOutLeft":p.value<-200?"mosha__fadeOutRight":Io[c][u])});var c,u,p;const{start:$,stop:w,progress:h}=((T,W)=>{const L=P(),Z=P(0),Je=P(W),zt=P(),Ln=P(100),Un=()=>{clearInterval(zt.value),clearTimeout(L.value)};return Lt(()=>{}),tn(()=>{Un()}),{start:()=>{Z.value=Date.now(),clearTimeout(L.value),zt.value=setInterval(()=>{Ln.value--},W/100-5),L.value=setTimeout(T,Je.value)},stop:()=>{clearInterval(zt.value),clearTimeout(L.value),Je.value-=Date.now()-Z.value},clear:Un,progress:Ln}})(()=>{t.onCloseHandler()},t.timeout),N=ft(()=>e.slots.default),Ve=ft(()=>/<\/?[a-z][\s\S]*>/i.test(t.description)),G=()=>{t.timeout>0&&$()};return ro(()=>{const{customStyle:T}=((W,L,Z)=>{const Je=ft(()=>{switch(W){case"top-left":return{left:"0",top:`${L}px`};case"bottom-left":return{left:"0",bottom:`${L}px`};case"bottom-right":return{right:"0",bottom:`${L}px`};case"top-center":return{top:`${L}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};case"bottom-center":return{bottom:`${L}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};default:return{right:"0",top:`${L}px`}}});return Z.length>0&&(Je.value.backgroundColor=Z),{customStyle:Je}})(t.position,t.offset,t.toastBackgroundColor);n.value=T.value}),Lt(()=>{G()}),{style:n,transitionType:l,startTimer:G,progress:h,onTouchStart:T=>{s(T)},onMouseLeave:()=>{a("mousemove"),G()},onMouseDown:T=>{s(T)},swipeStyle:o,isSlotPassed:N,isDescriptionHtml:Ve,onMouseEnter:()=>{t.timeout>0&&r.value>425&&w()}}}});const Lo={class:"mosha__toast__content-wrapper"},Uo={class:"mosha__toast__content"},Vo={class:"mosha__toast__content__text"},Jo={key:1,class:"mosha__toast__content__description"},Ho={key:0,class:"mosha__toast__slot-wrapper"};zo.render=function(t,e,n,r,i,s){const o=ti("MIcon");return C(),V(no,{name:t.transitionType,type:"animation"},{default:z(()=>[t.visible?(C(),V("div",{key:0,class:["mosha__toast",t.toastBackgroundColor?null:t.type],style:[t.style,t.swipeStyle],onMouseenter:e[2]||(e[2]=(...a)=>t.onMouseEnter&&t.onMouseEnter(...a)),onMouseleave:e[3]||(e[3]=(...a)=>t.onMouseLeave&&t.onMouseLeave(...a)),onTouchstartPassive:e[4]||(e[4]=(...a)=>t.onTouchStart&&t.onTouchStart(...a)),onMousedown:e[5]||(e[5]=(...a)=>t.onMouseDown&&t.onMouseDown(...a))},[v("div",Lo,[t.showIcon?(C(),V(o,{key:0,type:t.type},null,8,["type"])):ee("",!0),v("div",Uo,[v("div",Vo,X(t.text),1),t.description.length>0&&t.isDescriptionHtml?(C(),V("div",{key:0,class:"mosha__toast__content__description",innerHTML:t.description},null,8,["innerHTML"])):ee("",!0),t.description.length>0&&!t.isDescriptionHtml?(C(),V("div",Jo,X(t.description),1)):ee("",!0)])]),t.isSlotPassed?(C(),V("div",Ho,[to(t.$slots,"default")])):ee("",!0),t.showCloseButton?(C(),V("div",{key:1,class:"mosha__toast__close-icon",onClick:e[1]||(e[1]=(...a)=>t.onCloseHandler&&t.onCloseHandler(...a))})):ee("",!0),t.hideProgressBar?ee("",!0):(C(),V("div",{key:2,class:"mosha__toast__progress",style:{width:`${t.progress}%`}},null,4))],38)):ee("",!0)]),_:3},8,["name"])};function Go(){return{copyText:async e=>{try{await navigator.clipboard.writeText(e),Ze.success(`${e} copied to clipboard!`,1400)}catch{Ze.error("Failed to copy text")}}}}const Wo={class:"z-[9999999] opacity-[0.9] h-full w-full fixed top-0 bottom-0 right-0 left-0 flex flex-col justify-center items-center bg-black"},Zo={class:"flex absolute bottom-6 justify-center flex-col text-center"},Yo={class:"font-bold"},Xo={class:"text-[var(--text-secondary)]"},Qo={__name:"RequestLoader",props:{Title:{type:String},Message:{type:String}},setup(t){return(e,n)=>(C(),ie("div",Wo,[v(k(vo),{color:"var(--accent-orange)"}),g("div",Zo,[g("p",Yo,X(t.Title),1),g("p",Xo,X(t.Message),1)])]))}},mt=io`
    input, textarea {
        width: 100%;
        padding: 14px 20px;
        border: 1px solid var(--border-gray);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 16px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
        resize: none;
        box-sizing: border-box;
        background: transparent;
    }

    /* Placeholder styling */
    input::placeholder,
    textarea::placeholder {
        color: var(--text-secondary);
        opacity: 0.8;
        transition: opacity 0.3s ease;
    }

    /* Hover effects */
    input:hover,
    textarea:hover {
        border-color: var(--line-gray);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
    }

    input:hover::placeholder,
    textarea:hover::placeholder {
        opacity: 1;
    }

    /* Focus effects */
    input:focus,
    textarea:focus {
        border: 2px solid transparent;
        background: linear-gradient(var(--bg-dark), var(--bg-dark)) padding-box,
                    var(--linear-gradient) border-box;
        box-shadow: 
        0 0 0 1px transparent,
        0 8px 32px rgba(255, 167, 38, 0.15),
        0 4px 16px rgba(239, 83, 80, 0.1);
        transform: translateY(-2px);
    }

    input:focus::placeholder,
    textarea:focus::placeholder {
        opacity: 0.6;
        transform: translateY(-2px);
    }

    /* Active effects */
    input:active,
    textarea:active {
        transform: translateY(0);
        box-shadow: 
        0 0 0 1px transparent,
        0 4px 16px rgba(255, 167, 38, 0.2);
    }

    /* Specific textarea styling */
    textarea {
        min-height: 120px;
        max-height: 300px;
        resize: vertical;
        line-height: 1.6;
    }

    /* Enhanced focus with gradient border animation */
    input:focus,
    textarea:focus {
        animation: borderGlow 2s ease-in-out infinite alternate;
    }

    @keyframes borderGlow {
        0% {
        box-shadow: 
            0 0 0 1px transparent,
            0 8px 32px rgba(255, 167, 38, 0.15),
            0 4px 16px rgba(239, 83, 80, 0.1);
        }
        100% {
        box-shadow: 
            0 0 0 1px transparent,
            0 8px 32px rgba(255, 167, 38, 0.25),
            0 4px 16px rgba(239, 83, 80, 0.2);
        }
    }

    /* Disabled state */
    input:disabled,
    textarea:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: rgba(13, 13, 13, 0.5);
        border-color: var(--border-gray);
    }

    input:disabled:hover,
    textarea:disabled:hover {
        transform: none;
        box-shadow: none;
    }

    /* Error state */
    input.error,
    textarea.error {
        border-color: var(--accent-red);
        background: var(--accent-red-faded);
    }

    input.error:focus,
    textarea.error:focus {
        box-shadow: 
        0 0 0 1px transparent,
        0 8px 32px rgba(239, 83, 80, 0.3),
        0 4px 16px rgba(239, 83, 80, 0.2);
    }

    /* Success state */
    input.success,
    textarea.success {
        border-color: var(--accent-orange);
        background: var(--accent-orange-faded);
    }

    input.success:focus,
    textarea.success:focus {
        box-shadow: 
        0 0 0 1px transparent,
        0 8px 32px rgba(255, 167, 38, 0.3),
        0 4px 16px rgba(255, 167, 38, 0.2);
    }

`,Zn=_({name:"CCloseButton",props:{dark:Boolean,disabled:Boolean,white:Boolean},emits:["click"],setup(t,{emit:e}){const n=()=>{t.disabled||e("click")};return()=>x("button",{type:"button",class:["btn","btn-close",{"btn-close-white":t.white},t.disabled],"aria-label":"Close",disabled:t.disabled,...t.dark&&{"data-coreui-theme":"dark"},onClick:n})}}),ye={type:String,validator:t=>["primary","secondary","success","danger","warning","info","dark","light","link","transparent"].includes(t)},ea={type:String,validator:t=>["primary","secondary","success","danger","warning","info","dark","light","primary-emphasis","secondary-emphasis","success-emphasis","danger-emphasis","warning-emphasis","info-emphasis","light-emphasis","body","body-emphasis","body-secondary","body-tertiary","black","black-50","white","white-50"].includes(t)},ri=_({name:"CCard",props:{color:ye,textBgColor:ye,textColor:ea},setup(t,{slots:e}){return()=>x("div",{class:["card",{[`bg-${t.color}`]:t.color,[`text-${t.textColor}`]:t.textColor,[`text-bg-${t.textBgColor}`]:t.textBgColor}]},e.default&&e.default())}}),ii=_({name:"CCardBody",setup(t,{slots:e}){return()=>x("div",{class:"card-body"},e.default&&e.default())}}),ta=_({name:"CForm",props:{validated:Boolean},setup(t,{slots:e}){return()=>x("form",{class:[{"was-validated":t.validated}]},e.default&&e.default())}}),Jt=_({name:"CFormFeedback",props:{as:{type:String,default:"div"},invalid:Boolean,tooltip:Boolean,valid:Boolean},setup(t,{slots:e}){return()=>x(t.as,{class:[{[`invalid-${t.tooltip?"tooltip":"feedback"}`]:t.invalid,[`valid-${t.tooltip?"tooltip":"feedback"}`]:t.valid}]},e.default&&e.default())}}),Yn=_({name:"CFormControlValidation",inheritAttrs:!1,props:{describedby:String,feedback:String,feedbackInvalid:String,feedbackValid:String,invalid:Boolean,tooltipFeedback:Boolean,valid:Boolean},setup(t,{slots:e}){return()=>[t.feedback&&(t.valid||t.invalid)&&x(Jt,{...t.invalid&&{id:t.describedby},invalid:t.invalid,tooltip:t.tooltipFeedback,valid:t.valid},{default:()=>e.feedback&&e.feedback()||t.feedback}),(t.feedbackInvalid||e.feedbackInvalid)&&x(Jt,{id:t.describedby,invalid:!0,tooltip:t.tooltipFeedback},{default:()=>e.feedbackInvalid&&e.feedbackInvalid()||t.feedbackInvalid}),(t.feedbackValid||e.feedbackValid)&&x(Jt,{tooltip:t.tooltipFeedback,valid:!0},{default:()=>e.feedbackValid&&e.feedbackValid()||t.feedbackValid})]}}),Xn=_({name:"CFormLabel",props:{customClassName:[Array,String]},setup(t,{slots:e}){return()=>x("label",{class:t.customClassName??"form-label"},e.default&&e.default())}}),na=_({name:"CFormFloating",setup(t,{slots:e}){return()=>x("div",{class:"form-floating"},e.default&&e.default())}}),Qn=_({name:"CFormText",props:{as:{type:String,default:"div"}},setup(t,{slots:e}){return()=>x(t.as,{class:"form-text"},e.default&&e.default())}}),si=_({name:"CFormControlWrapper",inheritAttrs:!1,props:{...Yn.props,floatingClassName:String,floatingLabel:String,id:{type:String},label:String,text:String},setup(t,{slots:e}){const n=()=>x(Yn,{describedby:t.describedby,feedback:t.feedback,feedbackInvalid:t.feedbackInvalid,feedbackValid:t.feedbackValid,invalid:t.invalid,tooltipFeedback:t.tooltipFeedback,valid:t.valid},{...e.feedback&&{feedback:()=>e.feedback&&e.feedback()},...e.feedbackInvalid&&{feedbackInvalid:()=>e.feedbackInvalid&&e.feedbackInvalid()},...e.feedbackValid&&{feedbackValid:()=>e.feedbackInvalid&&e.feedbackInvalid()}});return()=>t.floatingLabel?x(na,{class:t.floatingClassName},()=>[e.default&&e.default(),x(Xn,{for:t.id},{default:()=>e.label&&e.label()||t.label||t.floatingLabel}),(t.text||e.text)&&x(Qn,{id:t.describedby},{default:()=>e.text&&e.text()||t.text}),n()]):[(t.label||e.label)&&x(Xn,{for:t.id},{default:()=>e.label&&e.label()||t.label}),e.default&&e.default(),(t.text||e.text)&&x(Qn,{id:t.describedby},{default:()=>e.text&&e.text()||t.text}),n()]}}),ra=typeof window>"u"?class extends Object{}:window.File,Ht=_({name:"CFormInput",props:{disabled:Boolean,feedback:String,feedbackInvalid:String,feedbackValid:String,floatingLabel:String,id:String,invalid:Boolean,label:String,modelValue:[ra,Number,String],plainText:Boolean,readonly:Boolean,size:{type:String,validator:t=>["sm","lg"].includes(t)},text:String,tooltipFeedback:Boolean,type:{type:String,default:"text"},valid:Boolean},emits:["change","input","update:modelValue"],setup(t,{attrs:e,emit:n,slots:r}){const i=o=>{const a=o.target;n("change",o),n("update:modelValue",a.value)},s=o=>{const a=o.target;n("input",o),n("update:modelValue",a.value)};return()=>x(si,{...typeof e["aria-describedby"]=="string"&&{describedby:e["aria-describedby"]},feedback:t.feedback,feedbackInvalid:t.feedbackInvalid,feedbackValid:t.feedbackValid,floatingLabel:t.floatingLabel,id:t.id,invalid:t.invalid,label:t.label,text:t.text,tooltipFeedback:t.tooltipFeedback,valid:t.valid},{default:()=>x("input",{id:t.id,...e,class:[t.plainText?"form-control-plaintext":"form-control",{"form-control-color":t.type==="color",[`form-control-${t.size}`]:t.size,"is-invalid":t.invalid,"is-valid":t.valid},e.class],disabled:t.disabled,onChange:o=>i(o),onInput:o=>s(o),readonly:t.readonly,type:t.type,...(t.modelValue||t.modelValue===0)&&{value:t.modelValue}},r.default&&r.default()),...r.feedback&&{feedback:()=>r.feedback&&r.feedback()},...r.feedbackInvalid&&{feedbackInvalid:()=>r.feedbackInvalid&&r.feedbackInvalid()},...r.feedbackValid&&{feedbackValid:()=>r.feedbackInvalid&&r.feedbackInvalid()},...r.label&&{label:()=>r.label&&r.label()},...r.text&&{text:()=>r.text&&r.text()}})}}),ia=_({name:"CFormTextarea",props:{disabled:Boolean,feedback:String,feedbackInvalid:String,feedbackValid:String,floatingLabel:String,id:String,invalid:Boolean,label:String,modelValue:String,plainText:Boolean,readonly:Boolean,text:String,tooltipFeedback:Boolean,valid:Boolean},emits:["change","input","update:modelValue"],setup(t,{attrs:e,emit:n,slots:r}){const i=o=>{const a=o.target;n("change",o),n("update:modelValue",a.value)},s=o=>{const a=o.target;n("input",o),n("update:modelValue",a.value)};return()=>x(si,{...typeof e["aria-describedby"]=="string"&&{describedby:e["aria-describedby"]},feedback:t.feedback,feedbackInvalid:t.feedbackInvalid,feedbackValid:t.feedbackValid,floatingLabel:t.floatingLabel,id:t.id,invalid:t.invalid,label:t.label,text:t.text,tooltipFeedback:t.tooltipFeedback,valid:t.valid},{default:()=>x("textarea",{id:t.id,...e,disabled:t.disabled,readonly:t.readonly,class:[t.plainText?"form-control-plaintext":"form-control",{"is-invalid":t.invalid,"is-valid":t.valid},e.class],onChange:o=>i(o),onInput:o=>s(o),...t.modelValue&&{value:t.modelValue}},r.default&&r.default()),...r.feedback&&{feedback:()=>r.feedback&&r.feedback()},...r.feedbackInvalid&&{feedbackInvalid:()=>r.feedbackInvalid&&r.feedbackInvalid()},...r.feedbackValid&&{feedbackValid:()=>r.feedbackInvalid&&r.feedbackInvalid()},...r.label&&{label:()=>r.label&&r.label()},...r.text&&{text:()=>r.text&&r.text()}})}}),sa=_({name:"CProgressBar",props:{animated:Boolean,color:ye,value:{type:Number,default:0},variant:{type:String,validator:t=>t==="striped"}},setup(t,{slots:e}){const n=kn("stacked",!1);return()=>x("div",{class:["progress-bar",`bg-${t.color}`,{[`progress-bar-${t.variant}`]:t.variant,"progress-bar-animated":t.animated}],...!n&&{style:{width:`${t.value}%`}}},e.default&&e.default())}}),oi=_({name:"CProgress",props:{animated:Boolean,color:ye,height:Number,progressBarClassName:String,thin:Boolean,value:{type:Number,default:0},variant:{type:String,validator:t=>t==="striped"},white:Boolean},setup(t,{slots:e}){const n=kn("stacked",!1);return()=>x("div",{class:["progress",{"progress-thin":t.thin,"progress-white":t.white}],style:{...t.height?{height:`${t.height}px`}:{},...n?{width:`${t.value}%`}:{}},...t.value!==void 0&&{role:"progressbar","aria-valuenow":t.value,"aria-valuemin":0,"aria-valuemax":100}},e.default&&e.default().some(r=>r.type.name==="CProgressBar")?e.default().map(r=>r.type.name==="CProgressBar"?x(r,{...t.animated&&{animated:t.animated},...t.color&&{color:t.color},...t.value&&{value:t.value},...t.variant&&{variant:t.variant}}):r):x(sa,{...t.progressBarClassName&&{class:t.progressBarClassName},animated:t.animated,color:t.color,value:t.value,variant:t.variant},()=>e.default&&e.default()))}});_({name:"CToastClose",props:{as:String,...Zn.props},emits:["close"],setup(t,{slots:e,emit:n}){const r=kn("updateVisible"),i=()=>{n("close"),r(!1)};return()=>t.as?x(ti(t.as),{onClick:()=>{i()}},()=>e.default&&e.default()):x(Zn,{...t,onClick:()=>{i()}})}});const oa={silent:!1,logLevel:"warn"};function ve(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}const aa=()=>({func:()=>{},bool:!0,string:"",number:0,array:()=>[],object:()=>({}),integer:0}),ai=Object.prototype,li=ai.toString,la=ai.hasOwnProperty,ci=/^\s*function (\w+)/;function er(t){const e=t?.type??t;if(e){const n=e.toString().match(ci);return n?n[1]:""}return""}function ca(t){if(t==null)return"";const e=t.constructor.toString().match(ci);return e?e[1].replace(/^Async/,""):""}function tr(t){return"structuredClone"in globalThis?structuredClone(t):Array.isArray(t)?[...t]:ve(t)?Object.assign({},t):t}function ua(){}let D=ua;const Xe=(t,e)=>la.call(t,e),da=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e},Qe=Array.isArray||function(e){return li.call(e)==="[object Array]"},et=t=>li.call(t)==="[object Function]",nn=(t,e)=>ve(t)&&Xe(t,"_vueTypes_name")&&(!e||t._vueTypes_name===e),ui=t=>ve(t)&&(Xe(t,"type")||["_vueTypes_name","validator","default","required"].some(e=>Xe(t,e)));function di(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function Ae(t,e,n=!1){let r,i=!0,s="";ve(t)?r=t:r={type:t};const o=nn(r)?r._vueTypes_name+" - ":"";if(ui(r)&&r.type!==null){if(r.type===void 0||r.type===!0||!r.required&&e==null)return i;Qe(r.type)?(i=r.type.some(a=>Ae(a,e,!0)===!0),s=r.type.map(a=>er(a)).join(" or ")):(s=er(r),s==="Array"?i=Qe(e):s==="Object"?i=ve(e):s==="String"||s==="Number"||s==="Boolean"||s==="Function"?i=ca(e)===s:i=e instanceof r.type)}if(!i){const a=`${o}value "${e}" should be of type "${s}"`;return n===!1?(D(a),!1):a}if(Xe(r,"validator")&&et(r.validator)){const a=D,l=[];if(D=c=>{l.push(c)},i=r.validator(e),D=a,!i){const c=(l.length>1?"* ":"")+l.join(`
* `);return l.length=0,n===!1?(D(c),i):c}}return i}function ne(t,e){const n=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get(){return this.required=!0,this}},def:{value(i){if(i===void 0){if(this.type===Boolean||Array.isArray(this.type)&&this.type.includes(Boolean)){this.default=void 0;return}return Xe(this,"default")&&delete this.default,this}return!et(i)&&Ae(this,i,!0)!==!0?(D(`${this._vueTypes_name} - invalid default value: "${i}"`),this):(Qe(i)?this.default=()=>tr(i):ve(i)?this.default=()=>tr(i):this.default=i,this)}}}),{validator:r}=n;return et(r)&&(n.validator=di(r,n)),n}function $e(t,e){const n=ne(t,e);return Object.defineProperty(n,"validate",{value(r){return et(this.validator)&&D(`${this._vueTypes_name} - calling .validate() will overwrite the current custom validator function. Validator info:
${JSON.stringify(this)}`),this.validator=di(r,this),this}})}function Mt(t){return t.replace(/^(?!\s*$)/gm,"  ")}const ha=()=>$e("any",{}),fa=()=>$e("function",{type:Function}),nr=()=>$e("boolean",{type:Boolean}),pa=()=>$e("string",{type:String}),ma=()=>$e("number",{type:Number}),ga=()=>$e("array",{type:Array}),ba=()=>$e("object",{type:Object}),ya=()=>ne("integer",{type:Number,validator(t){const e=da(t);return e===!1&&D(`integer - "${t}" is not an integer`),e}}),va=()=>ne("symbol",{validator(t){const e=typeof t=="symbol";return e===!1&&D(`symbol - invalid value "${t}"`),e}}),xa=()=>Object.defineProperty({type:null,validator(t){const e=t===null;return e===!1&&D("nullable - value should be null"),e}},"_vueTypes_name",{value:"nullable"});function $a(t,e="custom validation failed"){if(typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return ne(t.name||"<<anonymous function>>",{type:null,validator(n){const r=t(n);return r||D(`${this._vueTypes_name} - ${e}`),r}})}function wa(t){if(!Qe(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");const e=`oneOf - value should be one of "${t.map(r=>typeof r=="symbol"?r.toString():r).join('", "')}".`,n={validator(r){const i=t.indexOf(r)!==-1;return i||D(e),i}};if(t.indexOf(null)===-1){const r=t.reduce((i,s)=>{if(s!=null){const o=s.constructor;i.indexOf(o)===-1&&i.push(o)}return i},[]);r.length>0&&(n.type=r)}return ne("oneOf",n)}function ka(t){if(!Qe(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");let e=!1,n=!1,r=[];for(let s=0;s<t.length;s+=1){const o=t[s];if(ui(o)){if(et(o.validator)&&(e=!0),nn(o,"oneOf")&&o.type){r=r.concat(o.type);continue}if(nn(o,"nullable")){n=!0;continue}if(o.type===!0||!o.type){D('oneOfType - invalid usage of "true" and "null" as types.');continue}r=r.concat(o.type)}else r.push(o)}r=r.filter((s,o)=>r.indexOf(s)===o);const i=n===!1&&r.length>0?r:null;return e?ne("oneOfType",{type:i,validator(s){const o=[],a=t.some(l=>{const c=Ae(l,s,!0);return typeof c=="string"&&o.push(c),c===!0});return a||D(`oneOfType - provided value does not match any of the ${o.length} passed-in validators:
${Mt(o.join(`
`))}`),a}}):ne("oneOfType",{type:i})}function Sa(t){return ne("arrayOf",{type:Array,validator(e){let n="";const r=e.every(i=>(n=Ae(t,i,!0),n===!0));return r||D(`arrayOf - value validation error:
${Mt(n)}`),r}})}function Na(t){return ne("instanceOf",{type:t})}function Ia(t){return ne("objectOf",{type:Object,validator(e){let n="";if(!ve(e))return!1;const r=Object.keys(e).every(i=>(n=Ae(t,e[i],!0),n===!0));return r||D(`objectOf - value validation error:
${Mt(n)}`),r}})}function Sn(t){const e=Object.keys(t),n=e.filter(i=>!!t[i]?.required),r=ne("shape",{type:Object,validator(i){if(!ve(i))return!1;const s=Object.keys(i);if(n.length>0&&n.some(o=>s.indexOf(o)===-1)){const o=n.filter(a=>s.indexOf(a)===-1);return o.length===1?D(`shape - required property "${o[0]}" is not defined.`):D(`shape - required properties "${o.join('", "')}" are not defined.`),!1}return s.every(o=>{if(e.indexOf(o)===-1)return this._vueTypes_isLoose===!0?!0:(D(`shape - shape definition does not include a "${o}" property. Allowed keys: "${e.join('", "')}".`),!1);const a=t[o],l=Ae(a,i[o],!0);return typeof l=="string"&&D(`shape - "${o}" property validation error:
 ${Mt(l)}`),l===!0})}});return Object.defineProperty(r,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(r,"loose",{get(){return this._vueTypes_isLoose=!0,this}}),r}var Fa=Object.defineProperty,Aa=(t,e,n)=>e in t?Fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q=(t,e,n)=>(Aa(t,typeof e!="symbol"?e+"":e,n),n);const Oa=(()=>{var t;return t=class{static get any(){return ha()}static get func(){return fa().def(this.defaults.func)}static get bool(){return this.defaults.bool===void 0?nr():nr().def(this.defaults.bool)}static get string(){return pa().def(this.defaults.string)}static get number(){return ma().def(this.defaults.number)}static get array(){return ga().def(this.defaults.array)}static get object(){return ba().def(this.defaults.object)}static get integer(){return ya().def(this.defaults.integer)}static get symbol(){return va()}static get nullable(){return xa()}static extend(...e){D("VueTypes.extend has been removed. Use the ES6+ method instead. See https://dwightjack.github.io/vue-types/advanced/extending-vue-types.html#extending-namespaced-validators-in-es6 for details.")}},Q(t,"defaults",{}),Q(t,"sensibleDefaults"),Q(t,"config",oa),Q(t,"custom",$a),Q(t,"oneOf",wa),Q(t,"instanceOf",Na),Q(t,"oneOfType",ka),Q(t,"arrayOf",Sa),Q(t,"objectOf",Ia),Q(t,"shape",Sn),Q(t,"utils",{validate(e,n){return Ae(n,e,!0)===!0},toType(e,n,r=!1){return r?$e(e,n):ne(e,n)}}),t})();function Ca(t=aa()){var e;return e=class extends Oa{static get sensibleDefaults(){return{...this.defaults}}static set sensibleDefaults(n){if(n===!1){this.defaults={};return}if(n===!0){this.defaults={...t};return}this.defaults={...n}}},Q(e,"defaults",{...t}),e}class Pf extends Ca(){}_({name:"CWidgetStatsB",props:{color:ye,inverse:Boolean,progress:Sn({color:ye,value:{type:Number,default:0}}),text:String,title:String,value:{type:[Number,String],default:0}},setup(t,{slots:e}){return()=>x(ri,{class:[{"text-white":t.inverse}],color:t.color},()=>x(ii,{class:"card-body"},()=>[(t.value||e.value)&&x("div",{class:"fs-4 fw-semibold"},{default:()=>e.value&&e.value()||t.value}),(t.title||e.title)&&x("div",{},{default:()=>e.title&&e.title()||t.title}),x(oi,{class:"my-2",...t.progress&&t.progress.color&&{color:t.progress.color},height:4,...t.progress&&t.progress.value&&{value:t.progress.value},white:t.inverse}),(t.text||e.text)&&x("small",{class:[t.inverse?"text-white text-opacity-75":"text-body-secondary"]},{default:()=>e.text&&e.text()||t.text})]))}});_({name:"CWidgetStatsC",props:{color:ye,inverse:Boolean,progress:Sn({color:ye,value:{type:Number,default:0}}),title:String,value:{type:[Number,String],default:0}},setup(t,{slots:e}){return()=>x(ri,{class:[{"text-white":t.inverse}],color:t.color},()=>x(ii,{class:"card-body"},()=>[e.icon&&x("div",{class:["text-end mb-4",t.inverse?"text-white text-opacity-75":"text-body-secondary"]},e.icon&&e.icon()),(t.value||e.value)&&x("div",{class:"fs-4 fw-semibold"},{default:()=>e.value&&e.value()||t.value}),(t.title||e.title)&&x("div",{class:["text-uppercase fw-semibold small",t.inverse?"text-white text-opacity-75":"text-body-secondary"]},{default:()=>e.title&&e.title()||t.title}),x(oi,{class:"my-2",...t.progress&&t.progress.color&&{color:t.progress.color},height:4,...t.progress&&t.progress.value&&{value:t.progress.value},white:t.inverse})]))}});const rt=t=>Array.isArray(t)?t:[t],Ma=(t,e)=>{const n=[[],[]];for(const r of t)e(r)?n[0].push(r):n[1].push(r);return n},hi=Array,Se=(t,e)=>t.includes(e),Ba=(t,e=0)=>[...new Array(t)].map((n,r)=>r+e),F=(t,e,n)=>t===void 0?e===void 0?[]:Array.isArray(e)?e:[e]:(Array.isArray(e)?t.push(...e):t.push(e),t),Ne=(t,e)=>e==null?t??[]:t==null?rt(e):t.concat(e),Da=(...t)=>t.reduce(Ne,[]),Ie=(t,e,n)=>{if(t===void 0)return Array.isArray(e)?e:[e];const r=n?.isEqual??((i,s)=>i===s);for(const i of rt(e))t.some(s=>r(s,i))||t.push(i);return t},qa=(t,e)=>t.reduce((n,r)=>{const i=r[e];return n[i]=F(n[i],r),n},{}),Ke=(t,e,n)=>t.length===e.length&&t.every(n?.isEqual?(r,i)=>n.isEqual(r,e[i]):(r,i)=>r===e[i]),Oe=(t,e)=>re(t)===e,re=t=>{const e=typeof t;return e==="object"?t===null?"null":"object":e==="function"?"object":e},le={boolean:"boolean",null:"null",undefined:"undefined",bigint:"a bigint",number:"a number",object:"an object",string:"a string",symbol:"a symbol"},Ra={...le,function:"a function"};class Ka extends Error{}const R=t=>_e(t,Ka),_e=(t,e=Error)=>{throw new e(t)};class _a extends Error{name="ParseError"}const d=t=>_e(t,_a),fi=t=>` ${t}`,A=(t,e)=>{const n={},r=Array.isArray(t);let i=!1;for(const[s,o]of Object.entries(t).entries()){const a=r?e(s,o[1]):e(...o,s);i||=typeof a[0]=="number";const l=Array.isArray(a[0])||a.length===0?a:[a];for(const[c,u]of l)typeof c=="object"?n[c.group]=F(n[c.group],u):n[c]=u}return i?Object.values(n):n},pi=Object.entries,se=(t,e)=>t in e,Nn=(t,e)=>e in t;class Ta{constructor(e){Object.assign(this,e)}}const Ea=class{};class mi extends Ea{}const Pa=(t,e)=>{const n={},r={};let i;for(i in t)i in e?n[i]=t[i]:r[i]=t[i];return[n,r]},ja=(t,e)=>Pa(t,e)[1],it=t=>Object.keys(t).length===0,$t=t=>[...Object.entries(t),...Object.getOwnPropertySymbols(t).map(e=>[e,t[e]])],za=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),La=t=>{const e=Object.keys(t).sort(),n={};for(let r=0;r<e.length;r++)n[e[r]]=t[e[r]];return n},ae=fi("represents an uninitialized value"),Ua=t=>Object.values(t).filter(e=>typeof e=="number"?!0:typeof t[e]!="number"),gi={Array,Boolean,Date,Error,Function,Map,Number,Promise,RegExp,Set,String,WeakMap,WeakSet},bi=globalThis.File??Blob,yi={ArrayBuffer,Blob,File:bi,FormData,Headers,Request,Response,URL},Va={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array},Te={...gi,...yi,...Va,String,Number,Boolean},In=t=>{let e=Object.getPrototypeOf(t);for(;e?.constructor&&(!se(e.constructor.name,Te)||!(t instanceof Te[e.constructor.name]));)e=Object.getPrototypeOf(e);const n=e?.constructor?.name;if(!(n===void 0||n==="Object"))return n},rn=t=>typeof t=="object"&&t!==null?In(t)??"object":re(t),U=Array.isArray,Ja={Array:"an array",Function:"a function",Date:"a Date",RegExp:"a RegExp",Error:"an Error",Map:"a Map",Set:"a Set",String:"a String object",Number:"a Number object",Boolean:"a Boolean object",Promise:"a Promise",WeakMap:"a WeakMap",WeakSet:"a WeakSet"},Ha={ArrayBuffer:"an ArrayBuffer instance",Blob:"a Blob instance",File:"a File instance",FormData:"a FormData instance",Headers:"a Headers instance",Request:"a Request instance",Response:"a Response instance",URL:"a URL instance"},Ga={Int8Array:"an Int8Array",Uint8Array:"a Uint8Array",Uint8ClampedArray:"a Uint8ClampedArray",Int16Array:"an Int16Array",Uint16Array:"a Uint16Array",Int32Array:"an Int32Array",Uint32Array:"a Uint32Array",Float32Array:"a Float32Array",Float64Array:"a Float64Array",BigInt64Array:"a BigInt64Array",BigUint64Array:"a BigUint64Array"},Wa={...Ja,...Ha,...Ga},Fn=t=>{const e=Object(t).name??null;return e&&se(e,Te)&&Te[e]===t?e:null},rr=(t,e)=>{let n=t.prototype;for(;n!==null;){if(n===e.prototype)return!0;n=Object.getPrototypeOf(n)}return!1},Za=t=>vi(t,new Map),vi=(t,e)=>{if(typeof t!="object"||t===null)return t;if(e?.has(t))return e.get(t);const n=Fn(t.constructor);if(n==="Date")return new Date(t.getTime());if(n&&n!=="Array")return t;const r=Array.isArray(t)?t.slice():Object.create(Object.getPrototypeOf(t)),i=Object.getOwnPropertyDescriptors(t);if(e){e.set(t,r);for(const s in i){const o=i[s];"get"in o||"set"in o||(o.value=vi(o.value,e))}}return Object.defineProperties(r,i),r},Ya=t=>{let e=ae;return()=>e===ae?e=t():e},Bt=t=>typeof t=="function"&&t.length===0,Xa=class extends Function{constructor(...t){const e=t.slice(0,-1),n=t.at(-1);try{super(...e,n)}catch(r){return R(`Encountered an unexpected error while compiling your definition:
                Message: ${r} 
                Source: (${t.slice(0,-1)}) => {
                    ${t.at(-1)}
                }`)}}};class ze{constructor(e,...[n]){return Object.assign(Object.setPrototypeOf(e.bind(n?.bind??this),this.constructor.prototype),n?.attach)}}const Qa=Ya(()=>{try{return new Function("return false")()}catch{return!0}});class oe{constructor(){}}var el={};const tl=()=>{try{return((new Error().stack?.split(`
`)[2]?.trim()||"").match(/\(?(.+?)(?::\d+:\d+)?\)?$/)?.[1]||"unknown").replace(/^file:\/\//,"")}catch{return"unknown"}},nl=el??{},rl={fileName:tl,env:nl},il=t=>t[0].toUpperCase()+t.slice(1),xi=t=>new RegExp(sl(t),typeof t=="string"?"":t.flags),sl=t=>`^(?:${typeof t=="string"?t:t.source})$`,ge={negativeLookahead:t=>`(?!${t})`,nonCapturingGroup:t=>`(?:${t})`},sn="\\",Dt={" ":1,"\n":1,"	":1},ol=/^-0\.?0*$/.source,$i=/[1-9]\d*/.source,al=/\.\d+/.source,ll=/\.\d*[1-9]/.source,wi=t=>xi(ge.negativeLookahead(ol)+ge.nonCapturingGroup("-?"+ge.nonCapturingGroup(ge.nonCapturingGroup("0|"+$i)+ge.nonCapturingGroup(t.decimalPattern)+"?")+(t.allowDecimalOnly?"|"+t.decimalPattern:"")+"?")),ir=wi({decimalPattern:ll,allowDecimalOnly:!1}),cl=ir.test.bind(ir),on=wi({decimalPattern:al,allowDecimalOnly:!0});on.test.bind(on);const ul=/^-?\d*\.?\d*$/,dl=t=>t.length!==0&&ul.test(t),wt=xi(ge.negativeLookahead("^-0$")+"-?"+ge.nonCapturingGroup(ge.nonCapturingGroup("0|"+$i))),hl=wt.test.bind(wt),an=/^-?\d+$/,fl=an.test.bind(an),ki={number:"a number",bigint:"a bigint",integer:"an integer"},Si=(t,e)=>`'${t}' was parsed as ${ki[e]} but could not be narrowed to a literal value. Avoid unnecessary leading or trailing zeros and other abnormal notation`,pl=(t,e)=>e==="number"?cl(t):hl(t),ml=(t,e)=>e==="number"?Number(t):Number.parseInt(t),gl=(t,e)=>e==="number"?dl(t):fl(t),bl=(t,e)=>An(t,"number",e),yl=(t,e)=>An(t,"number",{...e,strict:!0}),vl=(t,e)=>An(t,"integer",e),An=(t,e,n)=>{const r=ml(t,e);return!Number.isNaN(r)&&gl(t,e)?n?.strict?pl(t,e)?r:d(Si(t,e)):r:n?.errorOnFail?d(n?.errorOnFail===!0?`Failed to parse ${ki[e]} from '${t}'`:n?.errorOnFail):void 0},xl=t=>{if(t[t.length-1]!=="n")return;const e=t.slice(0,-1);let n;try{n=BigInt(e)}catch{return}if(wt.test(e))return n;if(an.test(e))return d(Si(t,"bigint"))},$l="0.46.0",wl={version:$l,filename:rl.fileName(),FileConstructor:bi},st=wl,sr=new Map,Gt=Object.create(null),ln=t=>{const e=sr.get(t);if(e)return e;let n=kl(t);return Gt[n]?n=`${n}${Gt[n]++}`:Gt[n]=1,st[n]=t,sr.set(t,n),n},tt=t=>/^[$A-Z_a-z][\w$]*$/.test(t),kl=t=>{switch(typeof t){case"object":{if(t===null)break;const e=In(t)??"object";return e[0].toLowerCase()+e.slice(1)}case"function":return tt(t.name)?t.name:"fn";case"symbol":return t.description&&tt(t.description)?t.description:"symbol"}return R(`Unexpected attempt to register serializable value of type ${re(t)}`)},On=t=>typeof t=="string"?JSON.stringify(t):typeof t=="bigint"?`${t}n`:`${t}`,Sl=(t,e={})=>Ye(t,{onUndefined:"$ark.undefined",onBigInt:n=>`$ark.bigint-${n}`,...e},[]),I=(t,e)=>{switch(re(t)){case"object":const n=t,r=n.constructor.name;return r==="Object"||r==="Array"?e?.quoteKeys===!1?kt(n,e?.indent??0,""):JSON.stringify(Ye(n,Ee,[]),null,e?.indent):kt(n,e?.indent??0,"");case"symbol":return Ee.onSymbol(t);default:return On(t)}},kt=(t,e,n)=>{if(typeof t=="function")return Ee.onFunction(t);if(typeof t!="object"||t===null)return On(t);const r=n+" ".repeat(e);if(Array.isArray(t)){if(t.length===0)return"[]";const s=t.map(o=>kt(o,e,r)).join(`,
`+r);return e?`[
${r}${s}
${n}]`:`[${s}]`}const i=t.constructor.name;if(i==="Object"){const s=$t(t).map(([o,a])=>{const l=typeof o=="symbol"?Ee.onSymbol(o):tt(o)?o:JSON.stringify(o),c=kt(a,e,r);return`${r}${l}: ${c}`});return s.length===0?"{}":e?`{
${s.join(`,
`)}
${n}}`:`{${s.join(", ")}}`}return t instanceof Date?ot(t):"expression"in t&&typeof t.expression=="string"?t.expression:i},Ee={onCycle:()=>"(cycle)",onSymbol:t=>`Symbol(${ln(t)})`,onFunction:t=>`Function(${ln(t)})`},Ye=(t,e,n)=>{switch(re(t)){case"object":{const r=t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();if(typeof r=="function")return Ee.onFunction(r);if(n.includes(r))return"(cycle)";const i=[...n,r];if(Array.isArray(r))return r.map(o=>Ye(o,e,i));if(r instanceof Date)return r.toDateString();const s={};for(const o in r)s[o]=Ye(r[o],e,i);for(const o of Object.getOwnPropertySymbols(r))s[e.onSymbol?.(o)??o.toString()]=Ye(r[o],e,i);return s}case"symbol":return Ee.onSymbol(t);case"bigint":return e.onBigInt?.(t)??`${t}n`;case"undefined":return e.onUndefined??"undefined";case"string":return t.replaceAll("\\","\\\\");default:return t}},ot=t=>{const e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=t.getHours(),s=t.getMinutes(),o=t.getSeconds(),a=t.getMilliseconds();if(n===0&&r===1&&i===0&&s===0&&o===0&&a===0)return`${e}`;const l=`${Nl[n]} ${r}, ${e}`;if(i===0&&s===0&&o===0&&a===0)return l;let c=t.toLocaleTimeString();const u=c.endsWith(" AM")||c.endsWith(" PM")?c.slice(-3):"";return u&&(c=c.slice(0,-u.length)),a?c+=`.${Fl(a,3)}`:Il.test(c)&&(c=c.slice(0,-3)),`${c+u}, ${l}`},Nl=["January","February","March","April","May","June","July","August","September","October","November","December"],Il=/:\d\d:00$/,Fl=(t,e)=>String(t).padStart(e,"0"),Ni=(t,e,...[n])=>{const r=n?.stringifySymbol??I;let i=t;switch(typeof e){case"string":i=tt(e)?t===""?e:`${t}.${e}`:`${t}[${JSON.stringify(e)}]`;break;case"number":i=`${t}[${e}]`;break;case"symbol":i=`${t}[${r(e)}]`;break;default:n?.stringifyNonKey?i=`${t}[${n.stringifyNonKey(e)}]`:d(`${I(e)} must be a PropertyKey or stringifyNonKey must be passed to options`)}return i},at=(t,...e)=>t.reduce((n,r)=>Ni(n,r,...e),"");class Ii extends hi{cache={};constructor(...e){super(),this.push(...e)}toJSON(){if(this.cache.json)return this.cache.json;this.cache.json=[];for(let e=0;e<this.length;e++)this.cache.json.push(typeof this[e]=="symbol"?I(this[e]):this[e]);return this.cache.json}stringify(){return this.cache.stringify?this.cache.stringify:this.cache.stringify=at(this)}stringifyAncestors(){if(this.cache.stringifyAncestors)return this.cache.stringifyAncestors;let e="";const n=[e];for(const r of this)e=Ni(e,r),n.push(e);return this.cache.stringifyAncestors=n}}class Al{chars;i;def;constructor(e){this.def=e,this.chars=[...e],this.i=0}shift(){return this.chars[this.i++]??""}get lookahead(){return this.chars[this.i]??""}get nextLookahead(){return this.chars[this.i+1]??""}get length(){return this.chars.length}shiftUntil(e){let n="";for(;this.lookahead;){if(e(this,n))if(n[n.length-1]===sn)n=n.slice(0,-1);else break;n+=this.shift()}return n}shiftUntilLookahead(e){return typeof e=="string"?this.shiftUntil(n=>n.lookahead===e):this.shiftUntil(n=>n.lookahead in e)}shiftUntilNonWhitespace(){return this.shiftUntil(()=>!(this.lookahead in Dt))}jumpToIndex(e){this.i=e<0?this.length+e:e}jumpForward(e){this.i+=e}get location(){return this.i}get unscanned(){return this.chars.slice(this.i,this.length).join("")}get scanned(){return this.chars.slice(0,this.i).join("")}sliceChars(e,n){return this.chars.slice(e,n).join("")}lookaheadIs(e){return this.lookahead===e}lookaheadIsIn(e){return this.lookahead in e}}let cn="$ark",Ol=2;for(;cn in globalThis;)cn=`$ark${Ol++}`;const Fi=cn;globalThis[Fi]=st;const f=st,Cl=t=>`${Fi}.${t}`,H=t=>Cl(ln(t));class Ai extends mi{argNames;body="";constructor(...e){super(),this.argNames=e;for(const n of e){if(n in this)throw new Error(`Arg name '${n}' would overwrite an existing property on FunctionBody`);this[n]=n}}indentation=0;indent(){return this.indentation+=4,this}dedent(){return this.indentation-=4,this}prop(e,n=!1){return Oi(e,n)}index(e,n=!1){return Ci(`${e}`,n)}line(e){return this.body+=`${" ".repeat(this.indentation)}${e}
`,this}const(e,n){return this.line(`const ${e} = ${n}`),this}let(e,n){return this.line(`let ${e} = ${n}`)}set(e,n){return this.line(`${e} = ${n}`)}if(e,n){return this.block(`if (${e})`,n)}elseIf(e,n){return this.block(`else if (${e})`,n)}else(e){return this.block("else",e)}for(e,n,r=0){return this.block(`for (let i = ${r}; ${e}; i++)`,n)}forIn(e,n){return this.block(`for (const k in ${e})`,n)}block(e,n,r=""){return this.line(`${e} {`),this.indent(),n(this),this.dedent(),this.line(`}${r}`)}return(e=""){return this.line(`return ${e}`)}write(e="anonymous",n=0){return`${e}(${this.argNames.join(", ")}) { ${n?this.body.split(`
`).map(r=>" ".repeat(n)+`${r}`).join(`
`):this.body} }`}compile(){return new Xa(...this.argNames,this.body)}}const lt=t=>Oe(t,"object")||typeof t=="symbol"?H(t):On(t),Oi=(t,e=!1)=>typeof t=="string"&&tt(t)?`${e?"?":""}.${t}`:Ci(Ml(t),e),Ml=t=>typeof t=="symbol"?H(t):JSON.stringify(t),Ci=(t,e=!1)=>`${e?"?.":""}[${t}]`;class Wt extends Ai{traversalKind;optimistic;constructor(e){super("data","ctx"),this.traversalKind=e.kind,this.optimistic=e.optimistic===!0}invoke(e,n){const r=n?.arg??this.data,i=typeof e=="string"?!0:this.requiresContextFor(e),s=typeof e=="string"?e:e.id;return i?`${this.referenceToId(s,n)}(${r}, ${this.ctx})`:`${this.referenceToId(s,n)}(${r})`}referenceToId(e,n){const r=n?.kind??this.traversalKind,i=`this.${e}${r}`;return n?.bind?`${i}.bind(${n?.bind})`:i}requiresContextFor(e){return this.traversalKind==="Apply"||e.allowsRequiresContext}initializeErrorCount(){return this.const("errorCount","ctx.currentErrorCount")}returnIfFail(){return this.if("ctx.currentErrorCount > errorCount",()=>this.return())}returnIfFailFast(){return this.if("ctx.failFast && ctx.currentErrorCount > errorCount",()=>this.return())}traverseKey(e,n,r){const i=this.requiresContextFor(r);return i&&this.line(`${this.ctx}.path.push(${e})`),this.check(r,{arg:n}),i&&this.line(`${this.ctx}.path.pop()`),this}check(e,n){return this.traversalKind==="Allows"?this.if(`!${this.invoke(e,n)}`,()=>this.return(!1)):this.line(this.invoke(e,n))}}const Mi=t=>A(t,(e,n)=>[e,U(n)?[...n]:n]),ce=fi("arkKind"),b=(t,e)=>t?.[ce]===e,J=t=>b(t,"root")||b(t,"constraint"),Bl=["unit","proto","domain"],qt=["required","optional","index","sequence"],Bi=["pattern","divisor","exactLength","max","min","maxLength","minLength","before","after"],Cn=[...Bi,...qt,"structure","predicate"],Rt=["alias","union","morph","unit","intersection","proto","domain"],Dl=[...Rt,...Cn],Di=A(Cn,(t,e)=>[e,1]),ql=A([...qt,"undeclared"],(t,e)=>[e,1]),qi=A(Dl,(t,e)=>[e,t]),vt=t=>typeof t=="string"&&t in qi,St=t=>qi[t],Mn=t=>Rt.slice(St(t)+1);[...Mn("union")];[...Mn("morph")];const Fe=t=>typeof t=="string"||typeof t=="boolean"||t===null?t:typeof t=="number"?Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t:lt(t),Kt=t=>{let e="{ ";for(const[n,r]of Object.entries(t))e+=`${n}: ${lt(r)}, `;return e+" }"},B=t=>{const e=t;return e.hasAssociatedError&&(e.defaults.expected??=n=>"description"in n?n.description:e.defaults.description(n),e.defaults.actual??=n=>I(n),e.defaults.problem??=n=>`must be ${n.expected}${n.actual?` (was ${n.actual})`:""}`,e.defaults.message??=n=>{if(n.path.length===0)return n.problem;const r=`${n.propString} ${n.problem}`;return r[0]==="["?`value at ${r}`:r}),e};class Rl extends Error{name="ToJsonSchemaError";code;context;constructor(e,n){super(I(n,{quoteKeys:!1,indent:4})),this.code=e,this.context=n}hasCode(e){return this.code===e}}const Kl={dialect:"https://json-schema.org/draft/2020-12/schema",useRefs:!1,fallback:{arrayObject:t=>K.throw("arrayObject",t),arrayPostfix:t=>K.throw("arrayPostfix",t),defaultValue:t=>K.throw("defaultValue",t),domain:t=>K.throw("domain",t),morph:t=>K.throw("morph",t),patternIntersection:t=>K.throw("patternIntersection",t),predicate:t=>K.throw("predicate",t),proto:t=>K.throw("proto",t),symbolKey:t=>K.throw("symbolKey",t),unit:t=>K.throw("unit",t),date:t=>K.throw("date",t)}},K={Error:Rl,throw:(...t)=>{throw new K.Error(...t)},throwInternalOperandError:(t,e)=>R(`Unexpected JSON Schema input for ${t}: ${I(e)}`),defaultConfig:Kl};f.config??={};const un=(t,e)=>{if(!e)return t;const n={...t};let r;for(r in e){const i={...t.keywords};if(r==="keywords"){for(const s in e[r]){const o=e.keywords[s];o!==void 0&&(i[s]=typeof o=="string"?{description:o}:o)}n.keywords=i}else r==="toJsonSchema"?n[r]=Ri(t.toJsonSchema,e.toJsonSchema):vt(r)?n[r]={...t[r],...e[r]}:n[r]=e[r]}return n},Ri=(t,e)=>{if(!t)return e??{};if(!e)return t;const n={...t};let r;for(r in e)r==="fallback"?n.fallback=_l(t.fallback,e.fallback):n[r]=e[r];return n},_l=(t,e)=>{t=or(t),e=or(e);const n={};let r;for(r in K.defaultConfig.fallback)n[r]=e[r]??e.default??t[r]??t.default??K.defaultConfig.fallback[r];return n},or=t=>typeof t=="function"?{default:t}:t??{};class Pe extends mi{[ce]="error";path;data;nodeConfig;input;ctx;constructor({prefixPath:e,relativePath:n,...r},i){super(),this.input=r,this.ctx=i,za(this,r);const s=i.data;r.code==="union"&&(r.errors=r.errors.flatMap(a=>{const l=a.hasCode("union")?a.errors:[a];return!e&&!n?l:l.map(c=>c.transform(u=>({...u,path:Da(e,u.path,n)})))})),this.nodeConfig=i.config[this.code];const o=[...r.path??i.path];n&&o.push(...n),e&&o.unshift(...e),this.path=new Ii(...o),this.data="data"in r?r.data:s}transform(e){return new Pe(e({data:this.data,path:this.path,...this.input}),this.ctx)}hasCode(e){return this.code===e}get propString(){return at(this.path)}get expected(){if(this.input.expected)return this.input.expected;const e=this.meta?.expected??this.nodeConfig.expected;return typeof e=="function"?e(this.input):e}get actual(){if(this.input.actual)return this.input.actual;const e=this.meta?.actual??this.nodeConfig.actual;return typeof e=="function"?e(this.data):e}get problem(){if(this.input.problem)return this.input.problem;const e=this.meta?.problem??this.nodeConfig.problem;return typeof e=="function"?e(this):e}get message(){if(this.input.message)return this.input.message;const e=this.meta?.message??this.nodeConfig.message;return typeof e=="function"?e(this):e}get flat(){return this.hasCode("intersection")?[...this.errors]:[this]}toJSON(){return{data:this.data,path:this.path,...this.input,expected:this.expected,actual:this.actual,problem:this.problem,message:this.message}}toString(){return this.message}throw(){throw this}}class xe extends hi{[ce]="errors";ctx;constructor(e){super(),this.ctx=e}byPath=Object.create(null);get flatByPath(){return A(this.byPath,(e,n)=>[e,n.flat])}get flatProblemsByPath(){return A(this.byPath,(e,n)=>[e,n.flat.map(r=>r.problem)])}byAncestorPath=Object.create(null);count=0;mutable=this;throw(){throw this.toTraversalError()}toTraversalError(){return new Tl(this)}add(e){this.includes(e)||this._add(e)}transform(e){const n=new xe(this.ctx);for(const r of this)n.add(e(r));return n}merge(e){for(const n of e)this.includes(n)||this._add(new Pe({...n,path:[...this.ctx.path,...n.path]},this.ctx))}affectsPath(e){return this.length===0?!1:e.stringifyAncestors().some(n=>n in this.byPath)||e.stringify()in this.byAncestorPath}get summary(){return this.toString()}get issues(){return this}toJSON(){return[...this.map(e=>e.toJSON())]}toString(){return this.join(`
`)}_add(e){const n=this.byPath[e.propString];if(n){if(n.hasCode("union")&&n.errors.length===0)return;const r=e.hasCode("union")&&e.errors.length===0?e:new Pe({code:"intersection",errors:n.hasCode("intersection")?[...n.errors,e]:[n,e]},this.ctx),i=this.indexOf(n);this.mutable[i===-1?this.length:i]=r,this.byPath[e.propString]=r,this.addAncestorPaths(e)}else this.byPath[e.propString]=e,this.addAncestorPaths(e),this.mutable.push(e);this.count++}addAncestorPaths(e){for(const n of e.path.stringifyAncestors())this.byAncestorPath[n]=F(this.byAncestorPath[n],e)}}class Tl extends Error{name="TraversalError";constructor(e){e.length===1?super(e.summary):super(`
`+e.map(n=>`  • ${El(n)}`).join(`
`)),Object.defineProperty(this,"arkErrors",{value:e,enumerable:!1})}}const El=t=>t.toString().split(`
`).join(`
  `);class De{path=[];errors=new xe(this);root;config;queuedMorphs=[];branches=[];seen={};constructor(e,n){this.root=e,this.config=n}get data(){let e=this.root;for(const n of this.path)e=e?.[n];return e}get propString(){return at(this.path)}reject(e){return this.error(e),!1}mustBe(e){return this.error(e),!1}error(e){const n=typeof e=="object"?e.code?e:{...e,code:"predicate"}:{code:"predicate",expected:e};return this.errorFromContext(n)}hasError(){return this.currentErrorCount!==0}get currentBranch(){return this.branches.at(-1)}queueMorphs(e){const n={path:new Ii(...this.path),morphs:e};this.currentBranch?this.currentBranch.queuedMorphs.push(n):this.queuedMorphs.push(n)}finalize(e){return this.queuedMorphs.length&&(typeof this.root=="object"&&this.root!==null&&this.config.clone&&(this.root=this.config.clone(this.root)),this.applyQueuedMorphs()),this.hasError()?e?e(this.errors):this.errors:this.root}get currentErrorCount(){return this.currentBranch?this.currentBranch.error?1:0:this.errors.count}get failFast(){return this.branches.length!==0}pushBranch(){this.branches.push({error:void 0,queuedMorphs:[]})}popBranch(){return this.branches.pop()}get external(){return this}errorFromNodeContext(e){return this.errorFromContext(e)}errorFromContext(e){const n=new Pe(e,this);return this.currentBranch?this.currentBranch.error=n:this.errors.add(n),n}applyQueuedMorphs(){for(;this.queuedMorphs.length;){const e=this.queuedMorphs;this.queuedMorphs=[];for(const{path:n,morphs:r}of e)this.errors.affectsPath(n)||this.applyMorphsAtPath(n,r)}}applyMorphsAtPath(e,n){const r=e.at(-1);let i;if(r!==void 0){i=this.root;for(let s=0;s<e.length-1;s++)i=i[e[s]]}this.path=[...e];for(const s of n){const o=J(s),a=s(i===void 0?this.root:i[r],this);if(a instanceof Pe){this.errors.add(a);break}if(a instanceof xe){o||this.errors.merge(a);break}i===void 0?this.root=a:i[r]=a,this.applyQueuedMorphs()}}}const ue=(t,e,n)=>{if(!n)return e();n.path.push(t);const r=e();return n.path.pop(),r};class Ki extends ze{attachments;$;onFail;includesTransform;includesContextualPredicate;isCyclic;allowsRequiresContext;rootApplyStrategy;contextFreeMorph;rootApply;referencesById;shallowReferences;flatRefs;flatMorphs;allows;get shallowMorphs(){return[]}constructor(e,n){super((i,s,o=this.onFail)=>s?(this.traverseApply(i,s),s.hasError()?s.errors:s.data):this.rootApply(i,o),{attach:e}),this.attachments=e,this.$=n,this.onFail=this.meta.onFail??this.$.resolvedConfig.onFail,this.includesTransform=this.hasKind("morph")||this.hasKind("structure")&&this.structuralMorph!==void 0,this.includesContextualPredicate=this.hasKind("predicate")&&this.inner.predicate.length!==1,this.isCyclic=this.kind==="alias",this.referencesById={[this.id]:this},this.shallowReferences=this.hasKind("structure")?[this,...this.children]:this.children.reduce((i,s)=>Ll(i,s.shallowReferences),[this]);const r=this.isStructural();this.flatRefs=[],this.flatMorphs=[];for(let i=0;i<this.children.length;i++){if(this.includesTransform||=this.children[i].includesTransform,this.includesContextualPredicate||=this.children[i].includesContextualPredicate,this.isCyclic||=this.children[i].isCyclic,!r){const s=this.children[i].flatRefs;for(let o=0;o<s.length;o++){const a=s[o];if(!this.flatRefs.some(l=>_i(l,a))){this.flatRefs.push(a);for(const l of a.node.branches)(l.hasKind("morph")||l.hasKind("intersection")&&l.structure?.structuralMorph!==void 0)&&this.flatMorphs.push({path:a.path,propString:a.propString,node:l})}}}Object.assign(this.referencesById,this.children[i].referencesById)}this.flatRefs.sort((i,s)=>i.path.length>s.path.length?1:i.path.length<s.path.length?-1:i.propString>s.propString?1:i.propString<s.propString||i.node.expression<s.node.expression?-1:1),this.allowsRequiresContext=this.includesContextualPredicate||this.isCyclic,this.rootApplyStrategy=!this.allowsRequiresContext&&this.flatMorphs.length===0?this.shallowMorphs.length===0?"allows":this.shallowMorphs.every(i=>i.length===1||i.name==="$arkStructuralMorph")?this.hasKind("union")?this.branches.some(i=>i.shallowMorphs.length>1)?"contextual":"branchedOptimistic":this.shallowMorphs.length>1?"contextual":"optimistic":"contextual":"contextual",this.rootApply=this.createRootApply(),this.allows=this.allowsRequiresContext?i=>this.traverseAllows(i,new De(i,this.$.resolvedConfig)):i=>this.traverseAllows(i)}createRootApply(){switch(this.rootApplyStrategy){case"allows":return(n,r)=>{if(this.allows(n))return n;const i=new De(n,this.$.resolvedConfig);return this.traverseApply(n,i),i.finalize(r)};case"contextual":return(n,r)=>{const i=new De(n,this.$.resolvedConfig);return this.traverseApply(n,i),i.finalize(r)};case"optimistic":this.contextFreeMorph=this.shallowMorphs[0];const e=this.$.resolvedConfig.clone;return(n,r)=>{if(this.allows(n))return this.contextFreeMorph(e&&(typeof n=="object"&&n!==null||typeof n=="function")?e(n):n);const i=new De(n,this.$.resolvedConfig);return this.traverseApply(n,i),i.finalize(r)};case"branchedOptimistic":return this.createBranchedOptimisticRootApply();default:return this.rootApplyStrategy,R(`Unexpected rootApplyStrategy ${this.rootApplyStrategy}`)}}compiledMeta=zl(this.metaJson);cacheGetter(e,n){return Object.defineProperty(this,e,{value:n}),n}get description(){return this.cacheGetter("description",this.meta?.description??this.$.resolvedConfig[this.kind].description(this))}get references(){return Object.values(this.referencesById)}precedence=St(this.kind);precompilation;assert=(e,n)=>this(e,n,r=>r.throw());traverse(e,n){return this(e,n,null)}get in(){return this.cacheGetter("in",this.getIo("in"))}get out(){return this.cacheGetter("out",this.getIo("out"))}getIo(e){if(!this.includesTransform)return this;const n={};for(const[r,i]of this.innerEntries){const s=this.impl.keys[r];if(s.reduceIo)s.reduceIo(e,n,i);else if(s.child){const o=i;n[r]=U(o)?o.map(a=>a[e]):o[e]}else n[r]=i}return this.$.node(this.kind,n)}toJSON(){return this.json}toString(){return`Type<${this.expression}>`}equals(e){const n=J(e)?e:this.$.parseDefinition(e);return this.innerHash===n.innerHash}ifEquals(e){return this.equals(e)?this:void 0}hasKind(e){return this.kind===e}assertHasKind(e){return this.kind!==e&&_e(`${this.kind} node was not of asserted kind ${e}`),this}hasKindIn(...e){return e.includes(this.kind)}assertHasKindIn(...e){return Se(e,this.kind)||_e(`${this.kind} node was not one of asserted kinds ${e}`),this}isBasis(){return Se(Bl,this.kind)}isConstraint(){return Se(Cn,this.kind)}isStructural(){return Se(qt,this.kind)}isRefinement(){return Se(Bi,this.kind)}isRoot(){return Se(Rt,this.kind)}isUnknown(){return this.hasKind("intersection")&&this.children.length===0}isNever(){return this.hasKind("union")&&this.children.length===0}hasUnit(e){return this.hasKind("unit")&&this.allows(e)}hasOpenIntersection(){return this.impl.intersectionIsOpen}get nestableExpression(){return this.expression}select(e){const n=Ge.normalize(e);return this._select(n)}_select(e){let n=Ge.applyBoundary[e.boundary??"references"](this);return e.kind&&(n=n.filter(r=>r.kind===e.kind)),e.where&&(n=n.filter(e.where)),Ge.applyMethod[e.method??"filter"](n,this,e)}transform(e,n){return this._transform(e,this._createTransformContext(n))}_createTransformContext(e){return{root:this,selected:void 0,seen:{},path:[],parseOptions:{prereduced:e?.prereduced??!1},undeclaredKeyHandling:void 0,...e}}_transform(e,n){const r=n.bindScope??this.$;if(n.seen[this.id])return this.$.lazilyResolve(n.seen[this.id]);if(n.shouldTransform?.(this,n)===!1)return this;let i;n.seen[this.id]=()=>i,this.hasKind("structure")&&this.undeclared!==n.undeclaredKeyHandling&&(n={...n,undeclaredKeyHandling:this.undeclared});const s=A(this.inner,(u,p)=>{if(!this.impl.keys[u].child)return[u,p];const $=p;if(!U($)){const h=$._transform(e,n);return h?[u,h]:[]}if($.length===0)return[u,p];const w=$.flatMap(h=>h._transform(e,n)??[]);return w.length?[u,w]:[]});delete n.seen[this.id];const o=Object.assign(s,{meta:this.meta}),a=n.selected&&!n.selected.includes(this)?o:e(this.kind,o,n);if(a===null)return null;if(J(a))return i=a;const l=Object.keys(a);return(l.length===0||l.length===1&&l[0]==="meta")&&!it(this.inner)?null:(this.kind==="required"||this.kind==="optional"||this.kind==="index")&&!("value"in a)?n.undeclaredKeyHandling?{...a,value:f.intrinsic.unknown}:null:(this.kind==="morph"&&(a.in??=f.intrinsic.unknown),i=r.node(this.kind,a,n.parseOptions))}configureReferences(e,n="references"){const r=Ge.normalize(n),i=typeof e=="string"?(l,c)=>({...c,meta:{...c.meta,description:e}}):typeof e=="function"?(l,c)=>({...c,meta:e(c.meta)}):(l,c)=>({...c,meta:{...c.meta,...e}});if(r.boundary==="self")return this.$.node(this.kind,i(this.kind,{...this.inner,meta:this.meta}));const s=this._select(r),o=s&&rt(s),a=r.boundary==="child"?(l,c)=>c.root.children.includes(l):r.boundary==="shallow"?l=>l.kind!=="structure":()=>!0;return this.$.finalize(this.transform(i,{shouldTransform:a,selected:o}))}}const Ge={applyBoundary:{self:t=>[t],child:t=>[...t.children],shallow:t=>[...t.shallowReferences],references:t=>[...t.references]},applyMethod:{filter:t=>t,assertFilter:(t,e,n)=>(t.length===0&&_e(ar(e,n)),t),find:t=>t[0],assertFind:(t,e,n)=>(t.length===0&&_e(ar(e,n)),t[0])},normalize:t=>typeof t=="function"?{boundary:"references",method:"filter",where:t}:typeof t=="string"?se(t,Ge.applyBoundary)?{method:"filter",boundary:t}:{boundary:"references",method:"filter",kind:t}:{boundary:"references",method:"filter",...t}},ar=(t,e)=>`${t} had no references matching ${I(e)}.`,Pl=t=>at(t,{stringifyNonKey:e=>e.expression}),jl=/"(\$ark\.[^"]+)"/g,zl=t=>JSON.stringify(t).replaceAll(jl,"$1"),be=(t,e)=>({path:t,node:e,propString:Pl(t)}),_i=(t,e)=>t.propString===e.propString&&t.node.equals(e.node),lr=(t,e)=>Ie(t,e,{isEqual:_i}),Ll=(t,e)=>Ie(t,e,{isEqual:(n,r)=>n.equals(r)});class m extends Array{static init(e,n,r,i){return new m({kind:e,l:n,r,path:i?.path??[],optional:i?.optional??!1})}add(e,n,r,i){return this.push({kind:e,l:n,r,path:i?.path??[],optional:i?.optional??!1}),this}get summary(){return this.describeReasons()}describeReasons(){if(this.length===1){const{path:e,l:n,r}=this[0],i=at(e);return Ti(`Intersection${i&&` at ${i}`} of ${cr(n,r)}`)}return`The following intersections result in unsatisfiable types:
• ${this.map(({path:e,l:n,r})=>`${e}: ${cr(n,r)}`).join(`
• `)}`}throw(){return d(this.describeReasons())}invert(){const e=this.map(n=>({...n,l:n.r,r:n.l}));return e instanceof m?e:new m(...e)}withPrefixKey(e,n){return this.map(r=>({...r,path:[e,...r.path],optional:r.optional||n==="optional"}))}toNeverIfDisjoint(){return f.intrinsic.never}}const cr=(t,e)=>`${dn(t)} and ${dn(e)}`,dn=t=>J(t)?t.expression:U(t)?t.map(dn).join(" | ")||"never":String(t),Ti=t=>`${t} results in an unsatisfiable type`,Me={},de=(t,e,n)=>j(t,e,{$:n,invert:!1,pipe:!1}),hn=(t,e,n)=>j(t,e,{$:n,invert:!1,pipe:!0}),j=(t,e,n)=>{const r=n.pipe?"|>":"&",i=`${t.hash}${r}${e.hash}`;if(Me[i]!==void 0)return Me[i];if(!n.pipe){const a=`${e.hash}${r}${t.hash}`;if(Me[a]!==void 0){const l=Me[a],c=l instanceof m?l.invert():l;return Me[i]=c,c}}const s=!n.pipe||!t.includesTransform&&!e.includesTransform;if(s&&t.equals(e))return t;let o=s?fn(t,e,n):t.hasKindIn(...Rt)?Ul(t,e,n):fn(t,e,n);return J(o)&&(t.equals(o)?o=t:e.equals(o)&&(o=e)),Me[i]=o,o},fn=(t,e,n)=>{const r=t.precedence<e.precedence?t.kind:e.kind,i=t.impl.intersections[e.kind]??e.impl.intersections[t.kind];if(i===void 0)return null;if(r===t.kind)return i(t,e,n);{let s=i(e,t,{...n,invert:!n.invert});return s instanceof m&&(s=s.invert()),s}},Ul=(t,e,n)=>t.includesTransform||e.includesTransform?n.invert?ur(e,t,n):ur(t,e,n):fn(t,e,n),ur=(t,e,n)=>t.distribute(r=>Vl(r,e,n),r=>{const i=r.filter(J);if(i.length===0)return m.init("union",t.branches,e.branches);if(i.length<t.branches.length||!t.branches.every((o,a)=>o.in.equals(i[a].in)))return n.$.parseSchema(i);if(i.length===1)return i[0];const s={branches:i};return n.$.parseSchema(s)}),Vl=(t,e,n)=>{if(t.hasKind("morph")){const i=[...t.morphs];if(t.lastMorphIfNode){const s=j(t.lastMorphIfNode,e,n);if(s instanceof m)return s;i[i.length-1]=s}else i.push(e);return n.$.node("morph",{morphs:i,in:t.inner.in})}if(e.hasKind("morph")){const i=j(t,e.in,n);return i instanceof m?i:n.$.node("morph",{morphs:[e],in:i})}return n.$.node("morph",{morphs:[e],in:t})};class Le extends Ki{constructor(e,n){super(e,n),Object.defineProperty(this,ce,{value:"constraint",enumerable:!1})}impliedSiblings;intersect(e){return de(this,e,this.$)}}class _t extends Le{traverseApply=(e,n)=>{this.traverseAllows(e,n)||n.errorFromNodeContext(this.errorContext)};compile(e){e.traversalKind==="Allows"?e.return(this.compiledCondition):e.if(this.compiledNegation,()=>e.line(`${e.ctx}.errorFromNodeContext(${this.compiledErrorContext})`))}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return Kt(this.errorContext)}}const Y=t=>(e,n)=>{if(U(e)){if(e.length===0)return;const i=e.map(s=>n.$.node(t,s));return t==="predicate"?i:i.sort((s,o)=>s.hash<o.hash?-1:1)}const r=n.$.node(t,e);return r.hasOpenIntersection()?[r]:r},Nt=t=>{const e=t.r.shift();if(!e){let r=t.l.length===0&&t.kind==="structure"?f.intrinsic.unknown.internal:t.ctx.$.node(t.kind,Object.assign(t.baseInner,Jl(t.l)),{prereduced:!0});for(const i of t.roots){if(r instanceof m)return r;r=j(i,r,t.ctx)}return r}let n=!1;for(let r=0;r<t.l.length;r++){const i=j(t.l[r],e,t.ctx);if(i!==null){if(i instanceof m)return i;if(n){if(!t.l.includes(i))return R(`Unexpectedly encountered multiple distinct intersection results for refinement ${i}`)}else{if(i.isRoot())return t.roots.push(i),t.l.splice(r),Nt(t);t.l[r]=i,n=!0}}}if(n||t.l.push(e),t.kind==="intersection"&&e.impliedSiblings)for(const r of e.impliedSiblings)Ie(t.r,r);return Nt(t)},It=t=>Object.entries(t).flatMap(([n,r])=>n in Di?r:[]).sort((n,r)=>n.precedence<r.precedence?-1:n.precedence>r.precedence?1:n.kind==="predicate"&&r.kind==="predicate"?0:n.hash<r.hash?-1:1),Jl=t=>{const e={};for(const n of t)if(n.hasOpenIntersection())e[n.kind]=F(e[n.kind],n);else{if(e[n.kind])return R(`Unexpected intersection of closed refinements of kind ${n.kind}`);e[n.kind]=n}return e},Hl=(...t)=>d(Gl(...t)),Gl=(t,e,n)=>{const r=n.hasKind("morph")?"a morph":n.isUnknown()?"unknown":n.exclude(e).defaultShortDescription;return`${il(t)} operand must be ${e.description} (was ${r})`},Wl=(t,e,n)=>new Ft(t,e,n,n,null);class Ei extends ze{}class Ft extends ze{[ce]="generic";paramDefs;bodyDef;$;arg$;baseInstantiation;hkt;description;constructor(e,n,r,i,s){super((...o)=>{const a=A(this.names,(l,c)=>{const u=this.arg$.parse(o[l]);return u.extends(this.constraints[l])||d(Zl(c,this.constraints[l].expression,u.expression)),[c,u]});if(this.defIsLazy()){const l=this.bodyDef(a);return this.$.parse(l)}return this.$.parse(n,{args:a})}),this.paramDefs=e,this.bodyDef=n,this.$=r,this.arg$=i,this.hkt=s,this.description=s?new s().description??`a generic type for ${s.constructor.name}`:"a generic type",this.baseInstantiation=this(...this.constraints)}defIsLazy(){return this.bodyDef instanceof Ei}cacheGetter(e,n){return Object.defineProperty(this,e,{value:n}),n}get json(){return this.cacheGetter("json",{params:this.params.map(e=>e[1].isUnknown()?e[0]:[e[0],e[1].json]),body:Sl(this.bodyDef)})}get params(){return this.cacheGetter("params",this.paramDefs.map(e=>typeof e=="string"?[e,f.intrinsic.unknown]:[e[0],this.$.parse(e[1])]))}get names(){return this.cacheGetter("names",this.params.map(e=>e[0]))}get constraints(){return this.cacheGetter("constraints",this.params.map(e=>e[1]))}get internal(){return this}get referencesById(){return this.baseInstantiation.internal.referencesById}get references(){return this.baseInstantiation.internal.references}}const Zl=(t,e,n)=>`${t} must be assignable to ${e} (was ${n})`,Yl=B({kind:"predicate",hasAssociatedError:!0,collapsibleKey:"predicate",keys:{predicate:{}},normalize:t=>typeof t=="function"?{predicate:t}:t,defaults:{description:t=>`valid according to ${t.predicate.name||"an anonymous predicate"}`},intersectionIsOpen:!0,intersections:{predicate:()=>null}});class Xl extends Le{serializedPredicate=H(this.predicate);compiledCondition=`${this.serializedPredicate}(data, ctx)`;compiledNegation=`!${this.compiledCondition}`;impliedBasis=null;expression=this.serializedPredicate;traverseAllows=this.predicate;errorContext={code:"predicate",description:this.description,meta:this.meta};compiledErrorContext=Kt(this.errorContext);traverseApply=(e,n)=>{!this.predicate(e,n.external)&&!n.hasError()&&n.errorFromNodeContext(this.errorContext)};compile(e){if(e.traversalKind==="Allows"){e.return(this.compiledCondition);return}e.if(`${this.compiledNegation} && !ctx.hasError()`,()=>e.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}reduceJsonSchema(e,n){return n.fallback.predicate({code:"predicate",base:e,predicate:this.predicate})}}const Pi={implementation:Yl,Node:Xl},Ql=B({kind:"divisor",collapsibleKey:"rule",keys:{rule:{parse:t=>Number.isInteger(t)?t:d(tc(t))}},normalize:t=>typeof t=="number"?{rule:t}:t,hasAssociatedError:!0,defaults:{description:t=>t.rule===1?"an integer":t.rule===2?"even":`a multiple of ${t.rule}`},intersections:{divisor:(t,e,n)=>n.$.node("divisor",{rule:Math.abs(t.rule*e.rule/nc(t.rule,e.rule))})},obviatesBasisDescription:!0});class ec extends _t{traverseAllows=e=>e%this.rule===0;compiledCondition=`data % ${this.rule} === 0`;compiledNegation=`data % ${this.rule} !== 0`;impliedBasis=f.intrinsic.number.internal;expression=`% ${this.rule}`;reduceJsonSchema(e){return e.type="integer",this.rule===1||(e.multipleOf=this.rule),e}}const ji={implementation:Ql,Node:ec},tc=t=>`divisor must be an integer (was ${t})`,nc=(t,e)=>{let n,r=t,i=e;for(;i!==0;)n=i,i=r%i,r=n;return r};class Ue extends _t{boundOperandKind=oc[this.kind];compiledActual=this.boundOperandKind==="value"?"data":this.boundOperandKind==="length"?"data.length":"data.valueOf()";comparator=ac(this.kind,this.exclusive);numericLimit=this.rule.valueOf();expression=`${this.comparator} ${this.rule}`;compiledCondition=`${this.compiledActual} ${this.comparator} ${this.numericLimit}`;compiledNegation=`${this.compiledActual} ${rc[this.comparator]} ${this.numericLimit}`;stringLimit=this.boundOperandKind==="date"?lc(this.numericLimit):`${this.numericLimit}`;limitKind=this.comparator[0]==="<"?"upper":"lower";isStricterThan(e){return(this.limitKind==="upper"?this.numericLimit<e.numericLimit:this.numericLimit>e.numericLimit)||this.numericLimit===e.numericLimit&&this.exclusive===!0&&!e.exclusive}overlapsRange(e){return!(this.isStricterThan(e)||this.numericLimit===e.numericLimit&&(this.exclusive||e.exclusive))}overlapIsUnit(e){return this.numericLimit===e.numericLimit&&!this.exclusive&&!e.exclusive}}const rc={"<":">=","<=":">",">":"<=",">=":"<"},ic={min:"max",minLength:"maxLength",after:"before"},zi={parse:t=>t||void 0},Li=t=>e=>{if(typeof e=="number")return{rule:e};const{exclusive:n,...r}=e;return n?{...r,rule:t==="minLength"?r.rule+1:r.rule-1}:r},Ui=t=>e=>{if(typeof e=="number"||typeof e=="string"||e instanceof Date)return{rule:e};const{exclusive:n,...r}=e;if(!n)return r;const i=typeof r.rule=="number"?r.rule:typeof r.rule=="string"?new Date(r.rule).valueOf():r.rule.valueOf();return n?{...r,rule:t==="after"?i+1:i-1}:r},Vi=t=>typeof t=="string"||typeof t=="number"?new Date(t):t,sc=(t,e)=>`${t} bound must be a positive integer (was ${e})`,Bn=t=>e=>((!Number.isInteger(e)||e<0)&&d(sc(t,e)),e),oc={min:"value",max:"value",minLength:"length",maxLength:"length",after:"date",before:"date"},ac=(t,e)=>`${se(t,ic)?">":"<"}${e?"":"="}`,lc=t=>typeof t=="string"?t:new Date(t).toLocaleString(),cc=t=>`Bounded expression ${t} must be exactly one of number, string, Array, or Date`,uc=B({kind:"after",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Vi,serialize:t=>t.toISOString()}},normalize:Ui("after"),defaults:{description:t=>`${t.collapsibleLimitString} or later`,actual:ot},intersections:{after:(t,e)=>t.isStricterThan(e)?t:e}});class dc extends Ue{impliedBasis=f.intrinsic.Date.internal;collapsibleLimitString=ot(this.rule);traverseAllows=e=>e>=this.rule;reduceJsonSchema(e,n){return n.fallback.date({code:"date",base:e,after:this.rule})}}const Ji={implementation:uc,Node:dc},hc=B({kind:"before",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Vi,serialize:t=>t.toISOString()}},normalize:Ui("before"),defaults:{description:t=>`${t.collapsibleLimitString} or earlier`,actual:ot},intersections:{before:(t,e)=>t.isStricterThan(e)?t:e,after:(t,e,n)=>t.overlapsRange(e)?t.overlapIsUnit(e)?n.$.node("unit",{unit:t.rule}):null:m.init("range",t,e)}});class fc extends Ue{collapsibleLimitString=ot(this.rule);traverseAllows=e=>e<=this.rule;impliedBasis=f.intrinsic.Date.internal;reduceJsonSchema(e,n){return n.fallback.date({code:"date",base:e,before:this.rule})}}const Hi={implementation:hc,Node:fc},pc=B({kind:"exactLength",collapsibleKey:"rule",keys:{rule:{parse:Bn("exactLength")}},normalize:t=>typeof t=="number"?{rule:t}:t,hasAssociatedError:!0,defaults:{description:t=>`exactly length ${t.rule}`,actual:t=>`${t.length}`},intersections:{exactLength:(t,e,n)=>m.init("unit",n.$.node("unit",{unit:t.rule}),n.$.node("unit",{unit:e.rule}),{path:["length"]}),minLength:(t,e)=>t.rule>=e.rule?t:m.init("range",t,e),maxLength:(t,e)=>t.rule<=e.rule?t:m.init("range",t,e)}});class mc extends _t{traverseAllows=e=>e.length===this.rule;compiledCondition=`data.length === ${this.rule}`;compiledNegation=`data.length !== ${this.rule}`;impliedBasis=f.intrinsic.lengthBoundable.internal;expression=`== ${this.rule}`;reduceJsonSchema(e){switch(e.type){case"string":return e.minLength=this.rule,e.maxLength=this.rule,e;case"array":return e.minItems=this.rule,e.maxItems=this.rule,e;default:return K.throwInternalOperandError("exactLength",e)}}}const Gi={implementation:pc,Node:mc},gc=B({kind:"max",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:zi},normalize:t=>typeof t=="number"?{rule:t}:t,defaults:{description:t=>t.rule===0?t.exclusive?"negative":"non-positive":`${t.exclusive?"less than":"at most"} ${t.rule}`},intersections:{max:(t,e)=>t.isStricterThan(e)?t:e,min:(t,e,n)=>t.overlapsRange(e)?t.overlapIsUnit(e)?n.$.node("unit",{unit:t.rule}):null:m.init("range",t,e)},obviatesBasisDescription:!0});class bc extends Ue{impliedBasis=f.intrinsic.number.internal;traverseAllows=this.exclusive?e=>e<this.rule:e=>e<=this.rule;reduceJsonSchema(e){return this.exclusive?e.exclusiveMaximum=this.rule:e.maximum=this.rule,e}}const Wi={implementation:gc,Node:bc},yc=B({kind:"maxLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Bn("maxLength")}},reduce:(t,e)=>t.rule===0?e.node("exactLength",t):void 0,normalize:Li("maxLength"),defaults:{description:t=>`at most length ${t.rule}`,actual:t=>`${t.length}`},intersections:{maxLength:(t,e)=>t.isStricterThan(e)?t:e,minLength:(t,e,n)=>t.overlapsRange(e)?t.overlapIsUnit(e)?n.$.node("exactLength",{rule:t.rule}):null:m.init("range",t,e)}});class vc extends Ue{impliedBasis=f.intrinsic.lengthBoundable.internal;traverseAllows=e=>e.length<=this.rule;reduceJsonSchema(e){switch(e.type){case"string":return e.maxLength=this.rule,e;case"array":return e.maxItems=this.rule,e;default:return K.throwInternalOperandError("maxLength",e)}}}const Zi={implementation:yc,Node:vc},xc=B({kind:"min",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:zi},normalize:t=>typeof t=="number"?{rule:t}:t,defaults:{description:t=>t.rule===0?t.exclusive?"positive":"non-negative":`${t.exclusive?"more than":"at least"} ${t.rule}`},intersections:{min:(t,e)=>t.isStricterThan(e)?t:e},obviatesBasisDescription:!0});class $c extends Ue{impliedBasis=f.intrinsic.number.internal;traverseAllows=this.exclusive?e=>e>this.rule:e=>e>=this.rule;reduceJsonSchema(e){return this.exclusive?e.exclusiveMinimum=this.rule:e.minimum=this.rule,e}}const Yi={implementation:xc,Node:$c},wc=B({kind:"minLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Bn("minLength")}},reduce:t=>t.rule===0?f.intrinsic.unknown:void 0,normalize:Li("minLength"),defaults:{description:t=>t.rule===1?"non-empty":`at least length ${t.rule}`,actual:t=>t.length===0?"":`${t.length}`},intersections:{minLength:(t,e)=>t.isStricterThan(e)?t:e}});class kc extends Ue{impliedBasis=f.intrinsic.lengthBoundable.internal;traverseAllows=e=>e.length>=this.rule;reduceJsonSchema(e){switch(e.type){case"string":return e.minLength=this.rule,e;case"array":return e.minItems=this.rule,e;default:return K.throwInternalOperandError("minLength",e)}}}const Xi={implementation:wc,Node:kc},Sc={min:Yi.implementation,max:Wi.implementation,minLength:Xi.implementation,maxLength:Zi.implementation,exactLength:Gi.implementation,after:Ji.implementation,before:Hi.implementation},Nc={min:Yi.Node,max:Wi.Node,minLength:Xi.Node,maxLength:Zi.Node,exactLength:Gi.Node,after:Ji.Node,before:Hi.Node},Ic=B({kind:"pattern",collapsibleKey:"rule",keys:{rule:{},flags:{}},normalize:t=>typeof t=="string"?{rule:t}:t instanceof RegExp?t.flags?{rule:t.source,flags:t.flags}:{rule:t.source}:t,obviatesBasisDescription:!0,obviatesBasisExpression:!0,hasAssociatedError:!0,intersectionIsOpen:!0,defaults:{description:t=>`matched by ${t.rule}`},intersections:{pattern:()=>null}});class Fc extends _t{instance=new RegExp(this.rule,this.flags);expression=`${this.instance}`;traverseAllows=this.instance.test.bind(this.instance);compiledCondition=`${this.expression}.test(data)`;compiledNegation=`!${this.compiledCondition}`;impliedBasis=f.intrinsic.string.internal;reduceJsonSchema(e,n){return e.pattern?n.fallback.patternIntersection({code:"patternIntersection",base:e,pattern:this.rule}):(e.pattern=this.rule,e)}}const Qi={implementation:Ic,Node:Fc},xt=(t,e)=>{const n=Ac(t);return e&&!e.includes(n)?d(`Root of kind ${n} should be one of ${e}`):n},Ac=t=>{if(b(t,"root"))return t.kind;if(typeof t=="string")return t[0]==="$"?"alias":t in le?"domain":"proto";if(typeof t=="function")return"proto";if(typeof t!="object"||t===null)return d(dr(t));if("morphs"in t)return"morph";if("branches"in t||U(t))return"union";if("unit"in t)return"unit";if("reference"in t)return"alias";const e=Object.keys(t);return e.length===0||e.some(n=>n in Di)?"intersection":"proto"in t?"proto":"domain"in t?"domain":d(dr(t))},dr=t=>`${I(t)} is not a valid type schema`,hr={},Oc=t=>U(t)?t.map(e=>e.collapsibleJson):t.collapsibleJson,te={};f.nodesByRegisteredId=te;const es=t=>(hr[t]??=0,`${t}${++hr[t]}`),ts=t=>{const e=Tt[t.kind],n=e.applyConfig?.(t.def,t.$.resolvedConfig)??t.def,r={},{meta:i,...s}=n,o=i===void 0?{}:typeof i=="string"?{description:i}:i,a=pi(s).sort(([c],[u])=>vt(c)?vt(u)?St(c)-St(u):1:vt(u)||c<u?-1:1).filter(([c,u])=>{if(c.startsWith("meta.")){const p=c.slice(5);return o[p]=u,!1}return!0});for(const c of a){const u=c[0],p=e.keys[u];if(!p)return d(`Key ${u} is not valid on ${t.kind} schema`);const $=p.parse?p.parse(c[1],t):c[1];$!==ae&&($!==void 0||p.preserveUndefined)&&(r[u]=$)}if(e.reduce&&!t.prereduced){const c=e.reduce(r,t.$);if(c)return c instanceof m?c.throw():Mc(c,o)}return Dn({id:t.id,kind:t.kind,inner:r,meta:o,$:t.$})},Dn=({id:t,kind:e,inner:n,meta:r,$:i,ignoreCache:s})=>{const o=Tt[e],a=pi(n),l=[];let c={};for(const[G,T]of a){const W=o.keys[G],L=W.serialize??(W.child?Oc:Fe);if(c[G]=L(T),W.child===!0){const Z=T;U(Z)?l.push(...Z):l.push(Z)}else typeof W.child=="function"&&l.push(...W.child(T))}o.finalizeInnerJson&&(c=o.finalizeInnerJson(c));let u={...c},p={};it(r)||(p=A(r,(G,T)=>[G,G==="examples"?T:Fe(T)]),u.meta=gt(p,"description",!0)),c=gt(c,o.collapsibleKey,!1);const $=JSON.stringify({kind:e,...c});u=gt(u,o.collapsibleKey,!1);const w=gt(u,o.collapsibleKey,!0),h=JSON.stringify({kind:e,...u});if(i.nodesByHash[h]&&!s)return i.nodesByHash[h];const N={id:t,kind:e,impl:o,inner:n,innerEntries:a,innerJson:c,innerHash:$,meta:r,metaJson:p,json:u,hash:h,collapsibleJson:w,children:l};if(e!=="intersection")for(const G in n)G!=="in"&&G!=="out"&&(N[G]=n[G]);const Ve=new _u[e](N,i);return i.nodesByHash[h]=Ve},Cc=(t,e)=>t.id===e?t:(J(te[e])&&R(`Unexpected attempt to overwrite node id ${e}`),Dn({id:e,kind:t.kind,inner:t.inner,meta:t.meta,$:t.$,ignoreCache:!0})),Mc=(t,e,n)=>Dn({id:es(e.alias??t.kind),kind:t.kind,inner:t.inner,meta:e,$:t.$}),gt=(t,e,n)=>{const r=Object.keys(t);if(r.length===1&&r[0]===e){const i=t[e];if(n||Oe(i,"object")&&(Object.keys(i).length===1||Array.isArray(i)))return i}return t},pn=(t,e,n)=>{if(t.key!==e.key)return null;const r=t.key;let i=j(t.value,e.value,n);const s=t.required||e.required?"required":"optional";if(i instanceof m)if(s==="optional")i=f.intrinsic.never.internal;else return i.withPrefixKey(t.key,t.required&&e.required?"required":"optional");if(s==="required")return n.$.node("required",{key:r,value:i});const o=t.hasDefault()?e.hasDefault()?t.default===e.default?t.default:d(rs(t.default,e.default)):t.default:e.hasDefault()?e.default:ae;return n.$.node("optional",{key:r,value:i,default:o})};class ns extends Le{required=this.kind==="required";optional=this.kind==="optional";impliedBasis=f.intrinsic.object.internal;serializedKey=lt(this.key);compiledKey=typeof this.key=="string"?this.key:this.serializedKey;flatRefs=F(this.value.flatRefs.map(e=>be([this.key,...e.path],e.node)),be([this.key],this.value));_transform(e,n){n.path.push(this.key);const r=super._transform(e,n);return n.path.pop(),r}hasDefault(){return"default"in this.inner}traverseAllows=(e,n)=>this.key in e?ue(this.key,()=>this.value.traverseAllows(e[this.key],n),n):this.optional;traverseApply=(e,n)=>{this.key in e?ue(this.key,()=>this.value.traverseApply(e[this.key],n),n):this.hasKind("required")&&n.errorFromNodeContext(this.errorContext)};compile(e){e.if(`${this.serializedKey} in data`,()=>e.traverseKey(this.serializedKey,`data${e.prop(this.key)}`,this.value)),this.hasKind("required")&&e.else(()=>e.traversalKind==="Apply"?e.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`):e.return(!1)),e.traversalKind==="Allows"&&e.return(!0)}}const rs=(t,e)=>`Invalid intersection of default values ${I(t)} & ${I(e)}`,Bc=B({kind:"optional",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(t,e)=>e.$.parseSchema(t)},default:{preserveUndefined:!0}},normalize:t=>t,reduce:(t,e)=>{if(e.resolvedConfig.exactOptionalPropertyTypes===!1&&!t.value.allows(void 0))return e.node("optional",{...t,value:t.value.or(y.undefined)},{prereduced:!0})},defaults:{description:t=>`${t.compiledKey}?: ${t.value.description}`},intersections:{optional:pn}});class Dc extends ns{constructor(...e){super(...e),"default"in this.inner&&Rn(this.value,this.inner.default,this.key)}get outProp(){if(!this.hasDefault())return this;const{default:e,...n}=this.inner;return this.cacheGetter("outProp",this.$.node("required",n,{prereduced:!0}))}expression=this.hasDefault()?`${this.compiledKey}: ${this.value.expression} = ${I(this.inner.default)}`:`${this.compiledKey}?: ${this.value.expression}`;defaultValueMorph=Rc(this);defaultValueMorphRef=this.defaultValueMorph&&H(this.defaultValueMorph)}const qn={implementation:Bc,Node:Dc},qc={},Rc=t=>{if(!t.hasDefault())return;const e=`{${t.compiledKey}: ${t.value.id} = ${Fe(t.default)}}`;return qc[e]??=is(t.key,t.value,t.default)},is=(t,e,n)=>{if(typeof n=="function")return e.includesTransform?(i,s)=>(ue(t,()=>e(i[t]=n(),s),s),i):i=>(i[t]=n(),i);const r=e.includesTransform?e.assert(n):n;return Oe(r,"object")?(i,s)=>(ue(t,()=>e(i[t]=n,s),s),i):i=>(i[t]=r,i)},Rn=(t,e,n)=>{const r=Bt(e);Oe(e,"object")&&!r&&d(Kc(n));const i=t.in(r?e():e);if(i instanceof xe){n===null&&d(`Default ${i.summary}`);const s=i.transform(o=>o.transform(a=>({...a,prefixPath:[n]})));d(`Default for ${s.summary}`)}return e},Kc=t=>`Non-primitive default ${t===null?"":typeof t=="number"?`for value at [${t}] `:`for ${lt(t)} `}must be specified as a function like () => ({my: 'object'})`;class ct extends Ki{constructor(e,n){super(e,n),Object.defineProperty(this,ce,{value:"root",enumerable:!1})}get internal(){return this}get"~standard"(){return{vendor:"arktype",version:1,validate:e=>{const n=this(e);return n instanceof xe?n:{value:n}}}}as(){return this}brand(e){return e===""?d(_c):this}readonly(){return this}branches=this.hasKind("union")?this.inner.branches:[this];distribute(e,n){const r=this.branches.map(e);return n?.(r)??r}get shortDescription(){return this.meta.description??this.defaultShortDescription}toJsonSchema(e={}){const n=Ri(this.$.resolvedConfig.toJsonSchema,e);n.useRefs||=this.isCyclic;const r=typeof n.dialect=="string"?{$schema:n.dialect}:{};return Object.assign(r,this.toJsonSchemaRecurse(n)),n.useRefs&&(r.$defs=A(this.references,(i,s)=>s.isRoot()&&!s.alwaysExpandJsonSchema?[s.id,s.toResolvedJsonSchema(n)]:[])),r}toJsonSchemaRecurse(e){return e.useRefs&&!this.alwaysExpandJsonSchema?{$ref:`#/$defs/${this.id}`}:this.toResolvedJsonSchema(e)}get alwaysExpandJsonSchema(){return this.isBasis()||this.kind==="alias"||this.hasKind("union")&&this.isBoolean}toResolvedJsonSchema(e){const n=this.innerToJsonSchema(e);return Object.assign(n,this.metaJson)}intersect(e){const n=this.$.parseDefinition(e),r=this.rawIntersect(n);return r instanceof m?r:this.$.finalize(r)}rawIntersect(e){return de(this,e,this.$)}toNeverIfDisjoint(){return this}and(e){const n=this.intersect(e);return n instanceof m?n.throw():n}rawAnd(e){const n=this.rawIntersect(e);return n instanceof m?n.throw():n}or(e){const n=this.$.parseDefinition(e);return this.$.finalize(this.rawOr(n))}rawOr(e){const n=[...this.branches,...e.branches];return this.$.node("union",n)}map(e){return this.$.schema(this.applyStructuralOperation("map",[e]))}pick(...e){return this.$.schema(this.applyStructuralOperation("pick",e))}omit(...e){return this.$.schema(this.applyStructuralOperation("omit",e))}required(){return this.$.schema(this.applyStructuralOperation("required",[]))}partial(){return this.$.schema(this.applyStructuralOperation("partial",[]))}_keyof;keyof(){if(this._keyof)return this._keyof;const e=this.applyStructuralOperation("keyof",[]).reduce((n,r)=>n.intersect(r).toNeverIfDisjoint(),f.intrinsic.unknown.internal);return e.branches.length===0&&d(Ti(`keyof ${this.expression}`)),this._keyof=this.$.finalize(e)}get props(){return this.branches.length!==1?d(Tc(this.expression)):[...this.applyStructuralOperation("props",[])[0]]}merge(e){const n=this.$.parseDefinition(e);return this.$.schema(n.distribute(r=>this.applyStructuralOperation("merge",[fr(r)??d(pr("merge",r.expression))])))}applyStructuralOperation(e,n){return this.distribute(r=>{if(r.equals(f.intrinsic.object)&&e!=="merge")return r;const i=fr(r);if(i||d(pr(e,r.expression)),e==="keyof")return i.keyof();if(e==="get")return i.get(...n);if(e==="props")return i.props;const s=e==="required"?"require":e==="partial"?"optionalize":e;return this.$.node("intersection",{...r.inner,structure:i[s](...n)})})}get(...e){return e[0]===void 0?this:this.$.schema(this.applyStructuralOperation("get",e))}extract(e){const n=this.$.parseDefinition(e);return this.$.schema(this.branches.filter(r=>r.extends(n)))}exclude(e){const n=this.$.parseDefinition(e);return this.$.schema(this.branches.filter(r=>!r.extends(n)))}array(){return this.$.schema(this.isUnknown()?{proto:Array}:{proto:Array,sequence:this},{prereduced:!0})}overlaps(e){return!(this.intersect(e)instanceof m)}extends(e){const n=this.intersect(e);return!(n instanceof m)&&this.equals(n)}ifExtends(e){return this.extends(e)?this:void 0}subsumes(e){return this.$.parseDefinition(e).extends(this)}configure(e,n="shallow"){return this.configureReferences(e,n)}describe(e,n="shallow"){return this.configure({description:e},n)}optional(){return[this,"?"]}default(e){return Rn(this,e,null),[this,"=",e]}from(e){return this.assert(e)}_pipe(...e){const n=e.reduce((r,i)=>r.rawPipeOnce(i),this);return this.$.finalize(n)}tryPipe(...e){const n=e.reduce((r,i)=>r.rawPipeOnce(b(i,"root")?i:(s,o)=>{try{return i(s,o)}catch(a){return o.error({code:"predicate",predicate:i,actual:`aborted due to error:
    ${a}
`})}}),this);return this.$.finalize(n)}pipe=Object.assign(this._pipe.bind(this),{try:this.tryPipe.bind(this)});to(e){return this.$.finalize(this.toNode(this.$.parseDefinition(e)))}toNode(e){const n=hn(this,e,this.$);return n instanceof m?n.throw():n}rawPipeOnce(e){return b(e,"root")?this.toNode(e):this.distribute(n=>n.hasKind("morph")?this.$.node("morph",{in:n.inner.in,morphs:[...n.morphs,e]}):this.$.node("morph",{in:n,morphs:[e]}),this.$.parseSchema)}narrow(e){return this.constrainOut("predicate",e)}constrain(e,n){return this._constrain("root",e,n)}constrainIn(e,n){return this._constrain("in",e,n)}constrainOut(e,n){return this._constrain("out",e,n)}_constrain(e,n,r){const i=this.$.node(n,r);if(i.isRoot())return i.isUnknown()?this:R(`Unexpected constraint node ${i}`);const s=e==="root"?this:this[e];if(s.hasKind("morph")||i.impliedBasis&&!s.extends(i.impliedBasis))return Hl(n,i.impliedBasis,this);const o=this.$.node("intersection",{[i.kind]:i}),a=e==="out"?hn(this,o,this.$):de(this,o,this.$);return a instanceof m&&a.throw(),this.$.finalize(a)}onUndeclaredKey(e){const n=typeof e=="string"?e:e.rule,r=typeof e=="string"?!1:e.deep;return this.$.finalize(this.transform((i,s)=>i==="structure"?n==="ignore"?ja(s,{undeclared:1}):{...s,undeclared:n}:s,r?void 0:{shouldTransform:i=>!Se(qt,i.kind)}))}hasEqualMorphs(e){return!this.includesTransform&&!e.includesTransform?!0:!(!Ke(this.shallowMorphs,e.shallowMorphs)||!Ke(this.flatMorphs,e.flatMorphs,{isEqual:(n,r)=>n.propString===r.propString&&(n.node.hasKind("morph")&&r.node.hasKind("morph")?n.node.hasEqualMorphs(r.node):n.node.hasKind("intersection")&&r.node.hasKind("intersection")?n.node.structure?.structuralMorphRef===r.node.structure?.structuralMorphRef:!1)}))}onDeepUndeclaredKey(e){return this.onUndeclaredKey({rule:e,deep:!0})}filter(e){return this.constrainIn("predicate",e)}divisibleBy(e){return this.constrain("divisor",e)}matching(e){return this.constrain("pattern",e)}atLeast(e){return this.constrain("min",e)}atMost(e){return this.constrain("max",e)}moreThan(e){return this.constrain("min",Be(e))}lessThan(e){return this.constrain("max",Be(e))}atLeastLength(e){return this.constrain("minLength",e)}atMostLength(e){return this.constrain("maxLength",e)}moreThanLength(e){return this.constrain("minLength",Be(e))}lessThanLength(e){return this.constrain("maxLength",Be(e))}exactlyLength(e){return this.constrain("exactLength",e)}atOrAfter(e){return this.constrain("after",e)}atOrBefore(e){return this.constrain("before",e)}laterThan(e){return this.constrain("after",Be(e))}earlierThan(e){return this.constrain("before",Be(e))}}const _c="Expected a non-empty brand name after #",Be=t=>typeof t=="object"&&!(t instanceof Date)?{...t,exclusive:!0}:{rule:t,exclusive:!0},bt=(t,e)=>b(e,"root")?b(t,"root")?t.extends(e):e.allows(t):b(t,"root")?t.hasUnit(e):e===t,fr=t=>t.hasKind("morph")?null:t.hasKind("intersection")?t.inner.structure??(t.basis?.domain==="object"?t.$.bindReference(f.intrinsic.emptyStructure):null):t.isBasis()&&t.domain==="object"?t.$.bindReference(f.intrinsic.emptyStructure):null,Tc=t=>`Props cannot be extracted from a union. Use .distribute to extract props from each branch instead. Received:
${t}`,pr=(t,e)=>`${t} operand must be an object (was ${e})`,ut=(t,e)=>A(Mn(t),(n,r)=>[r,e]),Ec=t=>typeof t=="string"?{reference:t}:t,mr=t=>t instanceof m?f.intrinsic.never.internal:t,Pc=B({kind:"alias",hasAssociatedError:!1,collapsibleKey:"reference",keys:{reference:{serialize:t=>t.startsWith("$")?t:`$ark.${t}`},resolve:{}},normalize:Ec,defaults:{description:t=>t.reference},intersections:{alias:(t,e,n)=>n.$.lazilyResolve(()=>mr(j(t.resolution,e.resolution,n)),`${t.reference}${n.pipe?"=>":"&"}${e.reference}`),...ut("alias",(t,e,n)=>e.isUnknown()?t:e.isNever()?e:e.isBasis()&&!e.overlaps(f.intrinsic.object)?m.init("assignability",f.intrinsic.object,e):n.$.lazilyResolve(()=>mr(j(t.resolution,e,n)),`${t.reference}${n.pipe?"=>":"&"}${e.id}`))}});class jc extends ct{expression=this.reference;structure=void 0;get resolution(){const e=this._resolve();return te[this.id]=e}_resolve(){if(this.resolve)return this.resolve();if(this.reference[0]==="$")return this.$.resolveRoot(this.reference.slice(1));const e=this.reference;let n=te[e];const r=[];for(;b(n,"context");){if(r.includes(n.id))return d(zc(n.id,r));r.push(n.id),n=te[n.id]}return b(n,"root")?n:R(`Unexpected resolution for reference ${this.reference}
Seen: [${r.join("->")}] 
Resolution: ${I(n)}`)}get resolutionId(){if(this.reference.includes("&")||this.reference.includes("=>"))return this.resolution.id;if(this.reference[0]!=="$")return this.reference;const e=this.reference.slice(1),n=this.$.resolutions[e];return typeof n=="string"?n:b(n,"root")?n.id:R(`Unexpected resolution for reference ${this.reference}: ${I(n)}`)}get defaultShortDescription(){return le.object}innerToJsonSchema(e){return this.resolution.toJsonSchemaRecurse(e)}traverseAllows=(e,n)=>{const r=n.seen[this.reference];return r?.includes(e)?!0:(n.seen[this.reference]=F(r,e),this.resolution.traverseAllows(e,n))};traverseApply=(e,n)=>{const r=n.seen[this.reference];r?.includes(e)||(n.seen[this.reference]=F(r,e),this.resolution.traverseApply(e,n))};compile(e){const n=this.resolutionId;e.if(`ctx.seen.${n} && ctx.seen.${n}.includes(data)`,()=>e.return(!0)),e.if(`!ctx.seen.${n}`,()=>e.line(`ctx.seen.${n} = []`)),e.line(`ctx.seen.${n}.push(data)`),e.return(e.invoke(n))}}const zc=(t,e)=>`Alias '${t}' has a shallow resolution cycle: ${[...e,t].join("->")}`,Kn={implementation:Pc,Node:jc};class _n extends ct{traverseApply=(e,n)=>{this.traverseAllows(e,n)||n.errorFromNodeContext(this.errorContext)};get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return Kt(this.errorContext)}compile(e){e.traversalKind==="Allows"?e.return(this.compiledCondition):e.if(this.compiledNegation,()=>e.line(`${e.ctx}.errorFromNodeContext(${this.compiledErrorContext})`))}}const Lc=B({kind:"domain",hasAssociatedError:!0,collapsibleKey:"domain",keys:{domain:{},numberAllowsNaN:{}},normalize:t=>typeof t=="string"?{domain:t}:Nn(t,"numberAllowsNaN")&&t.domain!=="number"?d(Tn.writeBadAllowNanMessage(t.domain)):t,applyConfig:(t,e)=>t.numberAllowsNaN===void 0&&t.domain==="number"&&e.numberAllowsNaN?{...t,numberAllowsNaN:!0}:t,defaults:{description:t=>le[t.domain],actual:t=>Number.isNaN(t)?"NaN":le[re(t)]},intersections:{domain:(t,e)=>t.domain==="number"&&e.domain==="number"?t.numberAllowsNaN?e:t:m.init("domain",t,e)}});class Uc extends _n{requiresNaNCheck=this.domain==="number"&&!this.numberAllowsNaN;traverseAllows=this.requiresNaNCheck?e=>typeof e=="number"&&!Number.isNaN(e):e=>re(e)===this.domain;compiledCondition=this.domain==="object"?'((typeof data === "object" && data !== null) || typeof data === "function")':`typeof data === "${this.domain}"${this.requiresNaNCheck?" && !Number.isNaN(data)":""}`;compiledNegation=this.domain==="object"?'((typeof data !== "object" || data === null) && typeof data !== "function")':`typeof data !== "${this.domain}"${this.requiresNaNCheck?" || Number.isNaN(data)":""}`;expression=this.numberAllowsNaN?"number | NaN":this.domain;get nestableExpression(){return this.numberAllowsNaN?`(${this.expression})`:this.expression}get defaultShortDescription(){return le[this.domain]}innerToJsonSchema(e){return this.domain==="bigint"||this.domain==="symbol"?e.fallback.domain({code:"domain",base:{},domain:this.domain}):{type:this.domain}}}const Tn={implementation:Lc,Node:Uc,writeBadAllowNanMessage:t=>`numberAllowsNaN may only be specified with domain "number" (was ${t})`},Vc=B({kind:"intersection",hasAssociatedError:!0,normalize:t=>{if(J(t))return t;const{structure:e,...n}=t,r=!!e,i=e??{},s=A(n,(o,a)=>se(o,ql)?(r&&d(`Flattened structure key ${o} cannot be specified alongside a root 'structure' key.`),i[o]=a,[]):[o,a]);return(b(i,"constraint")||!it(i))&&(s.structure=i),s},finalizeInnerJson:({structure:t,...e})=>Oe(t,"object")?{...t,...e}:e,keys:{domain:{child:!0,parse:(t,e)=>e.$.node("domain",t)},proto:{child:!0,parse:(t,e)=>e.$.node("proto",t)},structure:{child:!0,parse:(t,e)=>e.$.node("structure",t),serialize:t=>{if(!t.sequence?.minLength)return t.collapsibleJson;const{sequence:e,...n}=t.collapsibleJson,{minVariadicLength:r,...i}=e,s=i.variadic&&Object.keys(i).length===1?i.variadic:i;return{...n,sequence:s}}},divisor:{child:!0,parse:Y("divisor")},max:{child:!0,parse:Y("max")},min:{child:!0,parse:Y("min")},maxLength:{child:!0,parse:Y("maxLength")},minLength:{child:!0,parse:Y("minLength")},exactLength:{child:!0,parse:Y("exactLength")},before:{child:!0,parse:Y("before")},after:{child:!0,parse:Y("after")},pattern:{child:!0,parse:Y("pattern")},predicate:{child:!0,parse:Y("predicate")}},reduce:(t,e)=>gr({},t,{$:e,invert:!1,pipe:!1}),defaults:{description:t=>{if(t.children.length===0)return"unknown";if(t.structure)return t.structure.description;const e=[];if(t.basis&&!t.refinements.some(n=>n.impl.obviatesBasisDescription)&&e.push(t.basis.description),t.refinements.length){const n=t.refinements.toSorted((r,i)=>r.kind==="min"&&i.kind==="max"?-1:0).map(r=>r.description);e.push(...n)}return t.inner.predicate&&e.push(...t.inner.predicate.map(n=>n.description)),e.join(" and ")},expected:t=>`  ◦ ${t.errors.map(e=>e.expected).join(`
  ◦ `)}`,problem:t=>`(${t.actual}) must be...
${t.expected}`},intersections:{intersection:(t,e,n)=>gr(t.inner,e.inner,n),...ut("intersection",(t,e,n)=>{if(t.children.length===0)return e;const{domain:r,proto:i,...s}=t.inner,o=i??r,a=o?j(o,e,n):e;return a instanceof m?a:t?.basis?.equals(a)?t:t.$.node("intersection",{...s,[a.kind]:a},{prereduced:!0})})}});class Jc extends ct{basis=this.inner.domain??this.inner.proto??null;refinements=this.children.filter(e=>e.isRefinement());structure=this.inner.structure;expression=Hc(this);get shallowMorphs(){return this.inner.structure?.structuralMorph?[this.inner.structure.structuralMorph]:[]}get defaultShortDescription(){return this.basis?.defaultShortDescription??"present"}innerToJsonSchema(e){return this.children.reduce((n,r)=>r.isBasis()?r.toJsonSchemaRecurse(e):r.reduceJsonSchema(n,e),{})}traverseAllows=(e,n)=>this.children.every(r=>r.traverseAllows(e,n));traverseApply=(e,n)=>{const r=n.currentErrorCount;if(!(this.basis&&(this.basis.traverseApply(e,n),n.currentErrorCount>r))){if(this.refinements.length){for(let i=0;i<this.refinements.length-1;i++)if(this.refinements[i].traverseApply(e,n),n.failFast&&n.currentErrorCount>r)return;if(this.refinements.at(-1).traverseApply(e,n),n.currentErrorCount>r)return}if(!(this.structure&&(this.structure.traverseApply(e,n),n.currentErrorCount>r))&&this.inner.predicate){for(let i=0;i<this.inner.predicate.length-1;i++)if(this.inner.predicate[i].traverseApply(e,n),n.failFast&&n.currentErrorCount>r)return;this.inner.predicate.at(-1).traverseApply(e,n)}}};compile(e){if(e.traversalKind==="Allows"){for(const n of this.children)e.check(n);e.return(!0);return}if(e.initializeErrorCount(),this.basis&&(e.check(this.basis),this.children.length>1&&e.returnIfFail()),this.refinements.length){for(let n=0;n<this.refinements.length-1;n++)e.check(this.refinements[n]),e.returnIfFailFast();e.check(this.refinements.at(-1)),(this.structure||this.inner.predicate)&&e.returnIfFail()}if(this.structure&&(e.check(this.structure),this.inner.predicate&&e.returnIfFail()),this.inner.predicate){for(let n=0;n<this.inner.predicate.length-1;n++)e.check(this.inner.predicate[n]),e.returnIfFail();e.check(this.inner.predicate.at(-1))}}}const ss={implementation:Vc,Node:Jc},Hc=t=>{let e=t.structure?.expression||`${t.basis&&!t.refinements.some(n=>n.impl.obviatesBasisExpression)?t.basis.nestableExpression+" ":""}${t.refinements.map(n=>n.expression).join(" & ")}`||"unknown";return e==="Array == 0"&&(e="[]"),e},gr=(t,e,n)=>{const r={},i=t.proto??t.domain,s=e.proto??e.domain,o=i?s?j(i,s,n):i:s;return o instanceof m?o:(o&&(r[o.kind]=o),Nt({kind:"intersection",baseInner:r,l:It(t),r:It(e),roots:[],ctx:n}))},Gc=B({kind:"morph",hasAssociatedError:!1,keys:{in:{child:!0,parse:(t,e)=>e.$.parseSchema(t)},morphs:{parse:rt,serialize:t=>t.map(e=>b(e,"root")?e.json:H(e))},declaredIn:{child:!1,serialize:t=>t.json},declaredOut:{child:!1,serialize:t=>t.json}},normalize:t=>t,defaults:{description:t=>`a morph from ${t.in.description} to ${t.out?.description??"unknown"}`},intersections:{morph:(t,e,n)=>{if(!t.hasEqualMorphs(e))return d(Zc(t.expression,e.expression));const r=j(t.in,e.in,n);if(r instanceof m)return r;const i={morphs:t.morphs};if(t.declaredIn||e.declaredIn){const s=j(t.in,e.in,n);if(s instanceof m)return s.throw();i.declaredIn=s}if(t.declaredOut||e.declaredOut){const s=j(t.out,e.out,n);if(s instanceof m)return s.throw();i.declaredOut=s}return r.distribute(s=>n.$.node("morph",{...i,in:s}),n.$.parseSchema)},...ut("morph",(t,e,n)=>{const r=t.inner.in?j(t.inner.in,e,n):e;return r instanceof m?r:r.equals(t.inner.in)?t:n.$.node("morph",{...t.inner,in:r})})}});class Wc extends ct{serializedMorphs=this.morphs.map(H);compiledMorphs=`[${this.serializedMorphs}]`;lastMorph=this.inner.morphs.at(-1);lastMorphIfNode=b(this.lastMorph,"root")?this.lastMorph:void 0;introspectableIn=this.inner.in;introspectableOut=this.lastMorphIfNode?Object.assign(this.referencesById,this.lastMorphIfNode.referencesById)&&this.lastMorphIfNode.out:void 0;get shallowMorphs(){return Array.isArray(this.inner.in?.shallowMorphs)?[...this.inner.in.shallowMorphs,...this.morphs]:this.morphs}get in(){return this.declaredIn??this.inner.in?.in??f.intrinsic.unknown.internal}get out(){return this.declaredOut??this.introspectableOut??f.intrinsic.unknown.internal}declareIn(e){return this.$.node("morph",{...this.inner,declaredIn:e})}declareOut(e){return this.$.node("morph",{...this.inner,declaredOut:e})}expression=`(In: ${this.in.expression}) => ${this.lastMorphIfNode?"To":"Out"}<${this.out.expression}>`;get defaultShortDescription(){return this.in.meta.description??this.in.defaultShortDescription}innerToJsonSchema(e){return e.fallback.morph({code:"morph",base:this.in.toJsonSchemaRecurse(e),out:this.introspectableOut?.toJsonSchemaRecurse(e)??null})}compile(e){if(e.traversalKind==="Allows"){if(!this.introspectableIn)return;e.return(e.invoke(this.introspectableIn));return}this.introspectableIn&&e.line(e.invoke(this.introspectableIn)),e.line(`ctx.queueMorphs(${this.compiledMorphs})`)}traverseAllows=(e,n)=>!this.introspectableIn||this.introspectableIn.traverseAllows(e,n);traverseApply=(e,n)=>{this.introspectableIn&&this.introspectableIn.traverseApply(e,n),n.queueMorphs(this.morphs)};hasEqualMorphs(e){return Ke(this.morphs,e.morphs,{isEqual:(n,r)=>n===r||b(n,"root")&&b(r,"root")&&n.equals(r)})}}const os={implementation:Gc,Node:Wc},Zc=(t,e)=>`The intersection of distinct morphs at a single path is indeterminate:
Left: ${t}
Right: ${e}`,Yc=B({kind:"proto",hasAssociatedError:!0,collapsibleKey:"proto",keys:{proto:{serialize:t=>Fn(t)??Fe(t)},dateAllowsInvalid:{}},normalize:t=>{const e=typeof t=="string"?{proto:Te[t]}:typeof t=="function"?J(t)?t:{proto:t}:typeof t.proto=="string"?{...t,proto:Te[t.proto]}:t;return typeof e.proto!="function"&&d(At.writeInvalidSchemaMessage(e.proto)),Nn(e,"dateAllowsInvalid")&&e.proto!==Date&&d(At.writeBadInvalidDateMessage(e.proto)),e},applyConfig:(t,e)=>t.dateAllowsInvalid===void 0&&t.proto===Date&&e.dateAllowsInvalid?{...t,dateAllowsInvalid:!0}:t,defaults:{description:t=>t.builtinName?Wa[t.builtinName]:`an instance of ${t.proto.name}`,actual:t=>t instanceof Date&&t.toString()==="Invalid Date"?"an invalid Date":rn(t)},intersections:{proto:(t,e)=>t.proto===Date&&e.proto===Date?t.dateAllowsInvalid?e:t:rr(t.proto,e.proto)?t:rr(e.proto,t.proto)?e:m.init("proto",t,e),domain:(t,e)=>e.domain==="object"?t:m.init("domain",f.intrinsic.object.internal,e)}});class Xc extends _n{builtinName=Fn(this.proto);serializedConstructor=this.json.proto;requiresInvalidDateCheck=this.proto===Date&&!this.dateAllowsInvalid;traverseAllows=this.requiresInvalidDateCheck?e=>e instanceof Date&&e.toString()!=="Invalid Date":e=>e instanceof this.proto;compiledCondition=`data instanceof ${this.serializedConstructor}${this.requiresInvalidDateCheck?' && data.toString() !== "Invalid Date"':""}`;compiledNegation=`!(${this.compiledCondition})`;innerToJsonSchema(e){switch(this.builtinName){case"Array":return{type:"array"};case"Date":return e.fallback.date?.({code:"date",base:{}})??e.fallback.proto({code:"proto",base:{},proto:this.proto});default:return e.fallback.proto({code:"proto",base:{},proto:this.proto})}}expression=this.dateAllowsInvalid?"Date | InvalidDate":this.proto.name;get nestableExpression(){return this.dateAllowsInvalid?`(${this.expression})`:this.expression}domain="object";get defaultShortDescription(){return this.description}}const At={implementation:Yc,Node:Xc,writeBadInvalidDateMessage:t=>`dateAllowsInvalid may only be specified with constructor Date (was ${t.name})`,writeInvalidSchemaMessage:t=>`instanceOf operand must be a function (was ${re(t)})`},Qc=B({kind:"union",hasAssociatedError:!0,collapsibleKey:"branches",keys:{ordered:{},branches:{child:!0,parse:(t,e)=>{const n=[];for(const r of t){const i=b(r,"root")?r.branches:e.$.parseSchema(r).branches;for(const s of i)if(s.hasKind("morph")){const o=n.findIndex(a=>a.hasKind("morph")&&a.hasEqualMorphs(s));if(o===-1)n.push(s);else{const a=n[o];n[o]=e.$.node("morph",{...a.inner,in:a.in.rawOr(s.in)})}}else n.push(s)}return e.def.ordered||n.sort((r,i)=>r.hash<i.hash?-1:1),n}}},normalize:t=>U(t)?{branches:t}:t,reduce:(t,e)=>{const n=uu(t);if(n.length===1)return n[0];if(n.length!==t.branches.length)return e.node("union",{...t,branches:n},{prereduced:!0})},defaults:{description:t=>t.distribute(e=>e.description,qe),expected:t=>{const e=qa(t.errors,"propString"),n=Object.entries(e).map(([r,i])=>{const s=[];for(const l of i)Ie(s,l.expected);const o=qe(s),a=i.every(l=>l.actual===i[0].actual)?i[0].actual:I(i[0].data);return`${r&&`${r} `}must be ${o}${a&&` (was ${a})`}`});return qe(n)},problem:t=>t.expected,message:t=>t.problem},intersections:{union:(t,e,n)=>{if(t.isNever!==e.isNever)return m.init("presence",t,e);let r;return t.ordered?(e.ordered&&d(hu(t.expression,e.expression)),r=Zt(e.branches,t.branches,n),r instanceof m&&r.invert()):r=Zt(t.branches,e.branches,n),r instanceof m?r:n.$.parseSchema(t.ordered||e.ordered?{branches:r,ordered:!0}:{branches:r})},...ut("union",(t,e,n)=>{const r=Zt(t.branches,[e],n);return r instanceof m?r:r.length===1?r[0]:n.$.parseSchema(t.ordered?{branches:r,ordered:!0}:{branches:r})})}});class eu extends ct{isBoolean=this.branches.length===2&&this.branches[0].hasUnit(!1)&&this.branches[1].hasUnit(!0);get branchGroups(){const e=[];let n=-1;for(const r of this.branches){if(r.hasKind("unit")&&r.domain==="boolean"){n===-1?(n=e.length,e.push(r)):e[n]=f.intrinsic.boolean;continue}e.push(r)}return e}unitBranches=this.branches.filter(e=>e.in.hasKind("unit"));discriminant=this.discriminate();discriminantJson=this.discriminant?au(this.discriminant):null;expression=this.distribute(e=>e.nestableExpression,cu);createBranchedOptimisticRootApply(){return(e,n)=>{const r=this.traverseOptimistic(e);if(r!==ae)return r;const i=new De(e,this.$.resolvedConfig);return this.traverseApply(e,i),i.finalize(n)}}get shallowMorphs(){return this.branches.reduce((e,n)=>Ie(e,n.shallowMorphs),[])}get defaultShortDescription(){return this.distribute(e=>e.defaultShortDescription,qe)}innerToJsonSchema(e){if(this.branchGroups.length===1&&this.branchGroups[0].equals(f.intrinsic.boolean))return{type:"boolean"};const n=this.branchGroups.map(r=>r.toJsonSchemaRecurse(e));return n.every(r=>Object.keys(r).length===1&&Nn(r,"const"))?{enum:n.map(r=>r.const)}:{anyOf:n}}traverseAllows=(e,n)=>this.branches.some(r=>r.traverseAllows(e,n));traverseApply=(e,n)=>{const r=[];for(let i=0;i<this.branches.length;i++){if(n.pushBranch(),this.branches[i].traverseApply(e,n),!n.hasError())return this.branches[i].includesTransform?n.queuedMorphs.push(...n.popBranch().queuedMorphs):n.popBranch();r.push(n.popBranch().error)}n.errorFromNodeContext({code:"union",errors:r,meta:this.meta})};traverseOptimistic=e=>{for(let n=0;n<this.branches.length;n++){const r=this.branches[n];if(r.traverseAllows(e))return r.contextFreeMorph?r.contextFreeMorph(e):e}return ae};compile(e){if(!this.discriminant||this.unitBranches.length===this.branches.length&&this.branches.length===2)return this.compileIndiscriminable(e);let n=this.discriminant.optionallyChainedPropString;this.discriminant.kind==="domain"&&(n=`typeof ${n} === "object" ? ${n} === null ? "null" : "object" : typeof ${n} === "function" ? "object" : typeof ${n}`);const r=this.discriminant.cases,i=Object.keys(r),{optimistic:s}=e;if(e.optimistic=!1,e.block(`switch(${n})`,()=>{for(const u in r){const p=r[u],$=u==="default"?u:`case ${u}`;e.line(`${$}: return ${p===!0?s?e.data:p:s?`${e.invoke(p)} ? ${p.contextFreeMorph?`${H(p.contextFreeMorph)}(${e.data})`:e.data} : "${ae}"`:e.invoke(p)}`)}return e}),e.traversalKind==="Allows"){e.return(s?`"${ae}"`:!1);return}const o=qe(this.discriminant.kind==="domain"?i.map(u=>{const p=u.slice(1,-1);return p==="function"?le.object:le[p]}):i),a=this.discriminant.path.map(u=>typeof u=="symbol"?H(u):JSON.stringify(u)),l=JSON.stringify(o),c=this.discriminant.kind==="domain"?`${su}[${n}]`:`${ou}(${n})`;e.line(`ctx.errorFromNodeContext({
	code: "predicate",
	expected: ${l},
	actual: ${c},
	relativePath: [${a}],
	meta: ${this.compiledMeta}
})`)}compileIndiscriminable(e){if(e.traversalKind==="Apply"){e.const("errors","[]");for(const n of this.branches)e.line("ctx.pushBranch()").line(e.invoke(n)).if("!ctx.hasError()",()=>e.return(n.includesTransform?"ctx.queuedMorphs.push(...ctx.popBranch().queuedMorphs)":"ctx.popBranch()")).line("errors.push(ctx.popBranch().error)");e.line(`ctx.errorFromNodeContext({ code: "union", errors, meta: ${this.compiledMeta} })`)}else{const{optimistic:n}=e;e.optimistic=!1;for(const r of this.branches)e.if(`${e.invoke(r)}`,()=>e.return(n?r.contextFreeMorph?`${H(r.contextFreeMorph)}(${e.data})`:e.data:!0));e.return(n?`"${ae}"`:!1)}}get nestableExpression(){return this.isBoolean?"boolean":`(${this.expression})`}discriminate(){if(this.branches.length<2||this.isCyclic)return null;if(this.unitBranches.length===this.branches.length){const s=A(this.unitBranches,(o,a)=>[`${a.in.serializedValue}`,a.hasKind("morph")?a:!0]);return{kind:"unit",path:[],optionallyChainedPropString:"data",cases:s}}const e=[];for(let s=0;s<this.branches.length-1;s++){const o=this.branches[s];for(let a=s+1;a<this.branches.length;a++){const l=this.branches[a],c=de(o.in,l.in,o.$);if(c instanceof m)for(const u of c){if(!u.kind||u.optional)continue;let p,$;if(u.kind==="domain"){const h=u.l,N=u.r;p=`"${typeof h=="string"?h:h.domain}"`,$=`"${typeof N=="string"?N:N.domain}"`}else if(u.kind==="unit")p=u.l.serializedValue,$=u.r.serializedValue;else continue;const w=e.find(h=>Ke(h.path,u.path)&&h.kind===u.kind);w?(w.cases[p]?w.cases[p].branchIndices=Ie(w.cases[p].branchIndices,s):w.cases[p]??={branchIndices:[s],condition:u.l},w.cases[$]?w.cases[$].branchIndices=Ie(w.cases[$].branchIndices,a):w.cases[$]??={branchIndices:[a],condition:u.r}):e.push({kind:u.kind,cases:{[p]:{branchIndices:[s],condition:u.l},[$]:{branchIndices:[a],condition:u.r}},path:u.path})}}}const n=this.ordered?ru(e,this.branches):e;if(!n.length)return null;const r=tu(n,this),i={};for(const s in r.best.cases){const o=nu(r,s);if(o===null){i[s]=!0;continue}if(o.length===this.branches.length)return null;this.ordered&&o.sort((c,u)=>c.originalIndex-u.originalIndex);const a=o.map(c=>c.branch),l=a.length===1?a[0]:this.$.node("union",this.ordered?{branches:a,ordered:!0}:a);Object.assign(this.referencesById,l.referencesById),i[s]=l}if(r.defaultEntries.length){const s=r.defaultEntries.map(o=>o.branch);i.default=this.$.node("union",this.ordered?{branches:s,ordered:!0}:s,{prereduced:!0}),Object.assign(this.referencesById,i.default.referencesById)}return Object.assign(r.location,{cases:i})}}const tu=(t,e)=>{const n=t.sort((s,o)=>Object.keys(o.cases).length-Object.keys(s.cases).length)[0],r={kind:n.kind,path:n.path,optionallyChainedPropString:as(n.path)},i=e.branches.map((s,o)=>({originalIndex:o,branch:s}));return{best:n,location:r,defaultEntries:i,node:e}},nu=(t,e)=>{const n=t.best.cases[e],r=iu(n.condition,t.location.path,t.node.$);let i=[];const s=[];for(let o=0;o<t.defaultEntries.length;o++){const a=t.defaultEntries[o];if(n.branchIndices.includes(a.originalIndex)){const l=br(t.node.branches[a.originalIndex],t.location);l===null?i=null:i?.push({originalIndex:a.originalIndex,branch:l})}else if(a.branch.hasKind("alias")&&r.hasKind("domain")&&r.domain==="object")i?.push(a);else{if(a.branch.in.overlaps(r)){const l=br(a.branch,t.location);i?.push({originalIndex:a.originalIndex,branch:l})}s.push(a)}}return t.defaultEntries=s,i},ru=(t,e)=>t.filter(r=>{const i=Object.values(r.cases).map(s=>s.branchIndices);for(let s=0;s<i.length-1;s++){const o=i[s];for(let a=s+1;a<i.length;a++){const l=i[a];for(const c of o)for(const u of l)if(c>u&&e[c].overlaps(e[u]))return!1}}return!0}),iu=(t,e,n)=>{let r=t==="undefined"?n.node("unit",{unit:void 0}):t==="null"?n.node("unit",{unit:null}):t==="boolean"?n.units([!0,!1]):t;for(let i=e.length-1;i>=0;i--){const s=e[i];r=n.node("intersection",typeof s=="number"?{proto:"Array",sequence:[...Ba(s).map(o=>({})),r]}:{domain:"object",required:[{key:s,value:r}]})}return r},as=t=>t.reduce((e,n)=>e+Oi(n,!0),"data"),su=H(Ra),ou=H(I),ls={implementation:Qc,Node:eu},au=t=>({kind:t.kind,path:t.path.map(e=>typeof e=="string"?e:lt(e)),cases:A(t.cases,(e,n)=>[e,n===!0?n:n.hasKind("union")&&n.discriminantJson?n.discriminantJson:n.json])}),lu={delimiter:" | ",finalDelimiter:" | "},cu=t=>qe(t,lu),qe=(t,e)=>{const n=e?.delimiter??", ",r=e?.finalDelimiter??" or ";if(t.length===0)return"never";if(t.length===1)return t[0];if(t.length===2&&t[0]==="false"&&t[1]==="true"||t[0]==="true"&&t[1]==="false")return"boolean";const i={},s=t.filter(a=>i[a]?!1:i[a]=!0),o=s.pop();return`${s.join(n)}${s.length?r:""}${o}`},Zt=(t,e,n)=>{const r=e.map(()=>[]);for(let s=0;s<t.length;s++){let o={};for(let a=0;a<e.length;a++){if(r[a]===null)continue;if(t[s].equals(e[a])){r[a]=null,o={};break}const l=j(t[s],e[a],n);if(!(l instanceof m)){if(l.equals(t[s])){r[a].push(t[s]),o={};break}l.equals(e[a])?r[a]=null:o[a]=l}}for(const a in o)r[a][s]=o[a]}const i=r.flatMap((s,o)=>s?.flatMap(a=>a.branches)??e[o]);return i.length===0?m.init("union",t,e):i},uu=({branches:t,ordered:e})=>{if(t.length<2)return t;const n=t.map(()=>!0);for(let r=0;r<t.length;r++)for(let i=r+1;i<t.length&&n[r]&&n[i];i++){if(t[r].equals(t[i])){n[i]=!1;continue}const s=de(t[r].in,t[i].in,t[0].$);s instanceof m||(e||du(t[r],t[i]),s.equals(t[r].in)?n[r]=!!e:s.equals(t[i].in)&&(n[i]=!1))}return t.filter((r,i)=>n[i])},du=(t,e)=>{!t.includesTransform&&!e.includesTransform||(Ke(t.shallowMorphs,e.shallowMorphs)||d(yr(t.expression,e.expression)),Ke(t.flatMorphs,e.flatMorphs,{isEqual:(n,r)=>n.propString===r.propString&&(n.node.hasKind("morph")&&r.node.hasKind("morph")?n.node.hasEqualMorphs(r.node):n.node.hasKind("intersection")&&r.node.hasKind("intersection")?n.node.structure?.structuralMorphRef===r.node.structure?.structuralMorphRef:!1)})||d(yr(t.expression,e.expression)))},br=(t,e)=>t.transform((n,r)=>n==="domain"||n==="unit"?null:r,{shouldTransform:(n,r)=>{const i=as(r.path);return e.optionallyChainedPropString.startsWith(i)?n.hasKind("domain")&&n.domain==="object"||(n.hasKind("domain")||e.kind==="unit")&&i===e.optionallyChainedPropString?!0:n.children.length!==0&&n.kind!=="index":!1}}),yr=(t,e)=>`An unordered union of a type including a morph and a type with overlapping input is indeterminate:
Left: ${t}
Right: ${e}`,hu=(t,e)=>`The intersection of two ordered unions is indeterminate:
Left: ${t}
Right: ${e}`,fu=B({kind:"unit",hasAssociatedError:!0,keys:{unit:{preserveUndefined:!0,serialize:t=>t instanceof Date?t.toISOString():Fe(t)}},normalize:t=>t,defaults:{description:t=>I(t.unit),problem:({expected:t,actual:e})=>`${t===e?`must be reference equal to ${t} (serialized to the same value)`:`must be ${t} (was ${e})`}`},intersections:{unit:(t,e)=>m.init("unit",t,e),...ut("unit",(t,e)=>{if(e.allows(t.unit))return t;const n=e.hasKind("intersection")?e.basis:e;if(n){const r=n.hasKind("domain")?n:f.intrinsic.object;if(t.domain!==r.domain){const i=t.domain==="undefined"||t.domain==="null"||t.domain==="boolean"?t.domain:f.intrinsic[t.domain];return m.init("domain",i,r)}}return m.init("assignability",t,e.hasKind("intersection")?e.children.find(r=>!r.allows(t.unit)):e)})}});class pu extends _n{compiledValue=this.json.unit;serializedValue=typeof this.unit=="string"||this.unit instanceof Date?JSON.stringify(this.compiledValue):`${this.compiledValue}`;compiledCondition=vr(this.unit,this.serializedValue);compiledNegation=vr(this.unit,this.serializedValue,"negated");expression=I(this.unit);domain=re(this.unit);get defaultShortDescription(){return this.domain==="object"?le.object:this.description}innerToJsonSchema(e){return this.unit===null?{type:"null"}:f.intrinsic.jsonPrimitive.allows(this.unit)?{const:this.unit}:e.fallback.unit({code:"unit",base:{},unit:this.unit})}traverseAllows=this.unit instanceof Date?e=>e instanceof Date&&e.toISOString()===this.compiledValue:Number.isNaN(this.unit)?e=>Number.isNaN(e):e=>e===this.unit}const cs={implementation:fu,Node:pu},vr=(t,e,n)=>{if(t instanceof Date){const r=`data instanceof Date && data.toISOString() === ${e}`;return n?`!(${r})`:r}return Number.isNaN(t)?`${n?"!":""}Number.isNaN(data)`:`data ${n?"!":"="}== ${e}`},mu=B({kind:"index",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{signature:{child:!0,parse:(t,e)=>{const n=e.$.parseSchema(t);if(!n.extends(f.intrinsic.key))return d(yu(n.expression));const r=n.branches.filter(i=>i.hasKind("unit"));return r.length?d(bu(r.map(i=>I(i.unit)))):n}},value:{child:!0,parse:(t,e)=>e.$.parseSchema(t)}},normalize:t=>t,defaults:{description:t=>`[${t.signature.expression}]: ${t.value.description}`},intersections:{index:(t,e,n)=>{if(t.signature.equals(e.signature)){const r=j(t.value,e.value,n),i=r instanceof m?f.intrinsic.never.internal:r;return n.$.node("index",{signature:t.signature,value:i})}return t.signature.extends(e.signature)&&t.value.subsumes(e.value)?e:e.signature.extends(t.signature)&&e.value.subsumes(t.value)?t:null}}});class gu extends Le{impliedBasis=f.intrinsic.object.internal;expression=`[${this.signature.expression}]: ${this.value.expression}`;flatRefs=F(this.value.flatRefs.map(e=>be([this.signature,...e.path],e.node)),be([this.signature],this.value));traverseAllows=(e,n)=>$t(e).every(r=>this.signature.traverseAllows(r[0],n)?ue(r[0],()=>this.value.traverseAllows(r[1],n),n):!0);traverseApply=(e,n)=>{for(const r of $t(e))this.signature.traverseAllows(r[0],n)&&ue(r[0],()=>this.value.traverseApply(r[1],n),n)};_transform(e,n){n.path.push(this.signature);const r=super._transform(e,n);return n.path.pop(),r}compile(){}}const us={implementation:mu,Node:gu},bu=t=>`Index keys ${t.join(", ")} should be specified as named props.`,yu=t=>`Indexed key definition '${t}' must be a string or symbol`,vu=B({kind:"required",hasAssociatedError:!0,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(t,e)=>e.$.parseSchema(t)}},normalize:t=>t,defaults:{description:t=>`${t.compiledKey}: ${t.value.description}`,expected:t=>t.missingValueDescription,actual:()=>"missing"},intersections:{required:pn,optional:pn}});class xu extends ns{expression=`${this.compiledKey}: ${this.value.expression}`;errorContext=Object.freeze({code:"required",missingValueDescription:this.value.defaultShortDescription,relativePath:[this.key],meta:this.meta});compiledErrorContext=Kt(this.errorContext)}const ds={implementation:vu,Node:xu},$u=B({kind:"sequence",hasAssociatedError:!1,collapsibleKey:"variadic",keys:{prefix:{child:!0,parse:(t,e)=>{if(t.length!==0)return t.map(n=>e.$.parseSchema(n))}},optionals:{child:!0,parse:(t,e)=>{if(t.length!==0)return t.map(n=>e.$.parseSchema(n))}},defaultables:{child:t=>t.map(e=>e[0]),parse:(t,e)=>{if(t.length!==0)return t.map(n=>{const r=e.$.parseSchema(n[0]);return Rn(r,n[1],null),[r,n[1]]})},serialize:t=>t.map(e=>[e[0].collapsibleJson,Fe(e[1])])},variadic:{child:!0,parse:(t,e)=>e.$.parseSchema(t,e)},minVariadicLength:{parse:t=>t===0?void 0:t},postfix:{child:!0,parse:(t,e)=>{if(t.length!==0)return t.map(n=>e.$.parseSchema(n))}}},normalize:t=>{if(typeof t=="string")return{variadic:t};if("variadic"in t||"prefix"in t||"defaultables"in t||"optionals"in t||"postfix"in t||"minVariadicLength"in t){if(t.postfix?.length){if(!t.variadic)return d(Iu);if(t.optionals?.length||t.defaultables?.length)return d(fs)}return t.minVariadicLength&&!t.variadic?d("minVariadicLength may not be specified without a variadic element"):t}return{variadic:t}},reduce:(t,e)=>{let n=t.minVariadicLength??0;const r=t.prefix?.slice()??[],i=t.defaultables?.slice()??[],s=t.optionals?.slice()??[],o=t.postfix?.slice()??[];if(t.variadic){for(;s.at(-1)?.equals(t.variadic);)s.pop();if(s.length===0&&i.length===0)for(;r.at(-1)?.equals(t.variadic);)r.pop(),n++;for(;o[0]?.equals(t.variadic);)o.shift(),n++}else s.length===0&&i.length===0&&r.push(...o.splice(0));if(n!==t.minVariadicLength||t.prefix&&t.prefix.length!==r.length)return e.node("sequence",{...t,prefix:r,defaultables:i,optionals:s,postfix:o,minVariadicLength:n},{prereduced:!0})},defaults:{description:t=>t.isVariadicOnly?`${t.variadic.nestableExpression}[]`:`[${t.tuple.map(n=>n.kind==="defaultables"?`${n.node.nestableExpression} = ${I(n.default)}`:n.kind==="optionals"?`${n.node.nestableExpression}?`:n.kind==="variadic"?`...${n.node.nestableExpression}[]`:n.node.expression).join(", ")}]`},intersections:{sequence:(t,e,n)=>{const r=We({l:t.tuple,r:e.tuple,disjoint:new m,result:[],fixedVariants:[],ctx:n}),i=r.disjoint.length===0?[r,...r.fixedVariants]:r.fixedVariants;return i.length===0?r.disjoint:i.length===1?n.$.node("sequence",xr(i[0].result)):n.$.node("union",i.map(s=>({proto:Array,sequence:xr(s.result)})))}}});class wu extends Le{impliedBasis=f.intrinsic.Array.internal;tuple=Nu(this.inner);prefixLength=this.prefix?.length??0;defaultablesLength=this.defaultables?.length??0;optionalsLength=this.optionals?.length??0;postfixLength=this.postfix?.length??0;defaultablesAndOptionals=[];prevariadic=this.tuple.filter(e=>e.kind==="defaultables"||e.kind==="optionals"?(this.defaultablesAndOptionals.push(e.node),!0):e.kind==="prefix");variadicOrPostfix=Ne(this.variadic&&[this.variadic],this.postfix);flatRefs=this.addFlatRefs();addFlatRefs(){return lr(this.flatRefs,this.prevariadic.flatMap((e,n)=>F(e.node.flatRefs.map(r=>be([`${n}`,...r.path],r.node)),be([`${n}`],e.node)))),lr(this.flatRefs,this.variadicOrPostfix.flatMap(e=>F(e.flatRefs.map(n=>be([f.intrinsic.nonNegativeIntegerString.internal,...n.path],n.node)),be([f.intrinsic.nonNegativeIntegerString.internal],e)))),this.flatRefs}isVariadicOnly=this.prevariadic.length+this.postfixLength===0;minVariadicLength=this.inner.minVariadicLength??0;minLength=this.prefixLength+this.minVariadicLength+this.postfixLength;minLengthNode=this.minLength===0?null:this.$.node("minLength",this.minLength);maxLength=this.variadic?null:this.tuple.length;maxLengthNode=this.maxLength===null?null:this.$.node("maxLength",this.maxLength);impliedSiblings=this.minLengthNode?this.maxLengthNode?[this.minLengthNode,this.maxLengthNode]:[this.minLengthNode]:this.maxLengthNode?[this.maxLengthNode]:[];defaultValueMorphs=Su(this);defaultValueMorphsReference=this.defaultValueMorphs.length?H(this.defaultValueMorphs):void 0;elementAtIndex(e,n){if(n<this.prevariadic.length)return this.tuple[n];const r=e.length-this.postfixLength;return n>=r?{kind:"postfix",node:this.postfix[n-r]}:{kind:"variadic",node:this.variadic??R(`Unexpected attempt to access index ${n} on ${this}`)}}traverseAllows=(e,n)=>{for(let r=0;r<e.length;r++)if(!this.elementAtIndex(e,r).node.traverseAllows(e[r],n))return!1;return!0};traverseApply=(e,n)=>{let r=0;for(;r<e.length;r++)ue(r,()=>this.elementAtIndex(e,r).node.traverseApply(e[r],n),n)};get element(){return this.cacheGetter("element",this.$.node("union",this.children))}compile(e){if(this.prefix)for(const[n,r]of this.prefix.entries())e.traverseKey(`${n}`,`data[${n}]`,r);for(const[n,r]of this.defaultablesAndOptionals.entries()){const i=`${n+this.prefixLength}`;e.if(`${i} >= ${e.data}.length`,()=>e.traversalKind==="Allows"?e.return(!0):e.return()),e.traverseKey(i,`data[${i}]`,r)}if(this.variadic&&(this.postfix&&e.const("firstPostfixIndex",`${e.data}.length${this.postfix?`- ${this.postfix.length}`:""}`),e.for(`i < ${this.postfix?"firstPostfixIndex":"data.length"}`,()=>e.traverseKey("i","data[i]",this.variadic),this.prevariadic.length),this.postfix))for(const[n,r]of this.postfix.entries()){const i=`firstPostfixIndex + ${n}`;e.traverseKey(i,`data[${i}]`,r)}e.traversalKind==="Allows"&&e.return(!0)}_transform(e,n){n.path.push(f.intrinsic.nonNegativeIntegerString.internal);const r=super._transform(e,n);return n.path.pop(),r}expression=this.description;reduceJsonSchema(e,n){if(this.prevariadic.length&&(e.prefixItems=this.prevariadic.map(r=>{const i=r.node.toJsonSchemaRecurse(n);if(r.kind==="defaultables"){const s=typeof r.default=="function"?r.default():r.default;i.default=f.intrinsic.jsonData.allows(s)?s:n.fallback.defaultValue({code:"defaultValue",base:i,value:s})}return i})),this.minLength&&(e.minItems=this.minLength),this.variadic){const r=Object.assign(e,{items:this.variadic.toJsonSchemaRecurse(n)});if(this.maxLength&&(r.maxItems=this.maxLength),this.postfix){const i=this.postfix.map(s=>s.toJsonSchemaRecurse(n));e=n.fallback.arrayPostfix({code:"arrayPostfix",base:r,elements:i})}}else e.items=!1,delete e.maxItems;return e}}const ku={},Su=t=>{if(!t.defaultables)return[];const e=[];let n="[";const r=t.prefixLength+t.defaultablesLength-1;for(let i=t.prefixLength;i<=r;i++){const[s,o]=t.defaultables[i-t.prefixLength];e.push(is(i,s,o)),n+=`${i}: ${s.id} = ${Fe(o)}, `}return n+="]",ku[n]??=e},hs={implementation:$u,Node:wu},Nu=t=>{const e=[];if(t.prefix)for(const n of t.prefix)e.push({kind:"prefix",node:n});if(t.defaultables)for(const[n,r]of t.defaultables)e.push({kind:"defaultables",node:n,default:r});if(t.optionals)for(const n of t.optionals)e.push({kind:"optionals",node:n});if(t.variadic&&e.push({kind:"variadic",node:t.variadic}),t.postfix)for(const n of t.postfix)e.push({kind:"postfix",node:n});return e},xr=t=>t.reduce((e,n)=>(n.kind==="variadic"?e.variadic=n.node:n.kind==="defaultables"?e.defaultables=F(e.defaultables,[[n.node,n.default]]):e[n.kind]=F(e[n.kind],n.node),e),{}),fs="A postfix required element cannot follow an optional or defaultable element",Iu="A postfix element requires a variadic element",We=t=>{const[e,...n]=t.l,[r,...i]=t.r;if(!e||!r)return t;const s=n.at(-1)?.kind==="postfix",o=i.at(-1)?.kind==="postfix",a=e.kind==="prefix"||r.kind==="prefix"?"prefix":e.kind==="postfix"||r.kind==="postfix"?"postfix":e.kind==="variadic"&&r.kind==="variadic"?"variadic":s||o?"prefix":e.kind==="defaultables"||r.kind==="defaultables"?"defaultables":"optionals";if(e.kind==="prefix"&&r.kind==="variadic"&&o){const p=We({...t,fixedVariants:[],r:i.map($=>({...$,kind:"prefix"}))});p.disjoint.length===0&&t.fixedVariants.push(p)}else if(r.kind==="prefix"&&e.kind==="variadic"&&s){const p=We({...t,fixedVariants:[],l:n.map($=>({...$,kind:"prefix"}))});p.disjoint.length===0&&t.fixedVariants.push(p)}const l=j(e.node,r.node,t.ctx);if(l instanceof m)if(a==="prefix"||a==="postfix")t.disjoint.push(...l.withPrefixKey(a==="prefix"?t.result.length:`-${n.length+1}`,"required")),t.result=[...t.result,{kind:a,node:f.intrinsic.never.internal}];else return a==="optionals"||a==="defaultables"?t:We({...t,fixedVariants:[],l:n.map(p=>({...p,kind:"prefix"})),r:n.map(p=>({...p,kind:"prefix"}))});else a==="defaultables"?(e.kind==="defaultables"&&r.kind==="defaultables"&&e.default!==r.default&&d(rs(e.default,r.default)),t.result=[...t.result,{kind:a,node:l,default:e.kind==="defaultables"?e.default:r.kind==="defaultables"?r.default:R(`Unexpected defaultable intersection from ${e.kind} and ${r.kind} elements.`)}]):t.result=[...t.result,{kind:a,node:l}];const c=t.l.length,u=t.r.length;return(e.kind!=="variadic"||c>=u&&(r.kind==="variadic"||u===1))&&(t.l=n),(r.kind!=="variadic"||u>=c&&(e.kind==="variadic"||c===1))&&(t.r=i),We(t)},ps=t=>e=>{if(e.props.length||e.index){const n=e.index?.map(i=>i[t])??[];for(const i of e.props)n.push(i[t]);e.undeclared&&n.push(`+ (undeclared): ${e.undeclared}`);const r=`{ ${n.join(", ")} }`;return e.sequence?`${r} & ${e.sequence.description}`:r}return e.sequence?.description??"{}"},Fu=ps("description"),Au=ps("expression"),$r=(t,e,n)=>{const r=t.required?"required":"optional";if(!e.signature.allows(t.key))return null;const i=de(t.value,e.value,n);return i instanceof m?r==="optional"?n.node("optional",{key:t.key,value:f.intrinsic.never.internal}):i.withPrefixKey(t.key,t.kind):null},Ou=B({kind:"structure",hasAssociatedError:!1,normalize:t=>t,applyConfig:(t,e)=>!t.undeclared&&e.onUndeclaredKey!=="ignore"?{...t,undeclared:e.onUndeclaredKey}:t,keys:{required:{child:!0,parse:Y("required"),reduceIo:(t,e,n)=>{e.required=F(e.required,n.map(r=>r[t]))}},optional:{child:!0,parse:Y("optional"),reduceIo:(t,e,n)=>{if(t==="in"){e.optional=n.map(r=>r.in);return}for(const r of n)e[r.outProp.kind]=F(e[r.outProp.kind],r.outProp.out)}},index:{child:!0,parse:Y("index")},sequence:{child:!0,parse:Y("sequence")},undeclared:{parse:t=>t==="ignore"?void 0:t,reduceIo:(t,e,n)=>{n==="delete"&&(t==="in"?delete e.undeclared:e.undeclared="reject")}}},defaults:{description:Fu},intersections:{structure:(t,e,n)=>{const r={...t.inner},i={...e.inner},s=new m;if(t.undeclared){const l=t.keyof();for(const c of e.requiredKeys)l.allows(c)||s.add("presence",f.intrinsic.never.internal,e.propsByKey[c].value,{path:[c]});i.optional&&(i.optional=i.optional.filter(c=>l.allows(c.key))),i.index&&(i.index=i.index.flatMap(c=>{if(c.signature.extends(l))return c;const u=de(l,c.signature,n.$);if(u instanceof m)return[];const p=mn(u,c.value,n.$);return p.required&&(i.required=Ne(i.required,p.required)),p.optional&&(i.optional=Ne(i.optional,p.optional)),p.index??[]}))}if(e.undeclared){const l=e.keyof();for(const c of t.requiredKeys)l.allows(c)||s.add("presence",t.propsByKey[c].value,f.intrinsic.never.internal,{path:[c]});r.optional&&(r.optional=r.optional.filter(c=>l.allows(c.key))),r.index&&(r.index=r.index.flatMap(c=>{if(c.signature.extends(l))return c;const u=de(l,c.signature,n.$);if(u instanceof m)return[];const p=mn(u,c.value,n.$);return p.required&&(r.required=Ne(r.required,p.required)),p.optional&&(r.optional=Ne(r.optional,p.optional)),p.index??[]}))}const o={};(t.undeclared||e.undeclared)&&(o.undeclared=t.undeclared==="reject"||e.undeclared==="reject"?"reject":"delete");const a=Nt({kind:"structure",baseInner:o,l:It(r),r:It(i),roots:[],ctx:n});return a instanceof m&&s.push(...a),s.length?s:a}},reduce:(t,e)=>{if(t.index){if(!(t.required||t.optional))return;let n=!1;const r=t.required??[],i=t.optional??[],s=[...i];for(const o of t.index){for(const a of r){const l=$r(a,o,e);if(l instanceof m)return l}for(const[a,l]of i.entries()){const c=$r(l,o,e);if(c instanceof m)return c;c!==null&&(s[a]=c,n=!0)}}if(n)return e.node("structure",{...t,optional:s},{prereduced:!0})}}});class Cu extends Le{impliedBasis=f.intrinsic.object.internal;impliedSiblings=this.children.flatMap(e=>e.impliedSiblings??[]);props=Ne(this.required,this.optional);propsByKey=A(this.props,(e,n)=>[n.key,n]);propsByKeyReference=H(this.propsByKey);expression=Au(this);requiredKeys=this.required?.map(e=>e.key)??[];optionalKeys=this.optional?.map(e=>e.key)??[];literalKeys=[...this.requiredKeys,...this.optionalKeys];_keyof;keyof(){if(this._keyof)return this._keyof;let e=this.$.units(this.literalKeys).branches;if(this.index)for(const{signature:n}of this.index)e=e.concat(n.branches);return this._keyof=this.$.node("union",e)}map(e){return this.$.node("structure",this.props.flatMap(e).reduce((n,r)=>{const i=this.propsByKey[r.key];if(J(r))return r.kind!=="required"&&r.kind!=="optional"?d(`Map result must have kind "required" or "optional" (was ${r.kind})`):(n[r.kind]=F(n[r.kind],r),n);const s=r.kind??i?.kind??"required",o=A(r,(a,l)=>a in qn.implementation.keys?[a,l]:[]);return n[s]=F(n[s],this.$.node(s,o)),n},{}))}assertHasKeys(e){const n=e.filter(r=>!bt(r,this.keyof()));if(n.length)return d(wr(this.expression,n))}get(e,...n){let r,i=!1;const s=qu(e);if((typeof s=="string"||typeof s=="symbol")&&this.propsByKey[s]&&(r=this.propsByKey[s].value,i=this.propsByKey[s].required),this.index)for(const a of this.index)bt(s,a.signature)&&(r=r?.and(a.value)??a.value);if(this.sequence&&bt(s,f.intrinsic.nonNegativeIntegerString))if(b(s,"root"))this.sequence.variadic&&(r=r?.and(this.sequence.element)??this.sequence.element);else{const a=Number.parseInt(s);if(a<this.sequence.prevariadic.length){const l=this.sequence.prevariadic[a].node;r=r?.and(l)??l,i||=a<this.sequence.prefixLength}else if(this.sequence.variadic){const l=this.$.node("union",this.sequence.variadicOrPostfix);r=r?.and(l)??l}}if(!r)return this.sequence?.variadic&&b(s,"root")&&s.extends(f.intrinsic.number)?d(Ru(s.expression,this.sequence.expression)):d(wr(this.expression,[s]));const o=r.get(...n);return i?o:o.or(f.intrinsic.undefined)}pick(...e){return this.assertHasKeys(e),this.$.node("structure",this.filterKeys("pick",e))}omit(...e){return this.assertHasKeys(e),this.$.node("structure",this.filterKeys("omit",e))}optionalize(){const{required:e,...n}=this.inner;return this.$.node("structure",{...n,optional:this.props.map(r=>r.hasKind("required")?this.$.node("optional",r.inner):r)})}require(){const{optional:e,...n}=this.inner;return this.$.node("structure",{...n,required:this.props.map(r=>r.hasKind("optional")?{key:r.key,value:r.value}:r)})}merge(e){const n=this.filterKeys("omit",[e.keyof()]);return e.required&&(n.required=F(n.required,e.required)),e.optional&&(n.optional=F(n.optional,e.optional)),e.index&&(n.index=F(n.index,e.index)),e.sequence&&(n.sequence=e.sequence),e.undeclared?n.undeclared=e.undeclared:delete n.undeclared,this.$.node("structure",n)}filterKeys(e,n){const r=Mi(this.inner),i=s=>{const o=n.some(a=>bt(s,a));return e==="pick"?o:!o};return r.required&&(r.required=r.required.filter(s=>i(s.key))),r.optional&&(r.optional=r.optional.filter(s=>i(s.key))),r.index&&(r.index=r.index.filter(s=>i(s.signature))),r}traverseAllows=(e,n)=>this._traverse("Allows",e,n);traverseApply=(e,n)=>this._traverse("Apply",e,n);_traverse=(e,n,r)=>{const i=r?.currentErrorCount??0;for(let s=0;s<this.props.length;s++)if(e==="Allows"){if(!this.props[s].traverseAllows(n,r))return!1}else if(this.props[s].traverseApply(n,r),r.failFast&&r.currentErrorCount>i)return!1;if(this.sequence){if(e==="Allows"){if(!this.sequence.traverseAllows(n,r))return!1}else if(this.sequence.traverseApply(n,r),r.failFast&&r.currentErrorCount>i)return!1}if(this.index||this.undeclared==="reject"){const s=Object.keys(n);s.push(...Object.getOwnPropertySymbols(n));for(let o=0;o<s.length;o++){const a=s[o];if(this.index){for(const l of this.index)if(l.signature.traverseAllows(a,r)){if(e==="Allows"){if(!ue(a,()=>l.value.traverseAllows(n[a],r),r))return!1}else if(ue(a,()=>l.value.traverseApply(n[a],r),r),r.failFast&&r.currentErrorCount>i)return!1}}if(this.undeclared==="reject"&&!this.declaresKey(a)&&(e==="Allows"||(r.errorFromNodeContext({code:"predicate",expected:"removed",actual:"",relativePath:[a],meta:this.meta}),r.failFast)))return!1}}return this.structuralMorph&&r&&!r.hasError()&&r.queueMorphs([this.structuralMorph]),!0};get defaultable(){return this.cacheGetter("defaultable",this.optional?.filter(e=>e.hasDefault())??[])}declaresKey=e=>e in this.propsByKey||this.index?.some(n=>n.signature.allows(e))||this.sequence!==void 0&&f.intrinsic.nonNegativeIntegerString.allows(e);_compileDeclaresKey(e){const n=[];if(this.props.length&&n.push(`k in ${this.propsByKeyReference}`),this.index)for(const r of this.index)n.push(e.invoke(r.signature,{kind:"Allows",arg:"k"}));return this.sequence&&n.push("$ark.intrinsic.nonNegativeIntegerString.allows(k)"),n.join(" || ")||"false"}get structuralMorph(){return this.cacheGetter("structuralMorph",Bu(this))}structuralMorphRef=this.structuralMorph&&H(this.structuralMorph);compile(e){e.traversalKind==="Apply"&&e.initializeErrorCount();for(const n of this.props)e.check(n),e.traversalKind==="Apply"&&e.returnIfFailFast();if(this.sequence&&(e.check(this.sequence),e.traversalKind==="Apply"&&e.returnIfFailFast()),(this.index||this.undeclared==="reject")&&(e.const("keys","Object.keys(data)"),e.line("keys.push(...Object.getOwnPropertySymbols(data))"),e.for("i < keys.length",()=>this.compileExhaustiveEntry(e))),e.traversalKind==="Allows")return e.return(!0);this.structuralMorphRef&&e.if("ctx && !ctx.hasError()",()=>(e.line("ctx.queueMorphs(["),Du(e,this),e.line("])")))}compileExhaustiveEntry(e){if(e.const("k","keys[i]"),this.index)for(const n of this.index)e.if(`${e.invoke(n.signature,{arg:"k",kind:"Allows"})}`,()=>e.traverseKey("k","data[k]",n.value));return this.undeclared==="reject"&&e.if(`!(${this._compileDeclaresKey(e)})`,()=>e.traversalKind==="Allows"?e.return(!1):e.line(`ctx.errorFromNodeContext({ code: "predicate", expected: "removed", actual: "", relativePath: [k], meta: ${this.compiledMeta} })`).if("ctx.failFast",()=>e.return())),e}reduceJsonSchema(e,n){switch(e.type){case"object":return this.reduceObjectJsonSchema(e,n);case"array":const r=this.sequence?.reduceJsonSchema(e,n)??e;return this.props.length||this.index?n.fallback.arrayObject({code:"arrayObject",base:r,object:this.reduceObjectJsonSchema({type:"object"},n)}):r;default:return K.throwInternalOperandError("structure",e)}}reduceObjectJsonSchema(e,n){if(this.props.length){e.properties={};for(const r of this.props){const i=r.value.toJsonSchemaRecurse(n);if(typeof r.key=="symbol"){n.fallback.symbolKey({code:"symbolKey",base:e,key:r.key,value:i,optional:r.optional});continue}if(r.hasDefault()){const s=typeof r.default=="function"?r.default():r.default;i.default=f.intrinsic.jsonData.allows(s)?s:n.fallback.defaultValue({code:"defaultValue",base:i,value:s})}e.properties[r.key]=i}this.requiredKeys.length&&e.properties&&(e.required=this.requiredKeys.filter(r=>typeof r=="string"&&r in e.properties))}if(this.index)for(const r of this.index){const i=r.value.toJsonSchemaRecurse(n);if(r.signature.equals(f.intrinsic.string)){e.additionalProperties=i;continue}for(const s of r.signature.branches){if(!s.extends(f.intrinsic.string)){e=n.fallback.symbolKey({code:"symbolKey",base:e,key:null,value:i,optional:!1});continue}let o={type:"string"};if(s.hasKind("morph")&&(o=n.fallback.morph({code:"morph",base:s.in.toJsonSchemaRecurse(n),out:s.out.toJsonSchemaRecurse(n)})),!s.hasKind("intersection"))return R(`Unexpected index branch kind ${s.kind}.`);const{pattern:a}=s.inner;if(a){const l=Object.assign(o,{pattern:a[0].rule});for(let c=1;c<a.length;c++)o=n.fallback.patternIntersection({code:"patternIntersection",base:l,pattern:a[c].rule});e.patternProperties??={},e.patternProperties[l.pattern]=i}}}return this.undeclared&&!e.additionalProperties&&(e.additionalProperties=!1),e}}const Yt={},Mu=t=>{let e="";for(let n=0;n<t.defaultable.length;n++)e+=t.defaultable[n].defaultValueMorphRef;if(t.sequence?.defaultValueMorphsReference&&(e+=t.sequence?.defaultValueMorphsReference),t.undeclared==="delete"){if(e+="delete !(",t.required)for(const n of t.required)e+=n.compiledKey+" | ";if(t.optional)for(const n of t.optional)e+=n.compiledKey+" | ";if(t.index)for(const n of t.index)e+=n.signature.id+" | ";if(t.sequence)if(t.sequence.maxLength===null)e+=y.nonNegativeIntegerString.id;else for(let n=0;n<t.sequence.tuple.length;n++)e+=n+" | ";e+=")"}return e},Bu=t=>{const e=Mu(t);if(!e)return;if(Yt[e])return Yt[e];const n=(r,i)=>{for(let s=0;s<t.defaultable.length;s++)t.defaultable[s].key in r||t.defaultable[s].defaultValueMorph(r,i);if(t.sequence?.defaultables)for(let s=r.length-t.sequence.prefixLength;s<t.sequence.defaultables.length;s++)t.sequence.defaultValueMorphs[s](r,i);if(t.undeclared==="delete")for(const s in r)t.declaresKey(s)||delete r[s];return r};return Yt[e]=n},Du=(t,e)=>{const r=`(data${e.defaultable.some(i=>i.defaultValueMorph.length===2)||e.sequence?.defaultValueMorphs.some(i=>i.length===2)?", ctx":""})`;return t.block(`${r} => `,i=>{for(let s=0;s<e.defaultable.length;s++){const{serializedKey:o,defaultValueMorphRef:a}=e.defaultable[s];i.if(`!(${o} in data)`,l=>l.line(`${a}${r}`))}return e.sequence?.defaultables&&i.for(`i < ${e.sequence.defaultables.length}`,s=>s.set("data[i]",5),`data.length - ${e.sequence.prefixLength}`),e.undeclared==="delete"&&i.forIn("data",s=>s.if(`!(${e._compileDeclaresKey(s)})`,o=>o.line("delete data[k]"))),i.return("data")})},ms={implementation:Ou,Node:Cu},qu=t=>(b(t,"root")&&t.hasKind("unit")&&(t=t.unit),typeof t=="number"&&(t=`${t}`),t),Ru=(t,e)=>`${t} is not allowed as an array index on ${e}. Use the 'nonNegativeIntegerString' keyword instead.`,mn=(t,e,n)=>{const[r,i]=Ma(t.branches,o=>o.hasKind("unit"));if(!r.length)return{index:n.node("index",{signature:t,value:e})};const s={};for(const o of r){const a=n.node("required",{key:o.unit,value:e});s[a.kind]=F(s[a.kind],a)}return i.length&&(s.index=n.node("index",{signature:i,value:e})),s},Ku=t=>b(t,"root")?t.expression:I(t),wr=(t,e)=>`Key${e.length===1?"":"s"} ${e.map(Ku).join(", ")} ${e.length===1?"does":"do"} not exist on ${t}`,Tt={...Sc,alias:Kn.implementation,domain:Tn.implementation,unit:cs.implementation,proto:At.implementation,union:ls.implementation,morph:os.implementation,intersection:ss.implementation,divisor:ji.implementation,pattern:Qi.implementation,predicate:Pi.implementation,required:ds.implementation,optional:qn.implementation,index:us.implementation,sequence:hs.implementation,structure:ms.implementation};f.defaultConfig=La(Object.assign(A(Tt,(t,e)=>[t,e.defaults]),{jitless:Qa(),clone:Za,onUndeclaredKey:"ignore",exactOptionalPropertyTypes:!0,numberAllowsNaN:!1,dateAllowsInvalid:!1,onFail:null,keywords:{},toJsonSchema:K.defaultConfig}));f.resolvedConfig=un(f.defaultConfig,f.config);const _u={...Nc,alias:Kn.Node,domain:Tn.Node,unit:cs.Node,proto:At.Node,union:ls.Node,morph:os.Node,intersection:ss.Node,divisor:ji.Node,pattern:Qi.Node,predicate:Pi.Node,required:ds.Node,optional:qn.Node,index:us.Node,sequence:hs.Node,structure:ms.Node};class gn extends Ta{get[ce](){return"module"}}const gs=(t,e)=>new gn(A(t,(n,r)=>[n,b(r,"module")?gs(r,e):e.bindReference(r)])),Tu=t=>U(t)?t:"branches"in t&&U(t.branches)?t.branches:void 0,Eu=(t,e)=>d(`Node of kind ${e} is not valid as a ${t} definition`),kr=t=>`#${t} duplicates public alias ${t}`,Xt={};f.ambient??={};let Sr;const bs="function $",Pu=t=>ys(t,vs(t)),ys=(t,e)=>{const n=e.write(bs,4),r=e.compile()();for(const i of t)i.precompilation||(i.traverseAllows=r[`${i.id}Allows`].bind(r),i.isRoot()&&!i.allowsRequiresContext&&(i.allows=i.traverseAllows),i.traverseApply=r[`${i.id}Apply`].bind(r),r[`${i.id}Optimistic`]&&(i.traverseOptimistic=r[`${i.id}Optimistic`].bind(r)),i.precompilation=n)},vs=t=>new Ai().return(t.reduce((e,n)=>{const r=new Wt({kind:"Allows"}).indent();n.compile(r);const i=r.write(`${n.id}Allows`),s=new Wt({kind:"Apply"}).indent();n.compile(s);const o=s.write(`${n.id}Apply`),a=`${e}${i},
${o},
`;if(!n.hasKind("union"))return a;const l=new Wt({kind:"Allows",optimistic:!0}).indent();n.compile(l);const c=l.write(`${n.id}Optimistic`);return`${a}${c},
`},`{
`)+"}");class xs{config;resolvedConfig;name;get[ce](){return"scope"}referencesById={};references=[];resolutions={};exportedNames=[];aliases={};resolved=!1;nodesByHash={};intrinsic;constructor(e,n){this.config=un(f.config,n),this.resolvedConfig=un(f.resolvedConfig,n),this.name=this.resolvedConfig.name??`anonymousScope${Object.keys(Xt).length}`,this.name in Xt&&d(`A Scope already named ${this.name} already exists`),Xt[this.name]=this;const r=Object.entries(e).map(i=>this.preparseOwnAliasEntry(...i));for(const[i,s]of r){let o=i;if(i[0]==="#"?(o=i.slice(1),o in this.aliases&&d(kr(o)),this.aliases[o]=s):(o in this.aliases&&d(kr(i)),this.aliases[o]=s,this.exportedNames.push(o)),!b(s,"module")&&!b(s,"generic")&&!Bt(s)){const a=this.preparseOwnDefinitionFormat(s,{alias:o});this.resolutions[o]=b(a,"root")?this.bindReference(a):this.createParseContext(a).id}}Sr??=this.node("union",{branches:["string","number","object","bigint","symbol",{unit:!0},{unit:!1},{unit:void 0},{unit:null}]},{prereduced:!0}),this.nodesByHash[Sr.hash]=this.node("intersection",{},{prereduced:!0}),this.intrinsic=f.intrinsic?A(f.intrinsic,(i,s)=>i.startsWith("json")?[]:[i,this.bindReference(s)]):{}}cacheGetter(e,n){return Object.defineProperty(this,e,{value:n}),n}get internal(){return this}_json;get json(){return this._json||this.export(),this._json}defineSchema(e){return e}generic=(...e)=>{const n=this;return(r,i)=>new Ft(e,i?new Ei(r):r,n,n,i??null)};units=(e,n)=>{const r=[];for(const s of e)r.includes(s)||r.push(s);const i=r.map(s=>this.node("unit",{unit:s},n));return this.node("union",i,{...n,prereduced:!0})};lazyResolutions=[];lazilyResolve(e,n){const r=this.node("alias",{reference:n??"synthetic",resolve:e},{prereduced:!0});return this.resolved||this.lazyResolutions.push(r),r}schema=(e,n)=>this.finalize(this.parseSchema(e,n));parseSchema=(e,n)=>this.node(xt(e),e,n);preparseNode(e,n,r){let i=typeof e=="string"?e:xt(n,e);if(J(n)&&n.kind===i)return n;if(i==="alias"&&!r?.prereduced){const{reference:a}=Kn.implementation.normalize(n,this);if(a.startsWith("$")){const l=this.resolveRoot(a.slice(1));n=l,i=l.kind}}else if(i==="union"&&Oe(n,"object")){const a=Tu(n);a?.length===1&&(n=a[0],i=xt(n))}if(J(n)&&n.kind===i)return n;const o=Tt[i].normalize?.(n,this)??n;return J(o)?o.kind===i?o:Eu(i,o.kind):{...r,$:this,kind:i,def:o,prefix:r.alias??i}}bindReference(e){let n;return J(e)?n=e.$===this?e:new e.constructor(e.attachments,this):n=e.$===this?e:new Ft(e.params,e.bodyDef,e.$,this,e.hkt),this.resolved||Object.assign(this.referencesById,n.referencesById),n}resolveRoot(e){return this.maybeResolveRoot(e)??d(Ss(e))}maybeResolveRoot(e){const n=this.maybeResolve(e);if(!b(n,"generic"))return n}maybeResolveSubalias(e){return bn(this.aliases,e)??bn(this.ambient,e)}get ambient(){return f.ambient}maybeResolve(e){const n=this.resolutions[e];if(n){if(typeof n!="string")return this.bindReference(n);const i=te[n];if(b(i,"root"))return this.resolutions[e]=i;if(b(i,"context")){if(i.phase==="resolving")return this.node("alias",{reference:`$${e}`},{prereduced:!0});if(i.phase==="resolved")return R(`Unexpected resolved context for was uncached by its scope: ${I(i)}`);i.phase="resolving";const s=this.bindReference(this.parseOwnDefinitionFormat(i.def,i));return i.phase="resolved",te[s.id]=s,te[i.id]=s,this.resolutions[e]=s}return R(`Unexpected nodesById entry for ${n}: ${I(i)}`)}let r=this.aliases[e]??this.ambient?.[e];return r?(r=this.normalizeRootScopeValue(r),b(r,"generic")?this.resolutions[e]=this.bindReference(r):b(r,"module")?(r.root||d(Ns(e)),this.resolutions[e]=this.bindReference(r.root)):this.resolutions[e]=this.parse(r,{alias:e})):this.maybeResolveSubalias(e)}createParseContext(e){const n=e.id??es(e.prefix);return te[n]=Object.assign(e,{[ce]:"context",$:this,id:n,phase:"unresolved"})}traversal(e){return new De(e,this.resolvedConfig)}import(...e){return new gn(A(this.export(...e),(n,r)=>[`#${n}`,r]))}precompilation;_exportedResolutions;_exports;export(...e){if(!this._exports){this._exports={};for(const r of this.exportedNames){const i=this.aliases[r];this._exports[r]=b(i,"module")?gs(i,this):Nr(this.maybeResolve(r))}for(const r of this.lazyResolutions)r.resolution;if(this._exportedResolutions=ks(this,this._exports),this._json=ws(this._exportedResolutions),Object.assign(this.resolutions,this._exportedResolutions),this.references=Object.values(this.referencesById),!this.resolvedConfig.jitless){const r=vs(this.references);this.precompilation=r.write(bs,4),ys(this.references,r)}this.resolved=!0}const n=e.length?e:this.exportedNames;return new gn(A(n,(r,i)=>[i,this._exports[i]]))}resolve(e){return this.export()[e]}node=(e,n,r={})=>{const i=this.preparseNode(e,n,r);if(J(i))return this.bindReference(i);const s=this.createParseContext(i),o=ts(s),a=this.bindReference(o);return te[s.id]=a};parse=(e,n={})=>this.finalize(this.parseDefinition(e,n));parseDefinition(e,n={}){if(b(e,"root"))return this.bindReference(e);const r=this.preparseOwnDefinitionFormat(e,n);if(b(r,"root"))return this.bindReference(r);const i=this.createParseContext(r);te[i.id]=i;let s=this.bindReference(this.parseOwnDefinitionFormat(e,i));return s.isCyclic&&(s=Cc(s,i.id)),te[i.id]=s,s}finalize(e){return Nr(e),!e.precompilation&&!this.resolvedConfig.jitless&&Pu(e.references),e}}class $s extends xs{parseOwnDefinitionFormat(e,n){return ts(n)}preparseOwnDefinitionFormat(e,n){return this.preparseNode(xt(e),e,n)}preparseOwnAliasEntry(e,n){return[e,n]}normalizeRootScopeValue(e){return e}}const Nr=t=>{const e=t.references.filter(n=>n.hasKind("alias"));for(const n of e){Object.assign(n.referencesById,n.resolution.referencesById);for(const r of t.references)n.id in r.referencesById&&Object.assign(r.referencesById,n.referencesById)}return t},ws=t=>A(t,(e,n)=>[e,b(n,"root")||b(n,"generic")?n.json:b(n,"module")?ws(n):R(`Unexpected resolution ${I(n)}`)]),bn=(t,e)=>{const n=e.indexOf(".");if(n===-1)return;const r=e.slice(0,n),i=t[r];if(i===void 0)return;if(!b(i,"module"))return d(ju(r));const s=e.slice(n+1),o=i[s];if(o===void 0)return bn(i,s);if(b(o,"root")||b(o,"generic"))return o;if(b(o,"module"))return o.root??d(Ns(e));R(`Unexpected resolution for alias '${e}': ${I(o)}`)},En=(t,e)=>new $s(t,e),dt=new $s({}),ks=(t,e)=>{const n={};for(const r in e){const i=e[r];if(b(i,"module")){const s=ks(t,i),o=A(s,(a,l)=>[`${r}.${a}`,l]);Object.assign(n,o)}else b(i,"root")||b(i,"generic")?n[r]=i:R(`Unexpected scope resolution ${I(i)}`)}return n},Ss=t=>`'${t}' is unresolvable`,ju=t=>`'${t}' must reference a module to be accessed using dot syntax`,Ns=t=>`Reference to submodule '${t}' must specify an alias`;dt.export();const O=dt.schema,Pn=dt.node;dt.defineSchema;const he=dt.generic,Is="^(?:0|[1-9]\\d*)$",zu=new RegExp(Is);H(zu);const Fs=En({bigint:"bigint",boolean:[{unit:!1},{unit:!0}],false:{unit:!1},never:[],null:{unit:null},number:"number",object:"object",string:"string",symbol:"symbol",true:{unit:!0},unknown:{},undefined:{unit:void 0},Array,Date},{prereducedAliases:!0}).export();f.intrinsic={...Fs};const As=En({integer:{domain:"number",divisor:1},lengthBoundable:["string",Array],key:["string","symbol"],nonNegativeIntegerString:{domain:"string",pattern:Is}},{prereducedAliases:!0}).export();Object.assign(f.intrinsic,As);const Lu=En({jsonPrimitive:["string","number",{unit:!0},{unit:!1},{unit:null}],jsonObject:{domain:"object",index:{signature:"string",value:"$jsonData"}},jsonData:["$jsonPrimitive","$jsonObject"]},{prereducedAliases:!0}).export(),y={...Fs,...As,...Lu,emptyStructure:Pn("structure",{},{prereduced:!0})};f.intrinsic={...y};const Uu=t=>typeof t=="string"&&t[0]==="d"&&(t[1]==="'"||t[1]==='"')&&t.at(-1)===t[1],Ir=t=>t.toString()!=="Invalid Date",Vu=t=>t.slice(2,-1),Os=t=>`'${t}' could not be parsed by the Date constructor`,Ju=(t,e)=>Hu(t,e),Hu=(t,e)=>{const n=new Date(t);if(Ir(n))return n;const r=bl(t);if(r!==void 0){const i=new Date(r);if(Ir(i))return i}return e?d(e===!0?Os(t):e):void 0},Fr=(t,e)=>{const n=t.scanner.shiftUntil(Wu[Ms[e]]);if(t.scanner.lookahead==="")return t.error(Yu(n,e));if(t.scanner.shift(),e==="/"){try{new RegExp(n)}catch(r){d(String(r))}t.root=t.ctx.$.node("intersection",{domain:"string",pattern:n},{prereduced:!0})}else if(se(e,Cs))t.root=t.ctx.$.node("unit",{unit:n});else{const r=Ju(n,Os(n));t.root=t.ctx.$.node("unit",{meta:n,unit:r})}},Cs={"'":1,'"':1},Gu={"/":1,"'":1,'"':1},Ms={"d'":"'",'d"':'"',"'":"'",'"':'"',"/":"/"},Wu={"'":t=>t.lookahead==="'",'"':t=>t.lookahead==='"',"/":t=>t.lookahead==="/"},Zu={'"':"double-quote","'":"single-quote","/":"forward slash"},Yu=(t,e)=>`${e}${t} requires a closing ${Zu[Ms[e]]}`,Xu=t=>`Private type references should not include '#'. Use '${t}' instead.`,Bs="Optional definitions like 'string?' are only valid as properties in an object or tuple",Ds="Defaultable definitions like 'number = 0' are only valid as properties in an object or tuple",Qu={">":!0,">=":!0},ed={"<":!0,"<=":!0},Ot={"<":">",">":"<","<=":">=",">=":"<=","==":"=="},td=t=>`Unmatched )${t===""?"":` before ${t}`}`,qs=t=>`Missing ${t}`,nd=(t,e)=>`Left bounds are only valid when paired with right bounds (try ...${e}${t})`,Rs=t=>`Left-bounded expressions must specify their limits using < or <= (was ${t})`,rd=(t,e,n,r)=>`An expression may have at most one left bound (parsed ${t}${Ot[e]}, ${n}${Ot[r]})`,id=(t,e,n)=>Ks(t,e,n,[]),Ks=(t,e,n,r)=>{const i=n.parseUntilFinalizer();return r.push(i.root),i.finalizer===">"?r.length!==e.params.length?n.error(_s(t,e.names,r.map(s=>s.expression))):r:i.finalizer===","?Ks(t,e,n,r):i.error(qs(">"))},_s=(t,e,n)=>`${t}<${e.join(", ")}> requires exactly ${e.length} args (got ${n.length}${n.length===0?"":`: ${n.join(", ")}`})`,Ar=t=>{const e=t.scanner.shiftUntilNextTerminator();e==="keyof"?t.addPrefix("keyof"):t.root=od(t,e)},sd=(t,e,n)=>{if(n.scanner.shiftUntilNonWhitespace(),n.scanner.shift()!=="<")return n.error(_s(t,e.names,[]));const i=id(t,e,n);return e(...i)},od=(t,e)=>ad(t,e)??ld(t,e)??t.error(e===""?t.scanner.lookahead==="#"?Xu(t.shiftedByOne().scanner.shiftUntilNextTerminator()):Ts(t):Ss(e)),ad=(t,e)=>{if(t.ctx.args?.[e]){const r=t.ctx.args[e];return typeof r!="string"?r:t.ctx.$.node("alias",{reference:r},{prereduced:!0})}const n=t.ctx.$.maybeResolve(e);if(b(n,"root"))return n;if(n!==void 0)return b(n,"generic")?sd(e,n,t):d(`Unexpected resolution ${I(n)}`)},ld=(t,e)=>{const n=yl(e);if(n!==void 0)return t.ctx.$.node("unit",{unit:n});const r=xl(e);if(r!==void 0)return t.ctx.$.node("unit",{unit:r})},Ts=t=>{const e=t.previousOperator();return e?Es(e,t.scanner.unscanned):cd(t.scanner.unscanned)},Es=(t,e="")=>`Token '${t}' requires a right operand${e?` before '${e}'`:""}`,cd=t=>`Expected an expression${t?` before '${t}'`:""}`,Ps=t=>t.scanner.lookahead===""?t.error(Ts(t)):t.scanner.lookahead==="("?t.shiftedByOne().reduceGroupOpen():t.scanner.lookaheadIsIn(Gu)?Fr(t,t.scanner.shift()):t.scanner.lookaheadIsIn(Dt)?Ps(t.shiftedByOne()):t.scanner.lookahead==="d"&&t.scanner.nextLookahead in Cs?Fr(t,`${t.scanner.shift()}${t.scanner.shift()}`):Ar(t);class je extends Al{shiftUntilNextTerminator(){return this.shiftUntilNonWhitespace(),this.shiftUntil(()=>this.lookahead in je.terminatingChars)}static terminatingChars={"<":1,">":1,"=":1,"|":1,"&":1,")":1,"[":1,"%":1,",":1,":":1,"?":1,"#":1,...Dt};static finalizingLookaheads={">":1,",":1,"":1,"=":1,"?":1};static lookaheadIsFinalizing=(e,n)=>e===">"?n[0]==="="?n[1]==="=":n.trimStart()===""||se(n.trimStart()[0],je.terminatingChars):e==="="?n[0]!=="=":e===","||e==="?"}const ud=(t,e)=>{const n=hd(t,e);if(t.root.hasKind("unit")){if(typeof t.root.unit=="number"){t.reduceLeftBound(t.root.unit,n),t.unsetRoot();return}if(t.root.unit instanceof Date){const r=`d'${t.root.description??t.root.unit.toISOString()}'`;t.unsetRoot(),t.reduceLeftBound(r,n);return}}return pd(t,n)},dd={"<":1,">":1,"=":1},hd=(t,e)=>t.scanner.lookaheadIs("=")?`${e}${t.scanner.shift()}`:e,Or=(t,e,n,r)=>n.extends(f.intrinsic.number)?typeof e!="number"?d(yn(t,e,r)):t==="=="?["min","max"]:t[0]===">"?["min"]:["max"]:n.extends(f.intrinsic.lengthBoundable)?typeof e!="number"?d(yn(t,e,r)):t==="=="?["exactLength"]:t[0]===">"?["minLength"]:["maxLength"]:n.extends(f.intrinsic.Date)?t==="=="?["after","before"]:t[0]===">"?["after"]:["before"]:d(cc(n.expression)),fd=t=>({rule:Uu(t.limit)?Vu(t.limit):t.limit,exclusive:t.comparator.length===1}),pd=(t,e)=>{const n=t.unsetRoot(),r=t.scanner.location;t.parseOperand();const i=t.unsetRoot(),s=t.scanner.sliceChars(r,t.scanner.location);if(t.root=n,!i.hasKind("unit")||typeof i.unit!="number"&&!(i.unit instanceof Date))return t.error(yn(e,s,"right"));const o=i.unit,a=e.length===1,l=Or(e,typeof o=="number"?o:s,n,"right");for(const u of l)t.constrainRoot(u,e==="=="?{rule:o}:{rule:o,exclusive:a});if(!t.branches.leftBound)return;if(!se(e,ed))return t.error(Rs(e));const c=Or(t.branches.leftBound.comparator,t.branches.leftBound.limit,n,"left");t.constrainRoot(c[0],fd(t.branches.leftBound)),t.branches.leftBound=null},yn=(t,e,n)=>`Comparator ${n==="left"?Ot[t]:t} must be ${n==="left"?"preceded":"followed"} by a corresponding literal (was ${e})`,md=t=>{t.scanner.shiftUntilNonWhitespace();const e=t.scanner.shiftUntilNextTerminator();t.root=t.root.brand(e)},gd=t=>{const e=t.scanner.shiftUntilNextTerminator(),n=vl(e,{errorOnFail:Cr(e)});n===0&&t.error(Cr(0)),t.root=t.root.constrain("divisor",n)},Cr=t=>`% operator must be followed by a non-zero integer literal (was ${t})`,js=t=>{const e=t.scanner.shift();return e===""?t.finalize(""):e==="["?t.scanner.shift()==="]"?t.setRoot(t.root.array()):t.error(bd):e==="|"?t.scanner.lookahead===">"?t.shiftedByOne().pushRootToBranch("|>"):t.pushRootToBranch(e):e==="&"?t.pushRootToBranch(e):e===")"?t.finalizeGroup():je.lookaheadIsFinalizing(e,t.scanner.unscanned)?t.finalize(e):se(e,dd)?ud(t,e):e==="%"?gd(t):e==="#"?md(t):e in Dt?js(t):t.error(jn(e))},jn=(t,e="")=>`'${t}' is not allowed here${e&&` (should be ${e})`}`,bd="Missing expected ']'",yd=t=>{const e=t.unsetRoot();t.parseOperand();const n=t.unsetRoot();if(!n.hasKind("unit"))return t.error(vd(n.expression));const r=n.unit instanceof Date?()=>new Date(n.unit):n.unit;return[e,"=",r]},vd=t=>`Default value '${t}' must a literal value`,Mr=(t,e)=>{const n=e.$.maybeResolveRoot(t);if(n)return n;if(t.endsWith("[]")){const s=e.$.maybeResolveRoot(t.slice(0,-2));if(s)return s.array()}const r=new Et(new je(t),e),i=xd(r);return r.finalizer===">"&&d(jn(">")),i},xd=t=>{t.parseOperand();let e=zn(t).root;return e?(t.finalizer==="="?e=yd(t):t.finalizer==="?"&&(e=[e,"?"]),t.scanner.shiftUntilNonWhitespace(),t.scanner.lookahead&&d(jn(t.scanner.lookahead)),e):R(`Root was unexpectedly unset after parsing string '${t.scanner.scanned}'`)},zn=t=>{for(;t.finalizer===void 0;)$d(t);return t},$d=t=>t.hasRoot()?t.parseOperator():t.parseOperand();class Et{root;branches={prefixes:[],leftBound:null,intersection:null,union:null,pipe:null};finalizer;groups=[];scanner;ctx;constructor(e,n){this.scanner=e,this.ctx=n}error(e){return d(e)}hasRoot(){return this.root!==void 0}setRoot(e){this.root=e}unsetRoot(){const e=this.root;return this.root=void 0,e}constrainRoot(...e){this.root=this.root.constrain(e[0],e[1])}finalize(e){if(this.groups.length)return this.error(qs(")"));this.finalizeBranches(),this.finalizer=e}reduceLeftBound(e,n){const r=Ot[n];if(!se(r,Qu))return this.error(Rs(n));if(this.branches.leftBound)return this.error(rd(this.branches.leftBound.limit,this.branches.leftBound.comparator,e,r));this.branches.leftBound={comparator:r,limit:e}}finalizeBranches(){if(this.assertRangeUnset(),this.branches.pipe){this.pushRootToBranch("|>"),this.root=this.branches.pipe;return}if(this.branches.union){this.pushRootToBranch("|"),this.root=this.branches.union;return}if(this.branches.intersection){this.pushRootToBranch("&"),this.root=this.branches.intersection;return}this.applyPrefixes()}finalizeGroup(){this.finalizeBranches();const e=this.groups.pop();if(!e)return this.error(td(this.scanner.unscanned));this.branches=e}addPrefix(e){this.branches.prefixes.push(e)}applyPrefixes(){for(;this.branches.prefixes.length;){const e=this.branches.prefixes.pop();this.root=e==="keyof"?this.root.keyof():R(`Unexpected prefix '${e}'`)}}pushRootToBranch(e){this.assertRangeUnset(),this.applyPrefixes();const n=this.root;this.root=void 0,this.branches.intersection=this.branches.intersection?.rawAnd(n)??n,e!=="&"&&(this.branches.union=this.branches.union?.rawOr(this.branches.intersection)??this.branches.intersection,this.branches.intersection=null,e!=="|"&&(this.branches.pipe=this.branches.pipe?.rawPipeOnce(this.branches.union)??this.branches.union,this.branches.union=null))}parseUntilFinalizer(){return zn(new Et(this.scanner,this.ctx))}parseOperator(){return js(this)}parseOperand(){return Ps(this)}assertRangeUnset(){if(this.branches.leftBound)return this.error(nd(this.branches.leftBound.limit,this.branches.leftBound.comparator))}reduceGroupOpen(){this.groups.push(this.branches),this.branches={prefixes:[],leftBound:null,union:null,intersection:null,pipe:null}}previousOperator(){return this.branches.leftBound?.comparator??this.branches.prefixes.at(-1)??(this.branches.intersection?"&":this.branches.union?"|":this.branches.pipe?"|>":void 0)}shiftedByOne(){return this.scanner.shift(),this}}const wd="An empty string is not a valid generic parameter name",vn=(t,e,n)=>{t.shiftUntilNonWhitespace();const r=t.shiftUntilNextTerminator();return r===""?t.lookahead===""&&e.length?e:d(wd):(t.shiftUntilNonWhitespace(),kd(t,r,e,n))},Br="extends ",kd=(t,e,n,r)=>{if(t.shiftUntilNonWhitespace(),t.unscanned.startsWith(Br))t.jumpForward(Br.length);else return t.lookahead===","&&t.shift(),n.push(e),vn(t,n,r);const i=zn(new Et(t,r));return n.push([e,i.root]),vn(t,n,r)};class Sd extends ze{$;constructor(e){super((...n)=>new yt(e)(...n),{bind:e}),this.$=e}in(e){return new yt(this.$,e===void 0?void 0:this.$.parse(e))}at(e,n){return new yt(this.$).at(e,n)}case(e,n){return new yt(this.$).case(e,n)}}class yt extends ze{$;in;key;branches=[];constructor(e,n){super(r=>this.caseEntries(Object.entries(r).map(([i,s])=>i==="default"?[i,s]:[this.$.parse(i),s]))),this.$=e,this.in=n}at(e,n){return this.key&&d(Id),this.branches.length&&d(Nd),this.key=e,n?this.match(n):this}case(e,n){return this.caseEntry(this.$.parse(e),n)}caseEntry(e,n){const i=(this.key?this.$.parse({[this.key]:e}):e).pipe(n);return this.branches.push(i),this}match(e){return this(e)}strings(e){return this.caseEntries(Object.entries(e).map(([n,r])=>n==="default"?[n,r]:[this.$.node("unit",{unit:n}),r]))}caseEntries(e){for(let n=0;n<e.length;n++){const[r,i]=e[n];if(r==="default")return n!==e.length-1&&d("default may only be specified as the last key of a switch definition"),this.default(i);if(typeof i!="function")return d(`Value for case "${r}" must be a function (was ${re(i)})`);this.caseEntry(r,i)}return this}default(e){typeof e=="function"&&this.case(y.unknown,e);const n={branches:this.branches,ordered:!0};(e==="never"||e==="assert")&&(n.meta={onFail:Dr});const r=this.$.node("union",n);if(!this.in)return this.$.finalize(r);let i=this.in.pipe(r);return(e==="never"||e==="assert")&&(i=i.configureReferences({onFail:Dr},"self")),this.$.finalize(i)}}const Dr=t=>t.throw(),Nd="A key matcher must be specified before the first case i.e. match.at('foo') or match.in<object>().at('bar')",Id="At most one key matcher may be specified per expression",zs=(t,e)=>{if(U(t)){if(t[1]==="=")return[e.$.parseOwnDefinitionFormat(t[0],e),"=",t[2]];if(t[1]==="?")return[e.$.parseOwnDefinitionFormat(t[0],e),"?"]}return Ws(t,e)},Fd="Only required keys may make their values optional, e.g. { [mySymbol]: ['number', '?'] }",Ad="Only required keys may specify default values, e.g. { value: 'number = 0' }",Od=(t,e)=>{let n;const r={},i=$t(t);for(const[o,a]of i){const l=Bd(o);if(l.kind==="spread"){if(!it(r))return d(Md);const w=e.$.parseOwnDefinitionFormat(a,e);if(w.equals(y.object))continue;if(!w.hasKind("intersection")||!w.basis?.equals(y.object))return d(Dd(w.expression));n=w.structure;continue}if(l.kind==="undeclared"){a!=="reject"&&a!=="delete"&&a!=="ignore"&&d(Cd(a)),r.undeclared=a;continue}const c=zs(a,e),u=l;if(l.kind==="required"){U(c)?Qt(r,"optional",c[1]==="="?{key:l.normalized,value:c[0],default:c[2]}:{key:l.normalized,value:c[0]},e):Qt(r,"required",{key:l.normalized,value:c},e);continue}if(U(c)&&(c[1]==="?"&&d(Fd),c[1]==="="&&d(Ad)),l.kind==="optional"){Qt(r,"optional",{key:l.normalized,value:c},e);continue}const p=e.$.parseOwnDefinitionFormat(u.normalized,e),$=mn(p,c,e.$);$.index&&(r.index=F(r.index,$.index)),$.required&&(r.required=F(r.required,$.required))}const s=e.$.node("structure",r);return e.$.parseSchema({domain:"object",structure:n?.merge(s)??s})},Qt=(t,e,n,r)=>{t[e]=F(t[e],r.$.node(e,n))},Cd=t=>`Value of '+' key must be 'reject', 'delete', or 'ignore' (was ${I(t)})`,Md="Spread operator may only be used as the first key in an object",Bd=t=>typeof t=="symbol"?{kind:"required",normalized:t}:t.at(-1)==="?"?t.at(-2)===sn?{kind:"required",normalized:`${t.slice(0,-2)}?`}:{kind:"optional",normalized:t.slice(0,-1)}:t[0]==="["&&t.at(-1)==="]"?{kind:"index",normalized:t.slice(1,-1)}:t[0]===sn&&t[1]==="["&&t.at(-1)==="]"?{kind:"required",normalized:t.slice(1)}:t==="..."?{kind:"spread"}:t==="+"?{kind:"undeclared"}:{kind:"required",normalized:t==="\\..."?"...":t==="\\+"?"+":t},Dd=t=>`Spread operand must resolve to an object literal type (was ${t})`,qd=(t,e)=>Ud(t)?Js[t[0]](t,e):zd(t)?Vs[t[1]](t,e):null,Rd=(t,e)=>e.$.parseOwnDefinitionFormat(t[1],e).keyof(),en=(t,e)=>{if(t[2]===void 0)return d(Es(t[1],""));const n=e.$.parseOwnDefinitionFormat(t[0],e),r=e.$.parseOwnDefinitionFormat(t[2],e);if(t[1]==="|")return e.$.node("union",{branches:[n,r]});const i=t[1]==="&"?de(n,r,e.$):hn(n,r,e.$);return i instanceof m?i.throw():i},Kd=(t,e)=>e.$.parseOwnDefinitionFormat(t[0],e).array(),_d=(t,e)=>typeof t[2]!="function"?d(Ls("=>",t[2])):e.$.parseOwnDefinitionFormat(t[0],e).pipe(t[2]),Ls=(t,e)=>`${t===":"?"Narrow":"Morph"} expression requires a function following '${t}' (was ${typeof e})`,Td=(t,e)=>typeof t[2]!="function"?d(Ls(":",t[2])):e.$.parseOwnDefinitionFormat(t[0],e).constrain("predicate",t[2]),Ed=(t,e)=>e.$.parseOwnDefinitionFormat(t[0],e).configureReferences(t[2],"shallow"),Us=t=>t,Pd=Us({"[]":Kd,"?":()=>d(Bs)}),jd=Us({"|":en,"&":en,":":Td,"=>":_d,"|>":en,"@":Ed,"=":()=>d(Ds)}),Vs={...Pd,...jd},zd=t=>Vs[t[1]]!==void 0,Ld=t=>t,Js=Ld({keyof:Rd,instanceof:(t,e)=>{if(typeof t[1]!="function")return d(qr(rn(t[1])));const n=t.slice(1).map(r=>typeof r=="function"?e.$.node("proto",{proto:r}):d(qr(rn(r))));return n.length===1?n[0]:e.$.node("union",{branches:n})},"===":(t,e)=>e.$.units(t.slice(1))}),Ud=t=>Js[t[0]]!==void 0,qr=t=>`Expected a constructor following 'instanceof' operator (was ${t})`,Vd=(t,e)=>{let n=[{}],r=0;for(;r<t.length;){let i=!1;t[r]==="..."&&r<t.length-1&&(i=!0,r++);const s=zs(t[r],e),[o,a,l]=U(s)?s:[s];if(r++,i){if(!o.extends(f.intrinsic.Array))return d(Gd(o.expression));n=n.flatMap(c=>o.distribute(u=>Hd(Mi(c),u)))}else n=n.map(c=>a==="?"?Hs(c,o):a==="="?Jd(c,o,l):xn(c,o))}return e.$.parseSchema(n.map(i=>it(i)?{proto:Array,exactLength:0}:{proto:Array,sequence:i}))},xn=(t,e)=>t.defaultables||t.optionals?d(t.variadic?fs:Wd):(t.variadic?t.postfix=F(t.postfix,e):t.prefix=F(t.prefix,e),t),Hs=(t,e)=>t.variadic?d(Gs):(t.optionals=F(t.optionals,e),t),Jd=(t,e,n)=>t.variadic?d(Gs):t.optionals?d(Zd):(t.defaultables=F(t.defaultables,[[e,n]]),t),Rr=(t,e)=>(t.postfix&&d(Kr),t.variadic?t.variadic.equals(e)||d(Kr):t.variadic=e.internal,t),Hd=(t,e)=>{const n=e.select({method:"find",kind:"sequence"});if(!n)return Rr(t,f.intrinsic.unknown);if(n.prefix)for(const r of n.prefix)xn(t,r);if(n.optionals)for(const r of n.optionals)Hs(t,r);if(n.variadic&&Rr(t,n.variadic),n.postfix)for(const r of n.postfix)xn(t,r);return t},Gd=t=>`Spread element must be an array (was ${t})`,Kr="A tuple may have at most one variadic element",Wd="A required element may not follow an optional element",Gs="An optional element may not follow a variadic element",Zd="A defaultable element may not follow an optional element without a default",Yd={},Ws=(t,e)=>{if(typeof t=="string"){if(e.args&&Object.keys(e.args).some(r=>t.includes(r)))return Mr(t,e);const n=Yd[e.$.name]??={};return n[t]??=Mr(t,e)}return Oe(t,"object")?Xd(t,e):d($n(re(t)))},Xd=(t,e)=>{const n=In(t);switch(n){case void 0:return b(t,"root")?t:Od(t,e);case"Array":return Qd(t,e);case"RegExp":return e.$.node("intersection",{domain:"string",pattern:t},{prereduced:!0});case"Function":{const r=Bt(t)?t():t;return b(r,"root")?r:d($n("Function"))}default:return d($n(n??I(t)))}},Qd=(t,e)=>qd(t,e)??Vd(t,e),$n=t=>`Type definitions must be strings or objects (was ${t})`;class eh extends ze{constructor(e){const n=Object.assign({errors:xe,hkt:oe,$:e,raw:e.parse,module:e.constructor.module,scope:e.constructor.scope,define:e.define,match:e.match,generic:e.generic,schema:e.schema,keywords:e.ambient,unit:e.unit,enumerated:e.enumerated,instanceOf:e.instanceOf,valueOf:e.valueOf,or:e.or,and:e.and,merge:e.merge,pipe:e.pipe},e.ambientAttachments);super((...r)=>{if(r.length===1)return e.parse(r[0]);if(r.length===2&&typeof r[0]=="string"&&r[0][0]==="<"&&r[0].at(-1)===">"){const i=r[0].slice(1,-1),s=e.parseGenericParams(i,{});return new Ft(s,r[1],e,e,null)}return e.parse(r)},{bind:e,attach:n})}}const nt=f;class Pt extends xs{get ambientAttachments(){if(nt.typeAttachments)return this.cacheGetter("ambientAttachments",A(nt.typeAttachments,(e,n)=>[e,this.bindReference(n)]))}preparseOwnAliasEntry(e,n){const r=e.indexOf("<");if(r===-1){if(b(n,"module")||b(n,"generic"))return[e,n];const o=this.name==="ark"?e:e==="root"?this.name:`${this.name}.${e}`,a=this.resolvedConfig.keywords?.[o];return a&&(n=[n,"@",a]),[e,n]}e.at(-1)!==">"&&d("'>' must be the last character of a generic declaration in a scope");const i=e.slice(0,r),s=e.slice(r+1,-1);return[i,()=>{const o=this.parseGenericParams(s,{alias:i});return Wl(o,n,this)}]}parseGenericParams(e,n){return vn(new je(e),[],this.createParseContext({...n,def:e,prefix:"generic"}))}normalizeRootScopeValue(e){return Bt(e)&&!b(e,"generic")?e():e}preparseOwnDefinitionFormat(e,n){return{...n,def:e,prefix:n.alias??"type"}}parseOwnDefinitionFormat(e,n){!(n.alias&&n.alias in this.aliases)&&!n.args&&(n.args={this:n.id});const i=Ws(e,n);if(U(i)){if(i[1]==="=")return d(Ds);if(i[1]==="?")return d(Bs)}return i}unit=e=>this.units([e]);valueOf=e=>this.units(Ua(e));enumerated=(...e)=>this.units(e);instanceOf=e=>this.node("proto",{proto:e},{prereduced:!0});or=(...e)=>this.schema(e.map(n=>this.parse(n)));and=(...e)=>e.reduce((n,r)=>n.and(this.parse(r)),this.intrinsic.unknown);merge=(...e)=>e.reduce((n,r)=>n.merge(this.parse(r)),this.intrinsic.object);pipe=(...e)=>this.intrinsic.unknown.pipe(...e);match=new Sd(this);declare=()=>({type:this.type});define(e){return e}type=new eh(this);static scope=(e,n={})=>new Pt(e,n);static module=(e,n={})=>this.scope(e,n).export()}const th=Object.assign(Pt.scope,{define:t=>t}),S=Pt;class nh extends oe{description='merge an object\'s properties onto another like `Merge(User, { isAdmin: "true" })`'}const rh=he(["base",y.object],["props",y.object])(t=>t.base.merge(t.props),nh),ih=S.module({Key:y.key,Merge:rh});class sh extends oe{}const oh=he("element")(t=>{const e=t.element.exclude(y.Array),n=e.array();return e.rawOr(n).pipe(rt).distribute(r=>r.assertHasKind("morph").declareOut(n),O)},sh),ah=S.module({root:y.Array,readonly:"root",index:y.nonNegativeIntegerString,liftFrom:oh},{name:"Array"}),wn=O(["string",st.FileConstructor]),lh=wn.rawOr(wn.array()),_r=O({meta:"an object representing parsed form data",domain:"object",index:{signature:"string",value:lh}}),ch=S.module({root:["instanceof",FormData],value:wn,parsed:_r,parse:O({in:FormData,morphs:t=>{const e={};for(const[n,r]of t)if(n in e){const i=e[n];typeof i=="string"||i instanceof st.FileConstructor?e[n]=[i,r]:i.push(r)}else e[n]=r;return e},declaredOut:_r})},{name:"FormData"}),uh=S.module({Int8:["instanceof",Int8Array],Uint8:["instanceof",Uint8Array],Uint8Clamped:["instanceof",Uint8ClampedArray],Int16:["instanceof",Int16Array],Uint16:["instanceof",Uint16Array],Int32:["instanceof",Int32Array],Uint32:["instanceof",Uint32Array],Float32:["instanceof",Float32Array],Float64:["instanceof",Float64Array],BigInt64:["instanceof",BigInt64Array],BigUint64:["instanceof",BigUint64Array]},{name:"TypedArray"}),dh={Boolean:1,Number:1,String:1},hh=S.module({...A({...gi,...yi},(t,e)=>t in dh?[]:[t,["instanceof",e]]),Array:ah,TypedArray:uh,FormData:ch}),fh=O({domain:{domain:"number",meta:"a number representing a Unix timestamp"},divisor:{rule:1,meta:"an integer representing a Unix timestamp"},min:{rule:-864e13,meta:"a Unix timestamp after -8640000000000000"},max:{rule:864e13,meta:"a Unix timestamp before 8640000000000000"},meta:"an integer representing a safe Unix timestamp"}),ph=O({domain:"number",divisor:1}),Zs=S.module({root:y.number,integer:ph,epoch:fh,safe:O({domain:{domain:"number",numberAllowsNaN:!1},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER}),NaN:["===",Number.NaN],Infinity:["===",Number.POSITIVE_INFINITY],NegativeInfinity:["===",Number.NEGATIVE_INFINITY]},{name:"number"}),M=(t,e,n)=>{const r={domain:"string",pattern:{rule:t.source,flags:t.flags,meta:e}};return n&&(r.meta={format:n}),Pn("intersection",r)},Tr=M(wt,"a well-formed integer string"),Ys=S.module({root:Tr,parse:O({in:Tr,morphs:(t,e)=>{const n=Number.parseInt(t);return Number.isSafeInteger(n)?n:e.error("an integer in the range Number.MIN_SAFE_INTEGER to Number.MAX_SAFE_INTEGER")},declaredOut:y.integer})},{name:"string.integer"}),mh=M(/^[\dA-Fa-f]+$/,"hex characters only"),gh=S.module({root:M(/^(?:[\d+/A-Za-z]{4})*(?:[\d+/A-Za-z]{2}==|[\d+/A-Za-z]{3}=)?$/,"base64-encoded"),url:M(/^(?:[\w-]{4})*(?:[\w-]{2}(?:==|%3D%3D)?|[\w-]{3}(?:=|%3D)?)?$/,"base64url-encoded")},{name:"string.base64"}),Er=M(/^[A-Z].*$/,"capitalized"),bh=S.module({root:O({in:"string",morphs:t=>t.charAt(0).toUpperCase()+t.slice(1),declaredOut:Er}),preformatted:Er},{name:"string.capitalize"}),yh=t=>{const e=t.replaceAll(/[ -]+/g,"");let n=0,r,i,s=!1;for(let o=e.length-1;o>=0;o--)r=e.substring(o,o+1),i=Number.parseInt(r,10),s?(i*=2,n+=i>=10?i%10+1:i):n+=i,s=!s;return!!(n%10===0&&e)},vh=/^(?:4\d{12}(?:\d{3,6})?|5[1-5]\d{14}|(222[1-9]|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}|6(?:011|5\d\d)\d{12,15}|3[47]\d{13}|3(?:0[0-5]|[68]\d)\d{11}|(?:2131|1800|35\d{3})\d{11}|6[27]\d{14}|^(81\d{14,17}))$/,xh=O({domain:"string",pattern:{meta:"a credit card number",rule:vh.source},predicate:{meta:"a credit card number",predicate:yh}}),$h=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))(T((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([,.]\d+(?!:))?)?(\17[0-5]\d([,.]\d+)?)?([Zz]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,wh=t=>!Number.isNaN(new Date(t).valueOf()),Pr=O({domain:"string",predicate:{meta:"a parsable date",predicate:wh}}).assertHasKind("intersection"),jr=Ys.root.internal.narrow((t,e)=>{const n=Number.parseInt(t),r=Zs.epoch(n);return r instanceof xe?(e.errors.merge(r),!1):!0}).configure({description:"an integer string representing a safe Unix timestamp"},"self").assertHasKind("intersection"),kh=S.module({root:jr,parse:O({in:jr,morphs:t=>new Date(t),declaredOut:y.Date})},{name:"string.date.epoch"}),zr=M($h,"an ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ) date").internal.assertHasKind("intersection"),Sh=S.module({root:zr,parse:O({in:zr,morphs:t=>new Date(t),declaredOut:y.Date})},{name:"string.date.iso"}),Nh=S.module({root:Pr,parse:O({declaredIn:Pr,in:"string",morphs:(t,e)=>{const n=new Date(t);return Number.isNaN(n.valueOf())?e.error("a parsable date"):n},declaredOut:y.Date}),iso:Sh,epoch:kh},{name:"string.date"}),Ih=M(/^[\w%+.-]+@[\d.A-Za-z-]+\.[A-Za-z]{2,}$/,"an email address","email"),Lr="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",me=`(${Lr}[.]){3}${Lr}`,Fh=new RegExp(`^${me}$`),q="(?:[0-9a-fA-F]{1,4})",Ah=new RegExp(`^((?:${q}:){7}(?:${q}|:)|(?:${q}:){6}(?:${me}|:${q}|:)|(?:${q}:){5}(?::${me}|(:${q}){1,2}|:)|(?:${q}:){4}(?:(:${q}){0,1}:${me}|(:${q}){1,3}|:)|(?:${q}:){3}(?:(:${q}){0,2}:${me}|(:${q}){1,4}|:)|(?:${q}:){2}(?:(:${q}){0,3}:${me}|(:${q}){1,5}|:)|(?:${q}:){1}(?:(:${q}){0,4}:${me}|(:${q}){1,6}|:)|(?::((?::${q}){0,5}:${me}|(?::${q}){1,7}|:)))(%[0-9a-zA-Z.]{1,})?$`),Oh=S.module({root:["v4 | v6","@","an IP address"],v4:M(Fh,"an IPv4 address","ipv4"),v6:M(Ah,"an IPv6 address","ipv6")},{name:"string.ip"}),Re="a JSON string",Xs=t=>{if(!(t instanceof SyntaxError))throw t;return`must be ${Re} (${t})`},Ch=O({meta:Re,domain:"string",predicate:{meta:Re,predicate:(t,e)=>{try{return JSON.parse(t),!0}catch(n){return e.reject({code:"predicate",expected:Re,problem:Xs(n)})}}}}),Mh=(t,e)=>{if(t.length===0)return e.error({code:"predicate",expected:Re,actual:"empty"});try{return JSON.parse(t)}catch(n){return e.error({code:"predicate",expected:Re,problem:Xs(n)})}},Bh=S.module({root:Ch,parse:O({meta:"safe JSON string parser",in:"string",morphs:Mh,declaredOut:y.jsonObject})},{name:"string.json"}),Ur=M(/^[a-z]*$/,"only lowercase letters"),Dh=S.module({root:O({in:"string",morphs:t=>t.toLowerCase(),declaredOut:Ur}),preformatted:Ur},{name:"string.lower"}),Qs=["NFC","NFD","NFKC","NFKD"],ht=A(Qs,(t,e)=>[e,O({domain:"string",predicate:n=>n.normalize(e)===n,meta:`${e}-normalized unicode`})]),jt=A(Qs,(t,e)=>[e,O({in:"string",morphs:n=>n.normalize(e),declaredOut:ht[e]})]),qh=S.module({root:jt.NFC,preformatted:ht.NFC},{name:"string.normalize.NFC"}),Rh=S.module({root:jt.NFD,preformatted:ht.NFD},{name:"string.normalize.NFD"}),Kh=S.module({root:jt.NFKC,preformatted:ht.NFKC},{name:"string.normalize.NFKC"}),_h=S.module({root:jt.NFKD,preformatted:ht.NFKD},{name:"string.normalize.NFKD"}),Th=S.module({root:"NFC",NFC:qh,NFD:Rh,NFKC:Kh,NFKD:_h},{name:"string.normalize"}),Vr=M(on,"a well-formed numeric string"),Eh=S.module({root:Vr,parse:O({in:Vr,morphs:t=>Number.parseFloat(t),declaredOut:y.number})},{name:"string.numeric"}),Jr="a regex pattern",Ph=O({domain:"string",predicate:{meta:Jr,predicate:(t,e)=>{try{return new RegExp(t),!0}catch(n){return e.reject({code:"predicate",expected:Jr,problem:String(n)})}}},meta:{format:"regex"}}),jh=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*)(?:\.(?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*))*))?(?:\+([\dA-Za-z-]+(?:\.[\dA-Za-z-]+)*))?$/,zh=M(jh,"a semantic version (see https://semver.org/)"),Hr=M(/^\S.*\S$|^\S?$/,"trimmed"),Lh=S.module({root:O({in:"string",morphs:t=>t.trim(),declaredOut:Hr}),preformatted:Hr},{name:"string.trim"}),Gr=M(/^[A-Z]*$/,"only uppercase letters"),Uh=S.module({root:O({in:"string",morphs:t=>t.toUpperCase(),declaredOut:Gr}),preformatted:Gr},{name:"string.upper"}),Vh=t=>{if(URL.canParse)return URL.canParse(t);try{return new URL(t),!0}catch{return!1}},Wr=O({domain:"string",predicate:{meta:"a URL string",predicate:Vh},meta:{format:"uri"}}),Jh=S.module({root:Wr,parse:O({declaredIn:Wr,in:"string",morphs:(t,e)=>{try{return new URL(t)}catch{return e.error("a URL string")}},declaredOut:O(URL)})},{name:"string.url"}),Hh=S.module({root:["versioned | nil | max","@",{description:"a UUID",format:"uuid"}],"#nil":"'00000000-0000-0000-0000-000000000000'","#max":"'ffffffff-ffff-ffff-ffff-ffffffffffff'","#versioned":/[\da-f]{8}-[\da-f]{4}-[1-8][\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}/i,v1:M(/^[\da-f]{8}-[\da-f]{4}-1[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv1"),v2:M(/^[\da-f]{8}-[\da-f]{4}-2[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv2"),v3:M(/^[\da-f]{8}-[\da-f]{4}-3[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv3"),v4:M(/^[\da-f]{8}-[\da-f]{4}-4[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv4"),v5:M(/^[\da-f]{8}-[\da-f]{4}-5[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv5"),v6:M(/^[\da-f]{8}-[\da-f]{4}-6[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv6"),v7:M(/^[\da-f]{8}-[\da-f]{4}-7[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv7"),v8:M(/^[\da-f]{8}-[\da-f]{4}-8[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv8")},{name:"string.uuid"}),Gh=S.module({root:y.string,alpha:M(/^[A-Za-z]*$/,"only letters"),alphanumeric:M(/^[\dA-Za-z]*$/,"only letters and digits 0-9"),hex:mh,base64:gh,capitalize:bh,creditCard:xh,date:Nh,digits:M(/^\d*$/,"only digits 0-9"),email:Ih,integer:Ys,ip:Oh,json:Bh,lower:Dh,normalize:Th,numeric:Eh,regex:Ph,semver:zh,trim:Lh,upper:Uh,url:Jh,uuid:Hh},{name:"string"}),Wh=S.module({bigint:y.bigint,boolean:y.boolean,false:y.false,never:y.never,null:y.null,number:y.number,object:y.object,string:y.string,symbol:y.symbol,true:y.true,unknown:y.unknown,undefined:y.undefined}),Zh=S.module({root:y.unknown,any:y.unknown},{name:"unknown"}),Yh=S.module({root:y.jsonObject,stringify:Pn("morph",{in:y.jsonObject,morphs:t=>JSON.stringify(t),declaredOut:y.string})},{name:"object.json"}),Xh=S.module({root:y.object,json:Yh},{name:"object"});class Qh extends oe{description='instantiate an object from an index signature and corresponding value type like `Record("string", "number")`'}const ef=he(["K",y.key],"V")(t=>({domain:"object",index:{signature:t.K,value:t.V}}),Qh);class tf extends oe{description='pick a set of properties from an object like `Pick(User, "name | age")`'}const nf=he(["T",y.object],["K",y.key])(t=>t.T.pick(t.K),tf);class rf extends oe{description='omit a set of properties from an object like `Omit(User, "age")`'}const sf=he(["T",y.object],["K",y.key])(t=>t.T.omit(t.K),rf);class of extends oe{description="make all named properties of an object optional like `Partial(User)`"}const af=he(["T",y.object])(t=>t.T.partial(),of);class lf extends oe{description="make all named properties of an object required like `Required(User)`"}const cf=he(["T",y.object])(t=>t.T.required(),lf);class uf extends oe{description='exclude branches of a union like `Exclude("boolean", "true")`'}const df=he("T","U")(t=>t.T.exclude(t.U),uf);class hf extends oe{description='extract branches of a union like `Extract("0 | false | 1", "number")`'}const ff=he("T","U")(t=>t.T.extract(t.U),hf),pf=S.module({Exclude:df,Extract:ff,Omit:sf,Partial:af,Pick:nf,Record:ef,Required:cf}),Ce=th({...Wh,...pf,...hh,...ih,string:Gh,number:Zs,object:Xh,unknown:Zh},{prereducedAliases:!0,name:"ark"}),E=Ce.export();Object.assign(nt.ambient,E);nt.typeAttachments={string:E.string.root,number:E.number.root,bigint:E.bigint,boolean:E.boolean,symbol:E.symbol,undefined:E.undefined,null:E.null,object:E.object.root,unknown:E.unknown.root,false:E.false,true:E.true,never:E.never,arrayIndex:E.Array.index,Key:E.Key,Record:E.Record,Array:E.Array.root,Date:E.Date};Object.assign(Ce.type,nt.typeAttachments);Ce.match;Ce.generic;Ce.schema;Ce.define;Ce.declare;const mf={class:"overflow-x-hidden"},gf={class:"flex-1 flex items-center justify-center relative px-4"},bf={class:"w-full max-w-7xl mx-auto py-16"},yf={class:"grid grid-cols-1 mt-5 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-8 max-w-[800px] md:max-w-[90%] mx-auto"},vf={class:"flex items-be justify-between w-full mb-4"},xf={class:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#FFFFFF15] to-[#FFFFFF08] flex items-center justify-center text-[#FFFFFF80]"},$f={class:"mb-4"},wf={class:"flex items-be justify-between w-full mb-4"},kf={class:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#FFFFFF15] to-[#FFFFFF08] flex items-center justify-center text-[#FFFFFF80]"},Sf={class:"mb-4"},Nf={class:"flex items-be justify-between w-full mb-4"},If={class:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#FFFFFF15] to-[#FFFFFF08] flex items-center justify-center text-[#FFFFFF80]"},Ff={class:"mb-4"},Af={key:0,class:"text-red-500"},Of={key:0,class:"text-red-500"},Cf={key:0,class:"text-red-500"},Mf={key:0,class:"text-red-500"},Bf={class:"space-y-6"},Df=["id"],qf={class:"text-[12px] text-[var(--text-secondary)] leading-relaxed"},Zr="bonaserakonnect@gmail.com",Yr="@bonasera_konnect",Xr="+234 808 744 6762",jf={__name:"Contact",setup(t){document.title="Bonasera Konnect | Contact Us";const{copyText:e}=Go();let n=P(!1);P(!1);let r="";const i=P(""),s=P(""),o=P(""),a=P(""),l=P({name:"",email:"",subject:"",message:""}),c=w=>/^.+@.+\..+$/.test(w),u=()=>{let w=!0;return l.value={name:"",email:"",subject:"",message:""},i.value||(l.value.name="Name is required",w=!1),c(s.value)||(l.value.email="Invalid email",w=!1),o.value.length<3&&(l.value.subject="Subject is too short",w=!1),a.value.length<10&&(l.value.message="Message must be at least 10 characters",w=!1),w},p=async()=>{if(!u())return;const w={name:i.value,email:s.value,subject:o.value,message:a.value};try{window.addEventListener("scroll",N=>{N.preventDefault()}),n.value=!0;const h=await ao.post("/contact",w);console.log(h),h.status===200?(Ze.success(h.data.message,2e3),r=h.data.message,i.value="",s.value="",o.value="",a.value=""):Ze.danger(h.data.error||"Something went wrong",2e3)}catch(h){ho.close(),h.response?.data?.error||h.response?.data?.message,console.error("Submission error:",h),Ze.danger(`Failed - ${h}`,2e3)}finally{n.value=!1}},$=[{id:1,title:"How quickly do you respond to inquiries?",description:"We typically respond to email inquiries within 24 hours. For urgent matters, WhatsApp and Twitter/X usually provide faster response times."},{id:2,title:" What information should I include in my message?",description:"Please include your name, email, a detailed description of your project or inquiry, and any relevant details that might help us understand your needs better."},{id:3,title:"Do you offer custom development services?",description:"Yes, we provide custom development services tailored to your specific requirements. Contact us with your project details, and we'll get back to you with more information."}];return(w,h)=>(C(),ie("div",mf,[k(n)?(C(),V(Qo,{key:0,Title:"Sending",Message:"Please wait while you message is being sent..."})):ee("",!0),g("div",null,[v(k(lo),{class:"pt-10"}),v(fo,{badge:"Contact Us",title:"Get In Touch",paragraph:"Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible."}),g("div",gf,[h[24]||(h[24]=g("div",{class:"hidden lg:block absolute opacity-5 top-[20%] left-0 w-[400px] h-[400px] rounded-full bg-[#e1c4ff] blur-[120px] -translate-x-1/2"},null,-1)),h[25]||(h[25]=g("div",{class:"hidden lg:block absolute opacity-5 bottom-[20%] right-0 w-[400px] h-[400px] rounded-full bg-[#e1c4ff] blur-[120px] translate-x-1/2"},null,-1)),g("div",bf,[g("div",yf,[v(k(He),{class:"group bg-[#FFFFFF03] rounded-[16px] p-6 hover:border-[#F9F8FF20] border border-[#F9F8FF0F] transition-all duration-200 cursor-pointer"},{default:z(()=>[g("div",vf,[g("div",xf,[v(k(po))]),g("button",{onClick:h[0]||(h[0]=N=>k(e)(Zr)),class:"w-12 h-12 flex items-center justify-center opacity-0 group-hover:opacity-100 p-2 hover:bg-[#FFFFFF15] rounded-lg transition-all"},[v(k(Vt),{size:"20",color:"#444444"})])]),g("div",$f,[v(k(pt),{class:"flex items-center gap-2 mb-2"},{default:z(()=>h[7]||(h[7]=[g("h3",{class:"text-[16px] font-medium"},"Email Support",-1),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-external-link w-4 h-4 text-[#FFFFFF60] opacity-0 group-hover:opacity-100 transition-opacity"},[g("path",{d:"M15 3h6v6"}),g("path",{d:"M10 14 21 3"}),g("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"})],-1)])),_:1,__:[7]}),v(k(Ut),null,{default:z(()=>h[8]||(h[8]=[we(" Email ")])),_:1,__:[8]})]),g("div",{class:"mb-4 w-full"},[g("p",{class:"text-[14px] font-mono text-[#FFFFFF90] bg-[#FFFFFF05] px-3 py-2 rounded-lg border border-[#F9F8FF08]"},X(Zr))]),h[9]||(h[9]=g("p",{class:"text-[12px] text-[#FFFFFF70] leading-relaxed"}," Get help via email. We typically respond within 24 hours. ",-1))]),_:1,__:[9]}),v(k(He),{class:"group bg-[#FFFFFF03] rounded-[16px] p-6 hover:border-[#F9F8FF20] border border-[#F9F8FF0F] transition-all duration-200 cursor-pointer"},{default:z(()=>[g("div",wf,[g("div",kf,[v(k(go))]),g("button",{onClick:h[1]||(h[1]=N=>k(e)(Yr)),class:"w-12 h-12 flex items-center justify-center opacity-0 group-hover:opacity-100 p-2 hover:bg-[#FFFFFF15] rounded-lg transition-all"},[v(k(Vt),{size:"20",color:"#444444"})])]),g("div",Sf,[v(k(pt),{class:"flex items-center gap-2 mb-2"},{default:z(()=>h[10]||(h[10]=[g("h3",{class:"text-[16px] font-medium"},"Twitter/X",-1),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-external-link w-4 h-4 text-[#FFFFFF60] opacity-0 group-hover:opacity-100 transition-opacity"},[g("path",{d:"M15 3h6v6"}),g("path",{d:"M10 14 21 3"}),g("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"})],-1)])),_:1,__:[10]}),v(k(Ut),null,{default:z(()=>h[11]||(h[11]=[we(" Social Media ")])),_:1,__:[11]})]),g("div",{class:"mb-4 w-full"},[g("p",{class:"text-[14px] font-mono text-[#FFFFFF90] bg-[#FFFFFF05] px-3 py-2 rounded-lg border border-[#F9F8FF08]"},X(Yr))]),h[12]||(h[12]=g("p",{class:"text-[12px] text-[#FFFFFF70] leading-relaxed"}," Follow us for updates and quick support on Twitter/X. ",-1))]),_:1,__:[12]}),v(k(He),{class:"group bg-[#FFFFFF03] rounded-[16px] p-6 hover:border-[#F9F8FF20] border border-[#F9F8FF0F] transition-all duration-200 cursor-pointer"},{default:z(()=>[g("div",Nf,[g("div",If,[v(k(mo))]),g("button",{onClick:h[2]||(h[2]=N=>k(e)(Xr)),class:"w-12 h-12 flex items-center justify-center opacity-0 group-hover:opacity-100 p-2 hover:bg-[#FFFFFF15] rounded-lg transition-all"},[v(k(Vt),{size:"20",color:"#444444"})])]),g("div",Ff,[v(k(pt),{class:"flex items-center gap-2 mb-2"},{default:z(()=>h[13]||(h[13]=[g("h3",{class:"text-[16px] font-medium"},"WhatsApp",-1),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-external-link w-4 h-4 text-[#FFFFFF60] opacity-0 group-hover:opacity-100 transition-opacity"},[g("path",{d:"M15 3h6v6"}),g("path",{d:"M10 14 21 3"}),g("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"})],-1)])),_:1,__:[13]}),v(k(Ut),null,{default:z(()=>h[14]||(h[14]=[we(" Instant Messaging ")])),_:1,__:[14]})]),g("div",{class:"mb-4 w-full"},[g("p",{class:"text-[14px] font-mono text-[#FFFFFF90] bg-[#FFFFFF05] px-3 py-2 rounded-lg border border-[#F9F8FF08]"},X(Xr))]),h[15]||(h[15]=g("p",{class:"text-[12px] text-[#FFFFFF70] leading-relaxed"}," Chat with us directly on WhatsApp for immediate assistance. ",-1))]),_:1,__:[15]})]),v(k(He),{class:"p-[28px] max-w-[800px] mt-0 mx-auto bg-[#FFFFFF03] border border-[var(--border-gray)] rounded-xl shadow-lg mb-10"},{default:z(()=>[v(k(co),{class:"font-bold",style:{"text-align":"center","margin-bottom":"30px",color:"var(--text-clr)"}},{default:z(()=>h[16]||(h[16]=[we("Send us a Message")])),_:1,__:[16]}),v(k(ta),{onSubmit:so(p,["prevent"]),class:"space-y-4 w-full"},{default:z(()=>[g("div",{class:fe(`${k(mt)} group mb-5 flex flex-col gap-2`)},[h[17]||(h[17]=g("label",{for:"name",class:"font-medium"},"Full Name",-1)),v(k(Ht),{modelValue:i.value,"onUpdate:modelValue":h[3]||(h[3]=N=>i.value=N),class:fe(l.value.name?"error":""),id:"name",type:"text",placeholder:"John Doe"},null,8,["modelValue","class"]),l.value.name?(C(),ie("small",Af,X(l.value.name),1)):ee("",!0)],2),g("div",{class:fe(`${k(mt)} group mb-5 flex flex-col gap-2`)},[h[18]||(h[18]=g("label",{for:"email",class:"font-medium"},"Email",-1)),v(k(Ht),{modelValue:s.value,"onUpdate:modelValue":h[4]||(h[4]=N=>s.value=N),class:fe(l.value.email?"error":""),id:"email",type:"email",placeholder:"john@example.com"},null,8,["modelValue","class"]),l.value.email?(C(),ie("small",Of,X(l.value.email),1)):ee("",!0)],2),g("div",{class:fe(`${k(mt)} group mb-5 flex flex-col gap-2`)},[h[19]||(h[19]=g("label",{for:"subject",class:"font-medium"},"Subject",-1)),v(k(Ht),{modelValue:o.value,"onUpdate:modelValue":h[5]||(h[5]=N=>o.value=N),class:fe(l.value.subject?"error":""),id:"subject",type:"text",placeholder:"Subject"},null,8,["modelValue","class"]),l.value.subject?(C(),ie("small",Cf,X(l.value.subject),1)):ee("",!0)],2),g("div",{class:fe(`${k(mt)} group mb-5 flex flex-col gap-2`)},[h[20]||(h[20]=g("label",{for:"message",class:"font-medium"},"Message",-1)),v(k(ia),{modelValue:a.value,"onUpdate:modelValue":h[6]||(h[6]=N=>a.value=N),class:fe(l.value.message?"error":""),id:"message",placeholder:"Your message here..."},null,8,["modelValue","class"]),l.value.message?(C(),ie("small",Mf,X(l.value.message),1)):ee("",!0)],2),h[22]||(h[22]=g("br",null,null,-1)),v(oo,null,{default:z(()=>h[21]||(h[21]=[we("Submit")])),_:1,__:[21]})]),_:1,__:[22]})]),_:1}),v(k(He),{class:"p-6 md:p-8 border border-[#F9F8FF0F] max-w-[800px] md:max-w-[90%] mx-auto"},{default:z(()=>[v(k(pt),{class:""},{default:z(()=>h[23]||(h[23]=[we("Frequently Asked Questions")])),_:1,__:[23]}),g("div",Bf,[(C(),ie(Qr,null,ei($,(N,Ve)=>g("div",{key:Ve,id:"contactFaq-"+N.id,class:"border-b border-[#F9F8FF10] pb-4"},[v(k(uo),{class:"mb-2 text-"},{default:z(()=>[we(X(N.title),1)]),_:2},1024),g("p",qf,X(N.description),1)],8,Df)),64))])]),_:1})])])])]))}};export{jf as default};
